(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ch(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const Ge={},Bs=[],tn=()=>{},oE=()=>!1,Tl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),kh=t=>t.startsWith("onUpdate:"),at=Object.assign,Oh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},aE=Object.prototype.hasOwnProperty,Pe=(t,e)=>aE.call(t,e),ue=Array.isArray,js=t=>Ro(t)==="[object Map]",bl=t=>Ro(t)==="[object Set]",Ff=t=>Ro(t)==="[object Date]",ge=t=>typeof t=="function",tt=t=>typeof t=="string",Rr=t=>typeof t=="symbol",$e=t=>t!==null&&typeof t=="object",L_=t=>($e(t)||ge(t))&&ge(t.then)&&ge(t.catch),F_=Object.prototype.toString,Ro=t=>F_.call(t),lE=t=>Ro(t).slice(8,-1),U_=t=>Ro(t)==="[object Object]",xh=t=>tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ia=Ch(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Il=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},uE=/-(\w)/g,Nn=Il(t=>t.replace(uE,(e,n)=>n?n.toUpperCase():"")),cE=/\B([A-Z])/g,hi=Il(t=>t.replace(cE,"-$1").toLowerCase()),Al=Il(t=>t.charAt(0).toUpperCase()+t.slice(1)),Mu=Il(t=>t?`on${Al(t)}`:""),Pr=(t,e)=>!Object.is(t,e),Aa=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Ua=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Dh=t=>{const e=parseFloat(t);return isNaN(e)?t:e},hE=t=>{const e=tt(t)?Number(t):NaN;return isNaN(e)?t:e};let Uf;const $_=()=>Uf||(Uf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Yi(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=tt(r)?mE(r):Yi(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(tt(t)||$e(t))return t}const dE=/;(?![^(]*\))/g,fE=/:([^]+)/,pE=/\/\*[^]*?\*\//g;function mE(t){const e={};return t.replace(pE,"").split(dE).forEach(n=>{if(n){const r=n.split(fE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function cn(t){let e="";if(tt(t))e=t;else if(ue(t))for(let n=0;n<t.length;n++){const r=cn(t[n]);r&&(e+=r+" ")}else if($e(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const _E="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",gE=Ch(_E);function B_(t){return!!t||t===""}function yE(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ji(t[r],e[r]);return n}function Ji(t,e){if(t===e)return!0;let n=Ff(t),r=Ff(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Rr(t),r=Rr(e),n||r)return t===e;if(n=ue(t),r=ue(e),n||r)return n&&r?yE(t,e):!1;if(n=$e(t),r=$e(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),u=e.hasOwnProperty(o);if(l&&!u||!l&&u||!Ji(t[o],e[o]))return!1}}return String(t)===String(e)}function vE(t,e){return t.findIndex(n=>Ji(n,e))}const Ls=t=>tt(t)?t:t==null?"":ue(t)||$e(t)&&(t.toString===F_||!ge(t.toString))?JSON.stringify(t,j_,2):String(t),j_=(t,e)=>e&&e.__v_isRef?j_(t,e.value):js(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Lu(r,i)+" =>"]=s,n),{})}:bl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Lu(n))}:Rr(e)?Lu(e):$e(e)&&!ue(e)&&!U_(e)?String(e):e,Lu=(t,e="")=>{var n;return Rr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Wt;class q_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Wt,!e&&Wt&&(this.index=(Wt.scopes||(Wt.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=Wt;try{return Wt=this,e()}finally{Wt=n}}}on(){Wt=this}off(){Wt=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function H_(t){return new q_(t)}function wE(t,e=Wt){e&&e.active&&e.effects.push(t)}function z_(){return Wt}function EE(t){Wt&&Wt.cleanups.push(t)}let es;class Nh{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=2,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,wE(this,s)}get dirty(){if(this._dirtyLevel===1){ms();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(TE(n.computed),this._dirtyLevel>=2))break}this._dirtyLevel<2&&(this._dirtyLevel=0),_s()}return this._dirtyLevel>=2}set dirty(e){this._dirtyLevel=e?2:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=wr,n=es;try{return wr=!0,es=this,this._runnings++,$f(this),this.fn()}finally{Bf(this),this._runnings--,es=n,wr=e}}stop(){var e;this.active&&($f(this),Bf(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function TE(t){return t.value}function $f(t){t._trackId++,t._depsLength=0}function Bf(t){if(t.deps&&t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)G_(t.deps[e],t);t.deps.length=t._depsLength}}function G_(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let wr=!0,Ec=0;const W_=[];function ms(){W_.push(wr),wr=!1}function _s(){const t=W_.pop();wr=t===void 0?!0:t}function Vh(){Ec++}function Mh(){for(Ec--;!Ec&&Tc.length;)Tc.shift()()}function K_(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&G_(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const Tc=[];function Q_(t,e,n){Vh();for(const r of t.keys())if(r._dirtyLevel<e&&t.get(r)===r._trackId){const s=r._dirtyLevel;r._dirtyLevel=e,s===0&&(r._shouldSchedule=!0,r.trigger())}X_(t),Mh()}function X_(t){for(const e of t.keys())e.scheduler&&e._shouldSchedule&&(!e._runnings||e.allowRecurse)&&t.get(e)===e._trackId&&(e._shouldSchedule=!1,Tc.push(e.scheduler))}const Y_=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},$a=new WeakMap,ts=Symbol(""),bc=Symbol("");function Gt(t,e,n){if(wr&&es){let r=$a.get(t);r||$a.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=Y_(()=>r.delete(n))),K_(es,s)}}function Gn(t,e,n,r,s,i){const o=$a.get(t);if(!o)return;let l=[];if(e==="clear")l=[...o.values()];else if(n==="length"&&ue(t)){const u=Number(r);o.forEach((c,d)=>{(d==="length"||!Rr(d)&&d>=u)&&l.push(c)})}else switch(n!==void 0&&l.push(o.get(n)),e){case"add":ue(t)?xh(n)&&l.push(o.get("length")):(l.push(o.get(ts)),js(t)&&l.push(o.get(bc)));break;case"delete":ue(t)||(l.push(o.get(ts)),js(t)&&l.push(o.get(bc)));break;case"set":js(t)&&l.push(o.get(ts));break}Vh();for(const u of l)u&&Q_(u,2);Mh()}function bE(t,e){var n;return(n=$a.get(t))==null?void 0:n.get(e)}const IE=Ch("__proto__,__v_isRef,__isVue"),J_=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Rr)),jf=AE();function AE(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Re(this);for(let i=0,o=this.length;i<o;i++)Gt(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Re)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){ms(),Vh();const r=Re(this)[e].apply(this,n);return Mh(),_s(),r}}),t}function SE(t){const e=Re(this);return Gt(e,"has",t),e.hasOwnProperty(t)}class Z_{constructor(e=!1,n=!1){this._isReadonly=e,this._shallow=n}get(e,n,r){const s=this._isReadonly,i=this._shallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?UE:rg:i?ng:tg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ue(e);if(!s){if(o&&Pe(jf,n))return Reflect.get(jf,n,r);if(n==="hasOwnProperty")return SE}const l=Reflect.get(e,n,r);return(Rr(n)?J_.has(n):IE(n))||(s||Gt(e,"get",n),i)?l:Qe(l)?o&&xh(n)?l:l.value:$e(l)?s?Uh(l):Kn(l):l}}class eg extends Z_{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._shallow){const u=Ys(i);if(!Ba(r)&&!Ys(r)&&(i=Re(i),r=Re(r)),!ue(e)&&Qe(i)&&!Qe(r))return u?!1:(i.value=r,!0)}const o=ue(e)&&xh(n)?Number(n)<e.length:Pe(e,n),l=Reflect.set(e,n,r,s);return e===Re(s)&&(o?Pr(r,i)&&Gn(e,"set",n,r):Gn(e,"add",n,r)),l}deleteProperty(e,n){const r=Pe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Gn(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Rr(n)||!J_.has(n))&&Gt(e,"has",n),r}ownKeys(e){return Gt(e,"iterate",ue(e)?"length":ts),Reflect.ownKeys(e)}}class RE extends Z_{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const PE=new eg,CE=new RE,kE=new eg(!0),Lh=t=>t,Sl=t=>Reflect.getPrototypeOf(t);function na(t,e,n=!1,r=!1){t=t.__v_raw;const s=Re(t),i=Re(e);n||(Pr(e,i)&&Gt(s,"get",e),Gt(s,"get",i));const{has:o}=Sl(s),l=r?Lh:n?Bh:Zi;if(o.call(s,e))return l(t.get(e));if(o.call(s,i))return l(t.get(i));t!==s&&t.get(e)}function ra(t,e=!1){const n=this.__v_raw,r=Re(n),s=Re(t);return e||(Pr(t,s)&&Gt(r,"has",t),Gt(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function sa(t,e=!1){return t=t.__v_raw,!e&&Gt(Re(t),"iterate",ts),Reflect.get(t,"size",t)}function qf(t){t=Re(t);const e=Re(this);return Sl(e).has.call(e,t)||(e.add(t),Gn(e,"add",t,t)),this}function Hf(t,e){e=Re(e);const n=Re(this),{has:r,get:s}=Sl(n);let i=r.call(n,t);i||(t=Re(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Pr(e,o)&&Gn(n,"set",t,e):Gn(n,"add",t,e),this}function zf(t){const e=Re(this),{has:n,get:r}=Sl(e);let s=n.call(e,t);s||(t=Re(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&Gn(e,"delete",t,void 0),i}function Gf(){const t=Re(this),e=t.size!==0,n=t.clear();return e&&Gn(t,"clear",void 0,void 0),n}function ia(t,e){return function(r,s){const i=this,o=i.__v_raw,l=Re(o),u=e?Lh:t?Bh:Zi;return!t&&Gt(l,"iterate",ts),o.forEach((c,d)=>r.call(s,u(c),u(d),i))}}function oa(t,e,n){return function(...r){const s=this.__v_raw,i=Re(s),o=js(i),l=t==="entries"||t===Symbol.iterator&&o,u=t==="keys"&&o,c=s[t](...r),d=n?Lh:e?Bh:Zi;return!e&&Gt(i,"iterate",u?bc:ts),{next(){const{value:a,done:h}=c.next();return h?{value:a,done:h}:{value:l?[d(a[0]),d(a[1])]:d(a),done:h}},[Symbol.iterator](){return this}}}}function tr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function OE(){const t={get(i){return na(this,i)},get size(){return sa(this)},has:ra,add:qf,set:Hf,delete:zf,clear:Gf,forEach:ia(!1,!1)},e={get(i){return na(this,i,!1,!0)},get size(){return sa(this)},has:ra,add:qf,set:Hf,delete:zf,clear:Gf,forEach:ia(!1,!0)},n={get(i){return na(this,i,!0)},get size(){return sa(this,!0)},has(i){return ra.call(this,i,!0)},add:tr("add"),set:tr("set"),delete:tr("delete"),clear:tr("clear"),forEach:ia(!0,!1)},r={get(i){return na(this,i,!0,!0)},get size(){return sa(this,!0)},has(i){return ra.call(this,i,!0)},add:tr("add"),set:tr("set"),delete:tr("delete"),clear:tr("clear"),forEach:ia(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=oa(i,!1,!1),n[i]=oa(i,!0,!1),e[i]=oa(i,!1,!0),r[i]=oa(i,!0,!0)}),[t,n,e,r]}const[xE,DE,NE,VE]=OE();function Fh(t,e){const n=e?t?VE:NE:t?DE:xE;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Pe(n,s)&&s in r?n:r,s,i)}const ME={get:Fh(!1,!1)},LE={get:Fh(!1,!0)},FE={get:Fh(!0,!1)},tg=new WeakMap,ng=new WeakMap,rg=new WeakMap,UE=new WeakMap;function $E(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BE(t){return t.__v_skip||!Object.isExtensible(t)?0:$E(lE(t))}function Kn(t){return Ys(t)?t:$h(t,!1,PE,ME,tg)}function sg(t){return $h(t,!1,kE,LE,ng)}function Uh(t){return $h(t,!0,CE,FE,rg)}function $h(t,e,n,r,s){if(!$e(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=BE(t);if(o===0)return t;const l=new Proxy(t,o===2?r:n);return s.set(t,l),l}function Er(t){return Ys(t)?Er(t.__v_raw):!!(t&&t.__v_isReactive)}function Ys(t){return!!(t&&t.__v_isReadonly)}function Ba(t){return!!(t&&t.__v_isShallow)}function ig(t){return Er(t)||Ys(t)}function Re(t){const e=t&&t.__v_raw;return e?Re(e):t}function Rl(t){return Ua(t,"__v_skip",!0),t}const Zi=t=>$e(t)?Kn(t):t,Bh=t=>$e(t)?Uh(t):t;class og{constructor(e,n,r,s){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Nh(()=>e(this._value),()=>Sa(this,1),()=>this.dep&&X_(this.dep)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Re(this);return(!e._cacheable||e.effect.dirty)&&Pr(e._value,e._value=e.effect.run())&&Sa(e,2),ag(e),e.effect._dirtyLevel>=1&&Sa(e,1),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function jE(t,e,n=!1){let r,s;const i=ge(t);return i?(r=t,s=tn):(r=t.get,s=t.set),new og(r,s,i||!s,n)}function ag(t){wr&&es&&(t=Re(t),K_(es,t.dep||(t.dep=Y_(()=>t.dep=void 0,t instanceof og?t:void 0))))}function Sa(t,e=2,n){t=Re(t);const r=t.dep;r&&Q_(r,e)}function Qe(t){return!!(t&&t.__v_isRef===!0)}function Ve(t){return ug(t,!1)}function lg(t){return ug(t,!0)}function ug(t,e){return Qe(t)?t:new qE(t,e)}class qE{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Re(e),this._value=n?e:Zi(e)}get value(){return ag(this),this._value}set value(e){const n=this.__v_isShallow||Ba(e)||Ys(e);e=n?e:Re(e),Pr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Zi(e),Sa(this,2))}}function te(t){return Qe(t)?t.value:t}function De(t){return ge(t)?t():te(t)}const HE={get:(t,e,n)=>te(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Qe(s)&&!Qe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function cg(t){return Er(t)?t:new Proxy(t,HE)}function zE(t){const e=ue(t)?new Array(t.length):{};for(const n in t)e[n]=hg(t,n);return e}class GE{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return bE(Re(this._object),this._key)}}class WE{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function wi(t,e,n){return Qe(t)?t:ge(t)?new WE(t):$e(t)&&arguments.length>1?hg(t,e,n):Ve(t)}function hg(t,e,n){const r=t[e];return Qe(r)?r:new GE(t,e,n)}/**
* @vue/runtime-core v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tr(t,e,n,r){let s;try{s=r?t(...r):t()}catch(i){Pl(i,e,n)}return s}function nn(t,e,n,r){if(ge(t)){const i=Tr(t,e,n,r);return i&&L_(i)&&i.catch(o=>{Pl(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(nn(t[i],e,n,r));return s}function Pl(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,o,l)===!1)return}i=i.parent}const u=e.appContext.config.errorHandler;if(u){Tr(u,null,10,[t,o,l]);return}}KE(t,n,s,r)}function KE(t,e,n,r=!0){console.error(t)}let eo=!1,Ic=!1;const It=[];let Tn=0;const qs=[];let ur=null,qr=0;const dg=Promise.resolve();let jh=null;function Ut(t){const e=jh||dg;return t?e.then(this?t.bind(this):t):e}function QE(t){let e=Tn+1,n=It.length;for(;e<n;){const r=e+n>>>1,s=It[r],i=to(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function qh(t){(!It.length||!It.includes(t,eo&&t.allowRecurse?Tn+1:Tn))&&(t.id==null?It.push(t):It.splice(QE(t.id),0,t),fg())}function fg(){!eo&&!Ic&&(Ic=!0,jh=dg.then(mg))}function XE(t){const e=It.indexOf(t);e>Tn&&It.splice(e,1)}function YE(t){ue(t)?qs.push(...t):(!ur||!ur.includes(t,t.allowRecurse?qr+1:qr))&&qs.push(t),fg()}function Wf(t,e,n=eo?Tn+1:0){for(;n<It.length;n++){const r=It[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;It.splice(n,1),n--,r()}}}function pg(t){if(qs.length){const e=[...new Set(qs)].sort((n,r)=>to(n)-to(r));if(qs.length=0,ur){ur.push(...e);return}for(ur=e,qr=0;qr<ur.length;qr++)ur[qr]();ur=null,qr=0}}const to=t=>t.id==null?1/0:t.id,JE=(t,e)=>{const n=to(t)-to(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function mg(t){Ic=!1,eo=!0,It.sort(JE);try{for(Tn=0;Tn<It.length;Tn++){const e=It[Tn];e&&e.active!==!1&&Tr(e,null,14)}}finally{Tn=0,It.length=0,pg(),eo=!1,jh=null,(It.length||qs.length)&&mg()}}function ZE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Ge;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const d=`${o==="modelValue"?"model":o}Modifiers`,{number:a,trim:h}=r[d]||Ge;h&&(s=n.map(f=>tt(f)?f.trim():f)),a&&(s=n.map(Dh))}let l,u=r[l=Mu(e)]||r[l=Mu(Nn(e))];!u&&i&&(u=r[l=Mu(hi(e))]),u&&nn(u,t,6,s);const c=r[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,nn(c,t,6,s)}}function _g(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},l=!1;if(!ge(t)){const u=c=>{const d=_g(c,e,!0);d&&(l=!0,at(o,d))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!l?($e(t)&&r.set(t,null),null):(ue(i)?i.forEach(u=>o[u]=null):at(o,i),$e(t)&&r.set(t,o),o)}function Cl(t,e){return!t||!Tl(e)?!1:(e=e.slice(2).replace(/Once$/,""),Pe(t,e[0].toLowerCase()+e.slice(1))||Pe(t,hi(e))||Pe(t,e))}let St=null,gg=null;function ja(t){const e=St;return St=t,gg=t&&t.type.__scopeId||null,e}function ns(t,e=St,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&ip(-1);const i=ja(e);let o;try{o=t(...s)}finally{ja(i),r._d&&ip(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Fu(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:l,attrs:u,emit:c,render:d,renderCache:a,data:h,setupState:f,ctx:p,inheritAttrs:_}=t;let m,g;const T=ja(t);try{if(n.shapeFlag&4){const S=s||r,L=S;m=En(d.call(L,S,a,i,f,h,p)),g=u}else{const S=e;m=En(S.length>1?S(i,{attrs:u,slots:l,emit:c}):S(i,null)),g=e.props?u:eT(u)}}catch(S){Fi.length=0,Pl(S,t,1),m=we(hn)}let I=m;if(g&&_!==!1){const S=Object.keys(g),{shapeFlag:L}=I;S.length&&L&7&&(o&&S.some(kh)&&(g=tT(g,o)),I=Cr(I,g))}return n.dirs&&(I=Cr(I),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&(I.transition=n.transition),m=I,ja(T),m}const eT=t=>{let e;for(const n in t)(n==="class"||n==="style"||Tl(n))&&((e||(e={}))[n]=t[n]);return e},tT=(t,e)=>{const n={};for(const r in t)(!kh(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function nT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:l,patchFlag:u}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Kf(r,o,c):!!o;if(u&8){const d=e.dynamicProps;for(let a=0;a<d.length;a++){const h=d[a];if(o[h]!==r[h]&&!Cl(c,h))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===o?!1:r?o?Kf(r,o,c):!0:!!o;return!1}function Kf(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Cl(n,i))return!0}return!1}function rT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Hh="components";function no(t,e){return vg(Hh,t,!0,e)||t}const yg=Symbol.for("v-ndc");function kl(t){return tt(t)?vg(Hh,t,!1)||t:t||yg}function vg(t,e,n=!0,r=!1){const s=St||ct;if(s){const i=s.type;if(t===Hh){const l=ZT(i,!1);if(l&&(l===e||l===Nn(e)||l===Al(Nn(e))))return i}const o=Qf(s[t]||i[t],e)||Qf(s.appContext[t],e);return!o&&r?i:o}}function Qf(t,e){return t&&(t[e]||t[Nn(e)]||t[Al(Nn(e))])}const sT=t=>t.__isSuspense;function iT(t,e){e&&e.pendingBranch?ue(t)?e.effects.push(...t):e.effects.push(t):YE(t)}const oT=Symbol.for("v-scx"),aT=()=>zt(oT);function lT(t,e){return zh(t,null,e)}const aa={};function rn(t,e,n){return zh(t,e,n)}function zh(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:l}=Ge){if(e&&i){const x=e;e=(...Y)=>{x(...Y),L()}}const u=ct,c=x=>r===!0?x:Wr(x,r===!1?1:void 0);let d,a=!1,h=!1;if(Qe(t)?(d=()=>t.value,a=Ba(t)):Er(t)?(d=()=>c(t),a=!0):ue(t)?(h=!0,a=t.some(x=>Er(x)||Ba(x)),d=()=>t.map(x=>{if(Qe(x))return x.value;if(Er(x))return c(x);if(ge(x))return Tr(x,u,2)})):ge(t)?e?d=()=>Tr(t,u,2):d=()=>(f&&f(),nn(t,u,3,[p])):d=tn,e&&r){const x=d;d=()=>Wr(x())}let f,p=x=>{f=I.onStop=()=>{Tr(x,u,4),f=I.onStop=void 0}},_;if(Ml)if(p=tn,e?n&&nn(e,u,3,[d(),h?[]:void 0,p]):d(),s==="sync"){const x=aT();_=x.__watcherHandles||(x.__watcherHandles=[])}else return tn;let m=h?new Array(t.length).fill(aa):aa;const g=()=>{if(!(!I.active||!I.dirty))if(e){const x=I.run();(r||a||(h?x.some((Y,D)=>Pr(Y,m[D])):Pr(x,m)))&&(f&&f(),nn(e,u,3,[x,m===aa?void 0:h&&m[0]===aa?[]:m,p]),m=x)}else I.run()};g.allowRecurse=!!e;let T;s==="sync"?T=g:s==="post"?T=()=>Ft(g,u&&u.suspense):(g.pre=!0,u&&(g.id=u.uid),T=()=>qh(g));const I=new Nh(d,tn,T),S=z_(),L=()=>{I.stop(),S&&Oh(S.effects,I)};return e?n?g():m=I.run():s==="post"?Ft(I.run.bind(I),u&&u.suspense):I.run(),_&&_.push(L),L}function uT(t,e,n){const r=this.proxy,s=tt(t)?t.includes(".")?wg(r,t):()=>r[t]:t.bind(r,r);let i;ge(e)?i=e:(i=e.handler,n=e);const o=Co(this),l=zh(s,i.bind(r),n);return o(),l}function wg(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Wr(t,e,n=0,r){if(!$e(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),Qe(t))Wr(t.value,e,n,r);else if(ue(t))for(let s=0;s<t.length;s++)Wr(t[s],e,n,r);else if(bl(t)||js(t))t.forEach(s=>{Wr(s,e,n,r)});else if(U_(t))for(const s in t)Wr(t[s],e,n,r);return t}function nM(t,e){if(St===null)return t;const n=Ll(St)||St.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,l,u=Ge]=e[s];i&&(ge(i)&&(i={mounted:i,updated:i}),i.deep&&Wr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:u}))}return t}function Fr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const l=s[o];i&&(l.oldValue=i[o].value);let u=l.dir[r];u&&(ms(),nn(u,n,8,[t.el,l,t,e]),_s())}}const cr=Symbol("_leaveCb"),la=Symbol("_enterCb");function cT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Dl(()=>{t.isMounted=!0}),Gh(()=>{t.isUnmounting=!0}),t}const Jt=[Function,Array],Eg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Jt,onEnter:Jt,onAfterEnter:Jt,onEnterCancelled:Jt,onBeforeLeave:Jt,onLeave:Jt,onAfterLeave:Jt,onLeaveCancelled:Jt,onBeforeAppear:Jt,onAppear:Jt,onAfterAppear:Jt,onAppearCancelled:Jt},hT={name:"BaseTransition",props:Eg,setup(t,{slots:e}){const n=Po(),r=cT();let s;return()=>{const i=e.default&&bg(e.default(),!0);if(!i||!i.length)return;let o=i[0];if(i.length>1){for(const _ of i)if(_.type!==hn){o=_;break}}const l=Re(t),{mode:u}=l;if(r.isLeaving)return Uu(o);const c=Xf(o);if(!c)return Uu(o);const d=Ac(c,l,r,n);Sc(c,d);const a=n.subTree,h=a&&Xf(a);let f=!1;const{getTransitionKey:p}=c.type;if(p){const _=p();s===void 0?s=_:_!==s&&(s=_,f=!0)}if(h&&h.type!==hn&&(!Hr(c,h)||f)){const _=Ac(h,l,r,n);if(Sc(h,_),u==="out-in")return r.isLeaving=!0,_.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Uu(o);u==="in-out"&&c.type!==hn&&(_.delayLeave=(m,g,T)=>{const I=Tg(r,h);I[String(h.key)]=h,m[cr]=()=>{g(),m[cr]=void 0,delete d.delayedLeave},d.delayedLeave=T})}return o}}},dT=hT;function Tg(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ac(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:a,onLeave:h,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:_,onAppear:m,onAfterAppear:g,onAppearCancelled:T}=e,I=String(t.key),S=Tg(n,t),L=(D,O)=>{D&&nn(D,r,9,O)},x=(D,O)=>{const X=O[1];L(D,O),ue(D)?D.every(ne=>ne.length<=1)&&X():D.length<=1&&X()},Y={mode:i,persisted:o,beforeEnter(D){let O=l;if(!n.isMounted)if(s)O=_||l;else return;D[cr]&&D[cr](!0);const X=S[I];X&&Hr(t,X)&&X.el[cr]&&X.el[cr](),L(O,[D])},enter(D){let O=u,X=c,ne=d;if(!n.isMounted)if(s)O=m||u,X=g||c,ne=T||d;else return;let H=!1;const le=D[la]=Ee=>{H||(H=!0,Ee?L(ne,[D]):L(X,[D]),Y.delayedLeave&&Y.delayedLeave(),D[la]=void 0)};O?x(O,[D,le]):le()},leave(D,O){const X=String(t.key);if(D[la]&&D[la](!0),n.isUnmounting)return O();L(a,[D]);let ne=!1;const H=D[cr]=le=>{ne||(ne=!0,O(),le?L(p,[D]):L(f,[D]),D[cr]=void 0,S[X]===t&&delete S[X])};S[X]=t,h?x(h,[D,H]):H()},clone(D){return Ac(D,e,n,r)}};return Y}function Uu(t){if(Ol(t))return t=Cr(t),t.children=null,t}function Xf(t){return Ol(t)?t.children?t.children[0]:void 0:t}function Sc(t,e){t.shapeFlag&6&&t.component?Sc(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function bg(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Bt?(o.patchFlag&128&&s++,r=r.concat(bg(o.children,e,l))):(e||o.type!==hn)&&r.push(l!=null?Cr(o,{key:l}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ln(t,e){return ge(t)?at({name:t.name},e,{setup:t}):t}const Ra=t=>!!t.type.__asyncLoader,Ol=t=>t.type.__isKeepAlive;function fT(t,e){Ig(t,"a",e)}function pT(t,e){Ig(t,"da",e)}function Ig(t,e,n=ct){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(xl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Ol(s.parent.vnode)&&mT(r,e,n,s),s=s.parent}}function mT(t,e,n,r){const s=xl(e,t,r,!0);Ag(()=>{Oh(r[e],s)},n)}function xl(t,e,n=ct,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;ms();const l=Co(n),u=nn(e,n,t,o);return l(),_s(),u});return r?s.unshift(i):s.push(i),i}}const Jn=t=>(e,n=ct)=>(!Ml||t==="sp")&&xl(t,(...r)=>e(...r),n),_T=Jn("bm"),Dl=Jn("m"),gT=Jn("bu"),yT=Jn("u"),Gh=Jn("bum"),Ag=Jn("um"),vT=Jn("sp"),wT=Jn("rtg"),ET=Jn("rtc");function TT(t,e=ct){xl("ec",t,e)}function rM(t,e,n,r){let s;const i=n&&n[r];if(ue(t)||tt(t)){s=new Array(t.length);for(let o=0,l=t.length;o<l;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if($e(t))if(t[Symbol.iterator])s=Array.from(t,(o,l)=>e(o,l,void 0,i&&i[l]));else{const o=Object.keys(t);s=new Array(o.length);for(let l=0,u=o.length;l<u;l++){const c=o[l];s[l]=e(t[c],c,l,i&&i[l])}}else s=[];return n&&(n[r]=s),s}const Rc=t=>t?Lg(t)?Ll(t)||t.proxy:Rc(t.parent):null,Li=at(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Rc(t.parent),$root:t=>Rc(t.root),$emit:t=>t.emit,$options:t=>Wh(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,qh(t.update)}),$nextTick:t=>t.n||(t.n=Ut.bind(t.proxy)),$watch:t=>uT.bind(t)}),$u=(t,e)=>t!==Ge&&!t.__isScriptSetup&&Pe(t,e),bT={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:l,appContext:u}=t;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if($u(r,e))return o[e]=1,r[e];if(s!==Ge&&Pe(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Pe(c,e))return o[e]=3,i[e];if(n!==Ge&&Pe(n,e))return o[e]=4,n[e];Pc&&(o[e]=0)}}const d=Li[e];let a,h;if(d)return e==="$attrs"&&Gt(t,"get",e),d(t);if((a=l.__cssModules)&&(a=a[e]))return a;if(n!==Ge&&Pe(n,e))return o[e]=4,n[e];if(h=u.config.globalProperties,Pe(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return $u(s,e)?(s[e]=n,!0):r!==Ge&&Pe(r,e)?(r[e]=n,!0):Pe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let l;return!!n[o]||t!==Ge&&Pe(t,o)||$u(e,o)||(l=i[0])&&Pe(l,o)||Pe(r,o)||Pe(Li,o)||Pe(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Pe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Yf(t){return ue(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Pc=!0;function IT(t){const e=Wh(t),n=t.proxy,r=t.ctx;Pc=!1,e.beforeCreate&&Jf(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:l,provide:u,inject:c,created:d,beforeMount:a,mounted:h,beforeUpdate:f,updated:p,activated:_,deactivated:m,beforeDestroy:g,beforeUnmount:T,destroyed:I,unmounted:S,render:L,renderTracked:x,renderTriggered:Y,errorCaptured:D,serverPrefetch:O,expose:X,inheritAttrs:ne,components:H,directives:le,filters:Ee}=e;if(c&&AT(c,r,null),o)for(const ke in o){const Te=o[ke];ge(Te)&&(r[ke]=Te.bind(n))}if(s){const ke=s.call(n,n);$e(ke)&&(t.data=Kn(ke))}if(Pc=!0,i)for(const ke in i){const Te=i[ke],ft=ge(Te)?Te.bind(n,n):ge(Te.get)?Te.get.bind(n,n):tn,Mt=!ge(Te)&&ge(Te.set)?Te.set.bind(n):tn,kt=me({get:ft,set:Mt});Object.defineProperty(r,ke,{enumerable:!0,configurable:!0,get:()=>kt.value,set:pt=>kt.value=pt})}if(l)for(const ke in l)Sg(l[ke],r,n,ke);if(u){const ke=ge(u)?u.call(n):u;Reflect.ownKeys(ke).forEach(Te=>{Hs(Te,ke[Te])})}d&&Jf(d,t,"c");function J(ke,Te){ue(Te)?Te.forEach(ft=>ke(ft.bind(n))):Te&&ke(Te.bind(n))}if(J(_T,a),J(Dl,h),J(gT,f),J(yT,p),J(fT,_),J(pT,m),J(TT,D),J(ET,x),J(wT,Y),J(Gh,T),J(Ag,S),J(vT,O),ue(X))if(X.length){const ke=t.exposed||(t.exposed={});X.forEach(Te=>{Object.defineProperty(ke,Te,{get:()=>n[Te],set:ft=>n[Te]=ft})})}else t.exposed||(t.exposed={});L&&t.render===tn&&(t.render=L),ne!=null&&(t.inheritAttrs=ne),H&&(t.components=H),le&&(t.directives=le)}function AT(t,e,n=tn){ue(t)&&(t=Cc(t));for(const r in t){const s=t[r];let i;$e(s)?"default"in s?i=zt(s.from||r,s.default,!0):i=zt(s.from||r):i=zt(s),Qe(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Jf(t,e,n){nn(ue(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Sg(t,e,n,r){const s=r.includes(".")?wg(n,r):()=>n[r];if(tt(t)){const i=e[t];ge(i)&&rn(s,i)}else if(ge(t))rn(s,t.bind(n));else if($e(t))if(ue(t))t.forEach(i=>Sg(i,e,n,r));else{const i=ge(t.handler)?t.handler.bind(n):e[t.handler];ge(i)&&rn(s,i,t)}}function Wh(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let u;return l?u=l:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(c=>qa(u,c,o,!0)),qa(u,e,o)),$e(e)&&i.set(e,u),u}function qa(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&qa(t,i,n,!0),s&&s.forEach(o=>qa(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const l=ST[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const ST={data:Zf,props:ep,emits:ep,methods:Pi,computed:Pi,beforeCreate:xt,created:xt,beforeMount:xt,mounted:xt,beforeUpdate:xt,updated:xt,beforeDestroy:xt,beforeUnmount:xt,destroyed:xt,unmounted:xt,activated:xt,deactivated:xt,errorCaptured:xt,serverPrefetch:xt,components:Pi,directives:Pi,watch:PT,provide:Zf,inject:RT};function Zf(t,e){return e?t?function(){return at(ge(t)?t.call(this,this):t,ge(e)?e.call(this,this):e)}:e:t}function RT(t,e){return Pi(Cc(t),Cc(e))}function Cc(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function xt(t,e){return t?[...new Set([].concat(t,e))]:e}function Pi(t,e){return t?at(Object.create(null),t,e):e}function ep(t,e){return t?ue(t)&&ue(e)?[...new Set([...t,...e])]:at(Object.create(null),Yf(t),Yf(e??{})):e}function PT(t,e){if(!t)return e;if(!e)return t;const n=at(Object.create(null),t);for(const r in e)n[r]=xt(t[r],e[r]);return n}function Rg(){return{app:null,config:{isNativeTag:oE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let CT=0;function kT(t,e){return function(r,s=null){ge(r)||(r=at({},r)),s!=null&&!$e(s)&&(s=null);const i=Rg(),o=new WeakSet;let l=!1;const u=i.app={_uid:CT++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:tb,get config(){return i.config},set config(c){},use(c,...d){return o.has(c)||(c&&ge(c.install)?(o.add(c),c.install(u,...d)):ge(c)&&(o.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,a){if(!l){const h=we(r,s);return h.appContext=i,a===!0?a="svg":a===!1&&(a=void 0),d&&e?e(h,c):t(h,c,a),l=!0,u._container=c,c.__vue_app__=u,Ll(h.component)||h.component.proxy}},unmount(){l&&(t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){ro=u;try{return c()}finally{ro=null}}};return u}}let ro=null;function Hs(t,e){if(ct){let n=ct.provides;const r=ct.parent&&ct.parent.provides;r===n&&(n=ct.provides=Object.create(r)),n[t]=e}}function zt(t,e,n=!1){const r=ct||St;if(r||ro){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:ro._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&ge(e)?e.call(r&&r.proxy):e}}function OT(){return!!(ct||St||ro)}function xT(t,e,n,r=!1){const s={},i={};Ua(i,Vl,1),t.propsDefaults=Object.create(null),Pg(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:sg(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function DT(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,l=Re(s),[u]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let a=0;a<d.length;a++){let h=d[a];if(Cl(t.emitsOptions,h))continue;const f=e[h];if(u)if(Pe(i,h))f!==i[h]&&(i[h]=f,c=!0);else{const p=Nn(h);s[p]=kc(u,l,p,f,t,!1)}else f!==i[h]&&(i[h]=f,c=!0)}}}else{Pg(t,e,s,i)&&(c=!0);let d;for(const a in l)(!e||!Pe(e,a)&&((d=hi(a))===a||!Pe(e,d)))&&(u?n&&(n[a]!==void 0||n[d]!==void 0)&&(s[a]=kc(u,l,a,void 0,t,!0)):delete s[a]);if(i!==l)for(const a in i)(!e||!Pe(e,a))&&(delete i[a],c=!0)}c&&Gn(t,"set","$attrs")}function Pg(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,l;if(e)for(let u in e){if(Ia(u))continue;const c=e[u];let d;s&&Pe(s,d=Nn(u))?!i||!i.includes(d)?n[d]=c:(l||(l={}))[d]=c:Cl(t.emitsOptions,u)||(!(u in r)||c!==r[u])&&(r[u]=c,o=!0)}if(i){const u=Re(n),c=l||Ge;for(let d=0;d<i.length;d++){const a=i[d];n[a]=kc(s,u,a,c[a],t,!Pe(c,a))}}return o}function kc(t,e,n,r,s,i){const o=t[n];if(o!=null){const l=Pe(o,"default");if(l&&r===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&ge(u)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const d=Co(s);r=c[n]=u.call(null,e),d()}}else r=u}o[0]&&(i&&!l?r=!1:o[1]&&(r===""||r===hi(n))&&(r=!0))}return r}function Cg(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},l=[];let u=!1;if(!ge(t)){const d=a=>{u=!0;const[h,f]=Cg(a,e,!0);at(o,h),f&&l.push(...f)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return $e(t)&&r.set(t,Bs),Bs;if(ue(i))for(let d=0;d<i.length;d++){const a=Nn(i[d]);tp(a)&&(o[a]=Ge)}else if(i)for(const d in i){const a=Nn(d);if(tp(a)){const h=i[d],f=o[a]=ue(h)||ge(h)?{type:h}:at({},h);if(f){const p=sp(Boolean,f.type),_=sp(String,f.type);f[0]=p>-1,f[1]=_<0||p<_,(p>-1||Pe(f,"default"))&&l.push(a)}}}const c=[o,l];return $e(t)&&r.set(t,c),c}function tp(t){return t[0]!=="$"}function np(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function rp(t,e){return np(t)===np(e)}function sp(t,e){return ue(e)?e.findIndex(n=>rp(n,t)):ge(e)&&rp(e,t)?0:-1}const kg=t=>t[0]==="_"||t==="$stable",Kh=t=>ue(t)?t.map(En):[En(t)],NT=(t,e,n)=>{if(e._n)return e;const r=ns((...s)=>Kh(e(...s)),n);return r._c=!1,r},Og=(t,e,n)=>{const r=t._ctx;for(const s in t){if(kg(s))continue;const i=t[s];if(ge(i))e[s]=NT(s,i,r);else if(i!=null){const o=Kh(i);e[s]=()=>o}}},xg=(t,e)=>{const n=Kh(e);t.slots.default=()=>n},VT=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Re(e),Ua(e,"_",n)):Og(e,t.slots={})}else t.slots={},e&&xg(t,e);Ua(t.slots,Vl,1)},MT=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=Ge;if(r.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:(at(s,e),!n&&l===1&&delete s._):(i=!e.$stable,Og(e,s)),o=e}else e&&(xg(t,e),o={default:1});if(i)for(const l in s)!kg(l)&&o[l]==null&&delete s[l]};function Oc(t,e,n,r,s=!1){if(ue(t)){t.forEach((h,f)=>Oc(h,e&&(ue(e)?e[f]:e),n,r,s));return}if(Ra(r)&&!s)return;const i=r.shapeFlag&4?Ll(r.component)||r.component.proxy:r.el,o=s?null:i,{i:l,r:u}=t,c=e&&e.r,d=l.refs===Ge?l.refs={}:l.refs,a=l.setupState;if(c!=null&&c!==u&&(tt(c)?(d[c]=null,Pe(a,c)&&(a[c]=null)):Qe(c)&&(c.value=null)),ge(u))Tr(u,l,12,[o,d]);else{const h=tt(u),f=Qe(u),p=t.f;if(h||f){const _=()=>{if(p){const m=h?Pe(a,u)?a[u]:d[u]:u.value;s?ue(m)&&Oh(m,i):ue(m)?m.includes(i)||m.push(i):h?(d[u]=[i],Pe(a,u)&&(a[u]=d[u])):(u.value=[i],t.k&&(d[t.k]=u.value))}else h?(d[u]=o,Pe(a,u)&&(a[u]=o)):f&&(u.value=o,t.k&&(d[t.k]=o))};s||p?_():(_.id=-1,Ft(_,n))}}}const Ft=iT;function LT(t){return FT(t)}function FT(t,e){const n=$_();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:l,createComment:u,setText:c,setElementText:d,parentNode:a,nextSibling:h,setScopeId:f=tn,insertStaticContent:p}=t,_=(y,v,b,k=null,P=null,F=null,B=void 0,U=null,j=!!v.dynamicChildren)=>{if(y===v)return;y&&!Hr(y,v)&&(k=A(y),pt(y,P,F,!0),y=null),v.patchFlag===-2&&(j=!1,v.dynamicChildren=null);const{type:V,ref:Q,shapeFlag:ae}=v;switch(V){case Nl:m(y,v,b,k);break;case hn:g(y,v,b,k);break;case Pa:y==null&&T(v,b,k,B);break;case Bt:H(y,v,b,k,P,F,B,U,j);break;default:ae&1?L(y,v,b,k,P,F,B,U,j):ae&6?le(y,v,b,k,P,F,B,U,j):(ae&64||ae&128)&&V.process(y,v,b,k,P,F,B,U,j,K)}Q!=null&&P&&Oc(Q,y&&y.ref,F,v||y,!v)},m=(y,v,b,k)=>{if(y==null)r(v.el=l(v.children),b,k);else{const P=v.el=y.el;v.children!==y.children&&c(P,v.children)}},g=(y,v,b,k)=>{y==null?r(v.el=u(v.children||""),b,k):v.el=y.el},T=(y,v,b,k)=>{[y.el,y.anchor]=p(y.children,v,b,k,y.el,y.anchor)},I=({el:y,anchor:v},b,k)=>{let P;for(;y&&y!==v;)P=h(y),r(y,b,k),y=P;r(v,b,k)},S=({el:y,anchor:v})=>{let b;for(;y&&y!==v;)b=h(y),s(y),y=b;s(v)},L=(y,v,b,k,P,F,B,U,j)=>{v.type==="svg"?B="svg":v.type==="math"&&(B="mathml"),y==null?x(v,b,k,P,F,B,U,j):O(y,v,P,F,B,U,j)},x=(y,v,b,k,P,F,B,U)=>{let j,V;const{props:Q,shapeFlag:ae,transition:re,dirs:he}=y;if(j=y.el=o(y.type,F,Q&&Q.is,Q),ae&8?d(j,y.children):ae&16&&D(y.children,j,null,k,P,Bu(y,F),B,U),he&&Fr(y,null,k,"created"),Y(j,y,y.scopeId,B,k),Q){for(const Me in Q)Me!=="value"&&!Ia(Me)&&i(j,Me,null,Q[Me],F,y.children,k,P,se);"value"in Q&&i(j,"value",null,Q.value,F),(V=Q.onVnodeBeforeMount)&&vn(V,k,y)}he&&Fr(y,null,k,"beforeMount");const be=UT(P,re);be&&re.beforeEnter(j),r(j,v,b),((V=Q&&Q.onVnodeMounted)||be||he)&&Ft(()=>{V&&vn(V,k,y),be&&re.enter(j),he&&Fr(y,null,k,"mounted")},P)},Y=(y,v,b,k,P)=>{if(b&&f(y,b),k)for(let F=0;F<k.length;F++)f(y,k[F]);if(P){let F=P.subTree;if(v===F){const B=P.vnode;Y(y,B,B.scopeId,B.slotScopeIds,P.parent)}}},D=(y,v,b,k,P,F,B,U,j=0)=>{for(let V=j;V<y.length;V++){const Q=y[V]=U?hr(y[V]):En(y[V]);_(null,Q,v,b,k,P,F,B,U)}},O=(y,v,b,k,P,F,B)=>{const U=v.el=y.el;let{patchFlag:j,dynamicChildren:V,dirs:Q}=v;j|=y.patchFlag&16;const ae=y.props||Ge,re=v.props||Ge;let he;if(b&&Ur(b,!1),(he=re.onVnodeBeforeUpdate)&&vn(he,b,v,y),Q&&Fr(v,y,b,"beforeUpdate"),b&&Ur(b,!0),V?X(y.dynamicChildren,V,U,b,k,Bu(v,P),F):B||Te(y,v,U,null,b,k,Bu(v,P),F,!1),j>0){if(j&16)ne(U,v,ae,re,b,k,P);else if(j&2&&ae.class!==re.class&&i(U,"class",null,re.class,P),j&4&&i(U,"style",ae.style,re.style,P),j&8){const be=v.dynamicProps;for(let Me=0;Me<be.length;Me++){const w=be[Me],E=ae[w],C=re[w];(C!==E||w==="value")&&i(U,w,E,C,P,y.children,b,k,se)}}j&1&&y.children!==v.children&&d(U,v.children)}else!B&&V==null&&ne(U,v,ae,re,b,k,P);((he=re.onVnodeUpdated)||Q)&&Ft(()=>{he&&vn(he,b,v,y),Q&&Fr(v,y,b,"updated")},k)},X=(y,v,b,k,P,F,B)=>{for(let U=0;U<v.length;U++){const j=y[U],V=v[U],Q=j.el&&(j.type===Bt||!Hr(j,V)||j.shapeFlag&70)?a(j.el):b;_(j,V,Q,null,k,P,F,B,!0)}},ne=(y,v,b,k,P,F,B)=>{if(b!==k){if(b!==Ge)for(const U in b)!Ia(U)&&!(U in k)&&i(y,U,b[U],null,B,v.children,P,F,se);for(const U in k){if(Ia(U))continue;const j=k[U],V=b[U];j!==V&&U!=="value"&&i(y,U,V,j,B,v.children,P,F,se)}"value"in k&&i(y,"value",b.value,k.value,B)}},H=(y,v,b,k,P,F,B,U,j)=>{const V=v.el=y?y.el:l(""),Q=v.anchor=y?y.anchor:l("");let{patchFlag:ae,dynamicChildren:re,slotScopeIds:he}=v;he&&(U=U?U.concat(he):he),y==null?(r(V,b,k),r(Q,b,k),D(v.children||[],b,Q,P,F,B,U,j)):ae>0&&ae&64&&re&&y.dynamicChildren?(X(y.dynamicChildren,re,b,P,F,B,U),(v.key!=null||P&&v===P.subTree)&&Dg(y,v,!0)):Te(y,v,b,Q,P,F,B,U,j)},le=(y,v,b,k,P,F,B,U,j)=>{v.slotScopeIds=U,y==null?v.shapeFlag&512?P.ctx.activate(v,b,k,B,j):Ee(v,b,k,P,F,B,j):Ce(y,v,j)},Ee=(y,v,b,k,P,F,B)=>{const U=y.component=KT(y,k,P);if(Ol(y)&&(U.ctx.renderer=K),QT(U),U.asyncDep){if(P&&P.registerDep(U,J),!y.el){const j=U.subTree=we(hn);g(null,j,v,b)}}else J(U,y,v,b,P,F,B)},Ce=(y,v,b)=>{const k=v.component=y.component;if(nT(y,v,b))if(k.asyncDep&&!k.asyncResolved){ke(k,v,b);return}else k.next=v,XE(k.update),k.effect.dirty=!0,k.update();else v.el=y.el,k.vnode=v},J=(y,v,b,k,P,F,B)=>{const U=()=>{if(y.isMounted){let{next:Q,bu:ae,u:re,parent:he,vnode:be}=y;{const z=Ng(y);if(z){Q&&(Q.el=be.el,ke(y,Q,B)),z.asyncDep.then(()=>{y.isUnmounted||U()});return}}let Me=Q,w;Ur(y,!1),Q?(Q.el=be.el,ke(y,Q,B)):Q=be,ae&&Aa(ae),(w=Q.props&&Q.props.onVnodeBeforeUpdate)&&vn(w,he,Q,be),Ur(y,!0);const E=Fu(y),C=y.subTree;y.subTree=E,_(C,E,a(C.el),A(C),y,P,F),Q.el=E.el,Me===null&&rT(y,E.el),re&&Ft(re,P),(w=Q.props&&Q.props.onVnodeUpdated)&&Ft(()=>vn(w,he,Q,be),P)}else{let Q;const{el:ae,props:re}=v,{bm:he,m:be,parent:Me}=y,w=Ra(v);if(Ur(y,!1),he&&Aa(he),!w&&(Q=re&&re.onVnodeBeforeMount)&&vn(Q,Me,v),Ur(y,!0),ae&&Be){const E=()=>{y.subTree=Fu(y),Be(ae,y.subTree,y,P,null)};w?v.type.__asyncLoader().then(()=>!y.isUnmounted&&E()):E()}else{const E=y.subTree=Fu(y);_(null,E,b,k,y,P,F),v.el=E.el}if(be&&Ft(be,P),!w&&(Q=re&&re.onVnodeMounted)){const E=v;Ft(()=>vn(Q,Me,E),P)}(v.shapeFlag&256||Me&&Ra(Me.vnode)&&Me.vnode.shapeFlag&256)&&y.a&&Ft(y.a,P),y.isMounted=!0,v=b=k=null}},j=y.effect=new Nh(U,tn,()=>qh(V),y.scope),V=y.update=()=>{j.dirty&&j.run()};V.id=y.uid,Ur(y,!0),V()},ke=(y,v,b)=>{v.component=y;const k=y.vnode.props;y.vnode=v,y.next=null,DT(y,v.props,k,b),MT(y,v.children,b),ms(),Wf(y),_s()},Te=(y,v,b,k,P,F,B,U,j=!1)=>{const V=y&&y.children,Q=y?y.shapeFlag:0,ae=v.children,{patchFlag:re,shapeFlag:he}=v;if(re>0){if(re&128){Mt(V,ae,b,k,P,F,B,U,j);return}else if(re&256){ft(V,ae,b,k,P,F,B,U,j);return}}he&8?(Q&16&&se(V,P,F),ae!==V&&d(b,ae)):Q&16?he&16?Mt(V,ae,b,k,P,F,B,U,j):se(V,P,F,!0):(Q&8&&d(b,""),he&16&&D(ae,b,k,P,F,B,U,j))},ft=(y,v,b,k,P,F,B,U,j)=>{y=y||Bs,v=v||Bs;const V=y.length,Q=v.length,ae=Math.min(V,Q);let re;for(re=0;re<ae;re++){const he=v[re]=j?hr(v[re]):En(v[re]);_(y[re],he,b,null,P,F,B,U,j)}V>Q?se(y,P,F,!0,!1,ae):D(v,b,k,P,F,B,U,j,ae)},Mt=(y,v,b,k,P,F,B,U,j)=>{let V=0;const Q=v.length;let ae=y.length-1,re=Q-1;for(;V<=ae&&V<=re;){const he=y[V],be=v[V]=j?hr(v[V]):En(v[V]);if(Hr(he,be))_(he,be,b,null,P,F,B,U,j);else break;V++}for(;V<=ae&&V<=re;){const he=y[ae],be=v[re]=j?hr(v[re]):En(v[re]);if(Hr(he,be))_(he,be,b,null,P,F,B,U,j);else break;ae--,re--}if(V>ae){if(V<=re){const he=re+1,be=he<Q?v[he].el:k;for(;V<=re;)_(null,v[V]=j?hr(v[V]):En(v[V]),b,be,P,F,B,U,j),V++}}else if(V>re)for(;V<=ae;)pt(y[V],P,F,!0),V++;else{const he=V,be=V,Me=new Map;for(V=be;V<=re;V++){const Le=v[V]=j?hr(v[V]):En(v[V]);Le.key!=null&&Me.set(Le.key,V)}let w,E=0;const C=re-be+1;let z=!1,ce=0;const ie=new Array(C);for(V=0;V<C;V++)ie[V]=0;for(V=he;V<=ae;V++){const Le=y[V];if(E>=C){pt(Le,P,F,!0);continue}let xe;if(Le.key!=null)xe=Me.get(Le.key);else for(w=be;w<=re;w++)if(ie[w-be]===0&&Hr(Le,v[w])){xe=w;break}xe===void 0?pt(Le,P,F,!0):(ie[xe-be]=V+1,xe>=ce?ce=xe:z=!0,_(Le,v[xe],b,null,P,F,B,U,j),E++)}const Oe=z?$T(ie):Bs;for(w=Oe.length-1,V=C-1;V>=0;V--){const Le=be+V,xe=v[Le],lt=Le+1<Q?v[Le+1].el:k;ie[V]===0?_(null,xe,b,lt,P,F,B,U,j):z&&(w<0||V!==Oe[w]?kt(xe,b,lt,2):w--)}}},kt=(y,v,b,k,P=null)=>{const{el:F,type:B,transition:U,children:j,shapeFlag:V}=y;if(V&6){kt(y.component.subTree,v,b,k);return}if(V&128){y.suspense.move(v,b,k);return}if(V&64){B.move(y,v,b,K);return}if(B===Bt){r(F,v,b);for(let ae=0;ae<j.length;ae++)kt(j[ae],v,b,k);r(y.anchor,v,b);return}if(B===Pa){I(y,v,b);return}if(k!==2&&V&1&&U)if(k===0)U.beforeEnter(F),r(F,v,b),Ft(()=>U.enter(F),P);else{const{leave:ae,delayLeave:re,afterLeave:he}=U,be=()=>r(F,v,b),Me=()=>{ae(F,()=>{be(),he&&he()})};re?re(F,be,Me):Me()}else r(F,v,b)},pt=(y,v,b,k=!1,P=!1)=>{const{type:F,props:B,ref:U,children:j,dynamicChildren:V,shapeFlag:Q,patchFlag:ae,dirs:re}=y;if(U!=null&&Oc(U,null,b,y,!0),Q&256){v.ctx.deactivate(y);return}const he=Q&1&&re,be=!Ra(y);let Me;if(be&&(Me=B&&B.onVnodeBeforeUnmount)&&vn(Me,v,y),Q&6)Z(y.component,b,k);else{if(Q&128){y.suspense.unmount(b,k);return}he&&Fr(y,null,v,"beforeUnmount"),Q&64?y.type.remove(y,v,b,P,K,k):V&&(F!==Bt||ae>0&&ae&64)?se(V,v,b,!1,!0):(F===Bt&&ae&384||!P&&Q&16)&&se(j,v,b),k&&Ze(y)}(be&&(Me=B&&B.onVnodeUnmounted)||he)&&Ft(()=>{Me&&vn(Me,v,y),he&&Fr(y,null,v,"unmounted")},b)},Ze=y=>{const{type:v,el:b,anchor:k,transition:P}=y;if(v===Bt){yn(b,k);return}if(v===Pa){S(y);return}const F=()=>{s(b),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(y.shapeFlag&1&&P&&!P.persisted){const{leave:B,delayLeave:U}=P,j=()=>B(b,F);U?U(y.el,F,j):j()}else F()},yn=(y,v)=>{let b;for(;y!==v;)b=h(y),s(y),y=b;s(v)},Z=(y,v,b)=>{const{bum:k,scope:P,update:F,subTree:B,um:U}=y;k&&Aa(k),P.stop(),F&&(F.active=!1,pt(B,y,v,b)),U&&Ft(U,v),Ft(()=>{y.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&y.asyncDep&&!y.asyncResolved&&y.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},se=(y,v,b,k=!1,P=!1,F=0)=>{for(let B=F;B<y.length;B++)pt(y[B],v,b,k,P)},A=y=>y.shapeFlag&6?A(y.component.subTree):y.shapeFlag&128?y.suspense.next():h(y.anchor||y.el);let M=!1;const $=(y,v,b)=>{y==null?v._vnode&&pt(v._vnode,null,null,!0):_(v._vnode||null,y,v,null,null,null,b),M||(M=!0,Wf(),pg(),M=!1),v._vnode=y},K={p:_,um:pt,m:kt,r:Ze,mt:Ee,mc:D,pc:Te,pbc:X,n:A,o:t};let ye,Be;return e&&([ye,Be]=e(K)),{render:$,hydrate:ye,createApp:kT($,ye)}}function Bu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ur({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function UT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Dg(t,e,n=!1){const r=t.children,s=e.children;if(ue(r)&&ue(s))for(let i=0;i<r.length;i++){const o=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=hr(s[i]),l.el=o.el),n||Dg(o,l)),l.type===Nl&&(l.el=o.el)}}function $T(t){const e=t.slice(),n=[0];let r,s,i,o,l;const u=t.length;for(r=0;r<u;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<c?i=l+1:o=l;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Ng(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ng(e)}const BT=t=>t.__isTeleport,Bt=Symbol.for("v-fgt"),Nl=Symbol.for("v-txt"),hn=Symbol.for("v-cmt"),Pa=Symbol.for("v-stc"),Fi=[];let ln=null;function Xt(t=!1){Fi.push(ln=t?null:[])}function jT(){Fi.pop(),ln=Fi[Fi.length-1]||null}let so=1;function ip(t){so+=t}function Vg(t){return t.dynamicChildren=so>0?ln||Bs:null,jT(),so>0&&ln&&ln.push(t),t}function Rn(t,e,n,r,s,i){return Vg(ee(t,e,n,r,s,i,!0))}function Qh(t,e,n,r,s){return Vg(we(t,e,n,r,s,!0))}function xc(t){return t?t.__v_isVNode===!0:!1}function Hr(t,e){return t.type===e.type&&t.key===e.key}const Vl="__vInternal",Mg=({key:t})=>t??null,Ca=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?tt(t)||Qe(t)||ge(t)?{i:St,r:t,k:e,f:!!n}:t:null);function ee(t,e=null,n=null,r=0,s=null,i=t===Bt?0:1,o=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Mg(e),ref:e&&Ca(e),scopeId:gg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:St};return l?(Yh(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=tt(n)?8:16),so>0&&!o&&ln&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&ln.push(u),u}const we=qT;function qT(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===yg)&&(t=hn),xc(t)){const l=Cr(t,e,!0);return n&&Yh(l,n),so>0&&!i&&ln&&(l.shapeFlag&6?ln[ln.indexOf(t)]=l:ln.push(l)),l.patchFlag|=-2,l}if(eb(t)&&(t=t.__vccOpts),e){e=HT(e);let{class:l,style:u}=e;l&&!tt(l)&&(e.class=cn(l)),$e(u)&&(ig(u)&&!ue(u)&&(u=at({},u)),e.style=Yi(u))}const o=tt(t)?1:sT(t)?128:BT(t)?64:$e(t)?4:ge(t)?2:0;return ee(t,e,n,r,s,o,i,!0)}function HT(t){return t?ig(t)||Vl in t?at({},t):t:null}function Cr(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,l=e?zT(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Mg(l),ref:e&&e.ref?n&&s?ue(s)?s.concat(Ca(e)):[s,Ca(e)]:Ca(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Bt?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Cr(t.ssContent),ssFallback:t.ssFallback&&Cr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ui(t=" ",e=0){return we(Nl,null,t,e)}function sM(t,e){const n=we(Pa,null,t);return n.staticCount=e,n}function Xh(t="",e=!1){return e?(Xt(),Qh(hn,null,t)):we(hn,null,t)}function En(t){return t==null||typeof t=="boolean"?we(hn):ue(t)?we(Bt,null,t.slice()):typeof t=="object"?hr(t):we(Nl,null,String(t))}function hr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Cr(t)}function Yh(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ue(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Yh(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Vl in e)?e._ctx=St:s===3&&St&&(St.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else ge(e)?(e={default:e,_ctx:St},n=32):(e=String(e),r&64?(n=16,e=[Ui(e)]):n=8);t.children=e,t.shapeFlag|=n}function zT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=cn([e.class,r.class]));else if(s==="style")e.style=Yi([e.style,r.style]);else if(Tl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ue(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function vn(t,e,n,r=null){nn(t,e,7,[n,r])}const GT=Rg();let WT=0;function KT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||GT,i={uid:WT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new q_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cg(r,s),emitsOptions:_g(r,s),emit:null,emitted:null,propsDefaults:Ge,inheritAttrs:r.inheritAttrs,ctx:Ge,data:Ge,props:Ge,attrs:Ge,slots:Ge,refs:Ge,setupState:Ge,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=ZE.bind(null,i),t.ce&&t.ce(i),i}let ct=null;const Po=()=>ct||St;let Ha,Dc;{const t=$_(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Ha=e("__VUE_INSTANCE_SETTERS__",n=>ct=n),Dc=e("__VUE_SSR_SETTERS__",n=>Ml=n)}const Co=t=>{const e=ct;return Ha(t),t.scope.on(),()=>{t.scope.off(),Ha(e)}},op=()=>{ct&&ct.scope.off(),Ha(null)};function Lg(t){return t.vnode.shapeFlag&4}let Ml=!1;function QT(t,e=!1){e&&Dc(e);const{props:n,children:r}=t.vnode,s=Lg(t);xT(t,n,s,e),VT(t,r);const i=s?XT(t,e):void 0;return e&&Dc(!1),i}function XT(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Rl(new Proxy(t.ctx,bT));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?JT(t):null,i=Co(t);ms();const o=Tr(r,t,0,[t.props,s]);if(_s(),i(),L_(o)){if(o.then(op,op),e)return o.then(l=>{ap(t,l,e)}).catch(l=>{Pl(l,t,0)});t.asyncDep=o}else ap(t,o,e)}else Fg(t,e)}function ap(t,e,n){ge(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:$e(e)&&(t.setupState=cg(e)),Fg(t,n)}let lp;function Fg(t,e,n){const r=t.type;if(!t.render){if(!e&&lp&&!r.render){const s=r.template||Wh(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:l,compilerOptions:u}=r,c=at(at({isCustomElement:i,delimiters:l},o),u);r.render=lp(s,c)}}t.render=r.render||tn}{const s=Co(t);ms();try{IT(t)}finally{_s(),s()}}}function YT(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return Gt(t,"get","$attrs"),e[n]}}))}function JT(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return YT(t)},slots:t.slots,emit:t.emit,expose:e}}function Ll(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(cg(Rl(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Li)return Li[n](t)},has(e,n){return n in e||n in Li}}))}function ZT(t,e=!0){return ge(t)?t.displayName||t.name:t.name||e&&t.__name}function eb(t){return ge(t)&&"__vccOpts"in t}const me=(t,e)=>jE(t,e,Ml);function Js(t,e,n){const r=arguments.length;return r===2?$e(e)&&!ue(e)?xc(e)?we(t,null,[e]):we(t,e):we(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&xc(n)&&(n=[n]),we(t,e,n))}const tb="3.4.15";/**
* @vue/runtime-dom v3.4.15
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const nb="http://www.w3.org/2000/svg",rb="http://www.w3.org/1998/Math/MathML",dr=typeof document<"u"?document:null,up=dr&&dr.createElement("template"),sb={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?dr.createElementNS(nb,t):e==="mathml"?dr.createElementNS(rb,t):dr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>dr.createTextNode(t),createComment:t=>dr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>dr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{up.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const l=up.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},nr="transition",Ei="animation",io=Symbol("_vtc"),Jh=(t,{slots:e})=>Js(dT,ib(t),e);Jh.displayName="Transition";const Ug={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Jh.props=at({},Eg,Ug);const $r=(t,e=[])=>{ue(t)?t.forEach(n=>n(...e)):t&&t(...e)},cp=t=>t?ue(t)?t.some(e=>e.length>1):t.length>1:!1;function ib(t){const e={};for(const H in t)H in Ug||(e[H]=t[H]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:u=i,appearActiveClass:c=o,appearToClass:d=l,leaveFromClass:a=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,p=ob(s),_=p&&p[0],m=p&&p[1],{onBeforeEnter:g,onEnter:T,onEnterCancelled:I,onLeave:S,onLeaveCancelled:L,onBeforeAppear:x=g,onAppear:Y=T,onAppearCancelled:D=I}=e,O=(H,le,Ee)=>{Br(H,le?d:l),Br(H,le?c:o),Ee&&Ee()},X=(H,le)=>{H._isLeaving=!1,Br(H,a),Br(H,f),Br(H,h),le&&le()},ne=H=>(le,Ee)=>{const Ce=H?Y:T,J=()=>O(le,H,Ee);$r(Ce,[le,J]),hp(()=>{Br(le,H?u:i),rr(le,H?d:l),cp(Ce)||dp(le,r,_,J)})};return at(e,{onBeforeEnter(H){$r(g,[H]),rr(H,i),rr(H,o)},onBeforeAppear(H){$r(x,[H]),rr(H,u),rr(H,c)},onEnter:ne(!1),onAppear:ne(!0),onLeave(H,le){H._isLeaving=!0;const Ee=()=>X(H,le);rr(H,a),ub(),rr(H,h),hp(()=>{H._isLeaving&&(Br(H,a),rr(H,f),cp(S)||dp(H,r,m,Ee))}),$r(S,[H,Ee])},onEnterCancelled(H){O(H,!1),$r(I,[H])},onAppearCancelled(H){O(H,!0),$r(D,[H])},onLeaveCancelled(H){X(H),$r(L,[H])}})}function ob(t){if(t==null)return null;if($e(t))return[ju(t.enter),ju(t.leave)];{const e=ju(t);return[e,e]}}function ju(t){return hE(t)}function rr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[io]||(t[io]=new Set)).add(e)}function Br(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[io];n&&(n.delete(e),n.size||(t[io]=void 0))}function hp(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let ab=0;function dp(t,e,n,r){const s=t._endId=++ab,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:l,propCount:u}=lb(t,e);if(!o)return r();const c=o+"end";let d=0;const a=()=>{t.removeEventListener(c,h),i()},h=f=>{f.target===t&&++d>=u&&a()};setTimeout(()=>{d<u&&a()},l+1),t.addEventListener(c,h)}function lb(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),s=r(`${nr}Delay`),i=r(`${nr}Duration`),o=fp(s,i),l=r(`${Ei}Delay`),u=r(`${Ei}Duration`),c=fp(l,u);let d=null,a=0,h=0;e===nr?o>0&&(d=nr,a=o,h=i.length):e===Ei?c>0&&(d=Ei,a=c,h=u.length):(a=Math.max(o,c),d=a>0?o>c?nr:Ei:null,h=d?d===nr?i.length:u.length:0);const f=d===nr&&/\b(transform|all)(,|$)/.test(r(`${nr}Property`).toString());return{type:d,timeout:a,propCount:h,hasTransform:f}}function fp(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>pp(n)+pp(t[r])))}function pp(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function ub(){return document.body.offsetHeight}function cb(t,e,n){const r=t[io];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Zh=Symbol("_vod"),iM={beforeMount(t,{value:e},{transition:n}){t[Zh]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ti(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ti(t,!0),r.enter(t)):r.leave(t,()=>{Ti(t,!1)}):Ti(t,e))},beforeUnmount(t,{value:e}){Ti(t,e)}};function Ti(t,e){t.style.display=e?t[Zh]:"none"}const hb=Symbol("");function db(t,e,n){const r=t.style,s=r.display,i=tt(n);if(n&&!i){if(e&&!tt(e))for(const o in e)n[o]==null&&Nc(r,o,"");for(const o in n)Nc(r,o,n[o])}else if(i){if(e!==n){const o=r[hb];o&&(n+=";"+o),r.cssText=n}}else e&&t.removeAttribute("style");Zh in t&&(r.display=s)}const mp=/\s*!important$/;function Nc(t,e,n){if(ue(n))n.forEach(r=>Nc(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=fb(t,e);mp.test(n)?t.setProperty(hi(r),n.replace(mp,""),"important"):t[r]=n}}const _p=["Webkit","Moz","ms"],qu={};function fb(t,e){const n=qu[e];if(n)return n;let r=Nn(e);if(r!=="filter"&&r in t)return qu[e]=r;r=Al(r);for(let s=0;s<_p.length;s++){const i=_p[s]+r;if(i in t)return qu[e]=i}return e}const gp="http://www.w3.org/1999/xlink";function pb(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(gp,e.slice(6,e.length)):t.setAttributeNS(gp,e,n);else{const i=gE(e);n==null||i&&!B_(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function mb(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const l=t.tagName;if(e==="value"&&l!=="PROGRESS"&&!l.includes("-")){t._value=n;const c=l==="OPTION"?t.getAttribute("value"):t.value,d=n??"";c!==d&&(t.value=d),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=B_(n):n==null&&c==="string"?(n="",u=!0):c==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function $g(t,e,n,r){t.addEventListener(e,n,r)}function _b(t,e,n,r){t.removeEventListener(e,n,r)}const yp=Symbol("_vei");function gb(t,e,n,r,s=null){const i=t[yp]||(t[yp]={}),o=i[e];if(r&&o)o.value=r;else{const[l,u]=yb(e);if(r){const c=i[e]=Eb(r,s);$g(t,l,c,u)}else o&&(_b(t,l,o,u),i[e]=void 0)}}const vp=/(?:Once|Passive|Capture)$/;function yb(t){let e;if(vp.test(t)){e={};let r;for(;r=t.match(vp);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hi(t.slice(2)),e]}let Hu=0;const vb=Promise.resolve(),wb=()=>Hu||(vb.then(()=>Hu=0),Hu=Date.now());function Eb(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;nn(Tb(r,n.value),e,5,[r])};return n.value=t,n.attached=wb(),n}function Tb(t,e){if(ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const wp=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,bb=(t,e,n,r,s,i,o,l,u)=>{const c=s==="svg";e==="class"?cb(t,r,c):e==="style"?db(t,n,r):Tl(e)?kh(e)||gb(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Ib(t,e,r,c))?mb(t,e,r,i,o,l,u):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),pb(t,e,r,c))};function Ib(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&wp(e)&&ge(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return wp(e)&&tt(n)?!1:e in t}const Ep=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ue(e)?n=>Aa(e,n):e},zu=Symbol("_assign"),oM={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=bl(e);$g(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Dh(za(o)):za(o));t[zu](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,Ut(()=>{t._assigning=!1})}),t[zu]=Ep(r)},mounted(t,{value:e,oldValue:n,modifiers:{number:r}}){Tp(t,e,n,r)},beforeUpdate(t,e,n){t[zu]=Ep(n)},updated(t,{value:e,oldValue:n,modifiers:{number:r}}){t._assigning||Tp(t,e,n,r)}};function Tp(t,e,n,r){const s=t.multiple,i=ue(e);if(!(s&&!i&&!bl(e))&&!(i&&Ji(e,n))){for(let o=0,l=t.options.length;o<l;o++){const u=t.options[o],c=za(u);if(s)if(i){const d=typeof c;d==="string"||d==="number"?u.selected=e.includes(r?Dh(c):c):u.selected=vE(e,c)>-1}else u.selected=e.has(c);else if(Ji(za(u),e)){t.selectedIndex!==o&&(t.selectedIndex=o);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function za(t){return"_value"in t?t._value:t.value}const Ab=["ctrl","shift","alt","meta"],Sb={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>Ab.some(n=>t[`${n}Key`]&&!e.includes(n))},Kr=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const l=Sb[e[o]];if(l&&l(s,e))return}return t(s,...i)})},Rb=at({patchProp:bb},sb);let bp;function Pb(){return bp||(bp=LT(Rb))}const Cb=(...t)=>{const e=Pb().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Ob(r);if(!s)return;const i=e._component;!ge(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,kb(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function kb(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Ob(t){return tt(t)?document.querySelector(t):t}var xb=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Bg;const Fl=t=>Bg=t,jg=Symbol();function Vc(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var $i;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})($i||($i={}));function Db(){const t=H_(!0),e=t.run(()=>Ve({}));let n=[],r=[];const s=Rl({install(i){Fl(s),s._a=i,i.provide(jg,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return!this._a&&!xb?r.push(i):n.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const qg=()=>{};function Ip(t,e,n,r=qg){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&z_()&&EE(s),s}function Rs(t,...e){t.slice().forEach(n=>{n(...e)})}const Nb=t=>t();function Mc(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Vc(s)&&Vc(r)&&t.hasOwnProperty(n)&&!Qe(r)&&!Er(r)?t[n]=Mc(s,r):t[n]=r}return t}const Vb=Symbol();function Mb(t){return!Vc(t)||!t.hasOwnProperty(Vb)}const{assign:or}=Object;function Lb(t){return!!(Qe(t)&&t.effect)}function Fb(t,e,n,r){const{state:s,actions:i,getters:o}=e,l=n.state.value[t];let u;function c(){l||(n.state.value[t]=s?s():{});const d=zE(n.state.value[t]);return or(d,i,Object.keys(o||{}).reduce((a,h)=>(a[h]=Rl(me(()=>{Fl(n);const f=n._s.get(t);return o[h].call(f,f)})),a),{}))}return u=Hg(t,c,e,n,r,!0),u}function Hg(t,e,n={},r,s,i){let o;const l=or({actions:{}},n),u={deep:!0};let c,d,a=[],h=[],f;const p=r.state.value[t];!i&&!p&&(r.state.value[t]={}),Ve({});let _;function m(D){let O;c=d=!1,typeof D=="function"?(D(r.state.value[t]),O={type:$i.patchFunction,storeId:t,events:f}):(Mc(r.state.value[t],D),O={type:$i.patchObject,payload:D,storeId:t,events:f});const X=_=Symbol();Ut().then(()=>{_===X&&(c=!0)}),d=!0,Rs(a,O,r.state.value[t])}const g=i?function(){const{state:O}=n,X=O?O():{};this.$patch(ne=>{or(ne,X)})}:qg;function T(){o.stop(),a=[],h=[],r._s.delete(t)}function I(D,O){return function(){Fl(r);const X=Array.from(arguments),ne=[],H=[];function le(J){ne.push(J)}function Ee(J){H.push(J)}Rs(h,{args:X,name:D,store:L,after:le,onError:Ee});let Ce;try{Ce=O.apply(this&&this.$id===t?this:L,X)}catch(J){throw Rs(H,J),J}return Ce instanceof Promise?Ce.then(J=>(Rs(ne,J),J)).catch(J=>(Rs(H,J),Promise.reject(J))):(Rs(ne,Ce),Ce)}}const S={_p:r,$id:t,$onAction:Ip.bind(null,h),$patch:m,$reset:g,$subscribe(D,O={}){const X=Ip(a,D,O.detached,()=>ne()),ne=o.run(()=>rn(()=>r.state.value[t],H=>{(O.flush==="sync"?d:c)&&D({storeId:t,type:$i.direct,events:f},H)},or({},u,O)));return X},$dispose:T},L=Kn(S);r._s.set(t,L);const Y=(r._a&&r._a.runWithContext||Nb)(()=>r._e.run(()=>(o=H_()).run(e)));for(const D in Y){const O=Y[D];if(Qe(O)&&!Lb(O)||Er(O))i||(p&&Mb(O)&&(Qe(O)?O.value=p[D]:Mc(O,p[D])),r.state.value[t][D]=O);else if(typeof O=="function"){const X=I(D,O);Y[D]=X,l.actions[D]=O}}return or(L,Y),or(Re(L),Y),Object.defineProperty(L,"$state",{get:()=>r.state.value[t],set:D=>{m(O=>{or(O,D)})}}),r._p.forEach(D=>{or(L,o.run(()=>D({store:L,app:r._a,pinia:r,options:l})))}),p&&i&&n.hydrate&&n.hydrate(L.$state,p),c=!0,d=!0,L}function ed(t,e,n){let r,s;const i=typeof e=="function";typeof t=="string"?(r=t,s=i?n:e):(s=t,r=t.id);function o(l,u){const c=OT();return l=l||(c?zt(jg,null):null),l&&Fl(l),l=Bg,l._s.has(r)||(i?Hg(r,e,s,l):Fb(r,s,l)),l._s.get(r)}return o.$id=r,o}const zg=ed("modal",()=>{const t=Ve(!1);function e(){t.value=!t.value}const n=me(()=>t.value?"":"hidden");return{isOpen:t,toggle:e,hiddenClass:n}});var Ap={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Ub=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Wg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,a=(i&3)<<4|l>>4;let h=(l&15)<<2|c>>6,f=c&63;u||(f=64,o||(h=64)),r.push(n[d],n[a],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Gg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ub(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const a=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||c==null||a==null)throw new $b;const h=i<<2|l>>4;if(r.push(h),c!==64){const f=l<<4&240|c>>2;if(r.push(f),a!==64){const p=c<<6&192|a;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $b extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bb=function(t){const e=Gg(t);return Wg.encodeByteArray(e,!0)},Ga=function(t){return Bb(t).replace(/\./g,"")},Kg=function(t){try{return Wg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=()=>jb().__FIREBASE_DEFAULTS__,Hb=()=>{if(typeof process>"u"||typeof Ap>"u")return;const t=Ap.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zb=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Kg(t[1]);return e&&JSON.parse(e)},Ul=()=>{try{return qb()||Hb()||zb()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Qg=t=>{var e,n;return(n=(e=Ul())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Xg=t=>{const e=Qg(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Yg=()=>{var t;return(t=Ul())===null||t===void 0?void 0:t.config},Jg=t=>{var e;return(e=Ul())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ga(JSON.stringify(n)),Ga(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(it())}function Kb(){var t;const e=(t=Ul())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Xb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yb(){const t=it();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Jb(){return!Kb()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ey(){try{return typeof indexedDB=="object"}catch{return!1}}function Zb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="FirebaseError";class Fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eI,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ko.prototype.create)}}class ko{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?tI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Fn(s,l,r)}}function tI(t,e){return t.replace(nI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nI=/\{\$([^}]+)}/g;function rI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Sp(i)&&Sp(o)){if(!Wa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sp(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ci(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ki(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sI(t,e){const n=new iI(t,e);return n.subscribe.bind(n)}class iI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Gu),s.error===void 0&&(s.error=Gu),s.complete===void 0&&(s.complete=Gu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(t){return t&&t._delegate?t._delegate:t}class kr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Gb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uI(e))try{this.getOrInitializeService({instanceIdentifier:jr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=jr){return this.instances.has(e)}getOptions(e=jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=jr){return this.component?this.component.multipleInstances?e:jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lI(t){return t===jr?void 0:t}function uI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ae||(Ae={}));const hI={debug:Ae.DEBUG,verbose:Ae.VERBOSE,info:Ae.INFO,warn:Ae.WARN,error:Ae.ERROR,silent:Ae.SILENT},dI=Ae.INFO,fI={[Ae.DEBUG]:"log",[Ae.VERBOSE]:"log",[Ae.INFO]:"info",[Ae.WARN]:"warn",[Ae.ERROR]:"error"},pI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=fI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class td{constructor(e){this.name=e,this._logLevel=dI,this._logHandler=pI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ae.DEBUG,...e),this._logHandler(this,Ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ae.VERBOSE,...e),this._logHandler(this,Ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ae.INFO,...e),this._logHandler(this,Ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ae.WARN,...e),this._logHandler(this,Ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ae.ERROR,...e),this._logHandler(this,Ae.ERROR,...e)}}const mI=(t,e)=>e.some(n=>t instanceof n);let Rp,Pp;function _I(){return Rp||(Rp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gI(){return Pp||(Pp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ty=new WeakMap,Lc=new WeakMap,ny=new WeakMap,Wu=new WeakMap,nd=new WeakMap;function yI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(br(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ty.set(n,t)}).catch(()=>{}),nd.set(e,t),e}function vI(t){if(Lc.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Lc.set(t,e)}let Fc={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lc.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ny.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return br(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wI(t){Fc=t(Fc)}function EI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ku(this),e,...n);return ny.set(r,e.sort?e.sort():[e]),br(r)}:gI().includes(t)?function(...e){return t.apply(Ku(this),e),br(ty.get(this))}:function(...e){return br(t.apply(Ku(this),e))}}function TI(t){return typeof t=="function"?EI(t):(t instanceof IDBTransaction&&vI(t),mI(t,_I())?new Proxy(t,Fc):t)}function br(t){if(t instanceof IDBRequest)return yI(t);if(Wu.has(t))return Wu.get(t);const e=TI(t);return e!==t&&(Wu.set(t,e),nd.set(e,t)),e}const Ku=t=>nd.get(t);function bI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=br(o);return r&&o.addEventListener("upgradeneeded",u=>{r(br(o.result),u.oldVersion,u.newVersion,br(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const II=["get","getKey","getAll","getAllKeys","count"],AI=["put","add","delete","clear"],Qu=new Map;function Cp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qu.get(e))return Qu.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=AI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||II.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),s&&u.done]))[0]};return Qu.set(e,i),i}wI(t=>({...t,get:(e,n,r)=>Cp(e,n)||t.get(e,n,r),has:(e,n)=>!!Cp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(RI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function RI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Uc="@firebase/app",kp="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new td("@firebase/app"),PI="@firebase/app-compat",CI="@firebase/analytics-compat",kI="@firebase/analytics",OI="@firebase/app-check-compat",xI="@firebase/app-check",DI="@firebase/auth",NI="@firebase/auth-compat",VI="@firebase/database",MI="@firebase/database-compat",LI="@firebase/functions",FI="@firebase/functions-compat",UI="@firebase/installations",$I="@firebase/installations-compat",BI="@firebase/messaging",jI="@firebase/messaging-compat",qI="@firebase/performance",HI="@firebase/performance-compat",zI="@firebase/remote-config",GI="@firebase/remote-config-compat",WI="@firebase/storage",KI="@firebase/storage-compat",QI="@firebase/firestore",XI="@firebase/firestore-compat",YI="firebase",JI="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="[DEFAULT]",ZI={[Uc]:"fire-core",[PI]:"fire-core-compat",[kI]:"fire-analytics",[CI]:"fire-analytics-compat",[xI]:"fire-app-check",[OI]:"fire-app-check-compat",[DI]:"fire-auth",[NI]:"fire-auth-compat",[VI]:"fire-rtdb",[MI]:"fire-rtdb-compat",[LI]:"fire-fn",[FI]:"fire-fn-compat",[UI]:"fire-iid",[$I]:"fire-iid-compat",[BI]:"fire-fcm",[jI]:"fire-fcm-compat",[qI]:"fire-perf",[HI]:"fire-perf-compat",[zI]:"fire-rc",[GI]:"fire-rc-compat",[WI]:"fire-gcs",[KI]:"fire-gcs-compat",[QI]:"fire-fst",[XI]:"fire-fst-compat","fire-js":"fire-js",[YI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Map,Bc=new Map;function eA(t,e){try{t.container.addComponent(e)}catch(n){as.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ls(t){const e=t.name;if(Bc.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;Bc.set(e,t);for(const n of Ka.values())eA(n,t);return!0}function $l(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Ir=new ko("app","Firebase",tA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=JI;function ry(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:$c,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ir.create("bad-app-name",{appName:String(s)});if(n||(n=Yg()),!n)throw Ir.create("no-options");const i=Ka.get(s);if(i){if(Wa(n,i.options)&&Wa(r,i.config))return i;throw Ir.create("duplicate-app",{appName:s})}const o=new cI(s);for(const u of Bc.values())o.addComponent(u);const l=new nA(n,r,o);return Ka.set(s,l),l}function rd(t=$c){const e=Ka.get(t);if(!e&&t===$c&&Yg())return ry();if(!e)throw Ir.create("no-app",{appName:t});return e}function Pn(t,e,n){var r;let s=(r=ZI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(l.join(" "));return}ls(new kr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebase-heartbeat-database",sA=1,oo="firebase-heartbeat-store";let Xu=null;function sy(){return Xu||(Xu=bI(rA,sA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),Xu}async function iA(t){try{return await(await sy()).transaction(oo).objectStore(oo).get(iy(t))}catch(e){if(e instanceof Fn)as.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(n.message)}}}async function Op(t,e){try{const r=(await sy()).transaction(oo,"readwrite");await r.objectStore(oo).put(e,iy(t)),await r.done}catch(n){if(n instanceof Fn)as.warn(n.message);else{const r=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});as.warn(r.message)}}}function iy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=1024,aA=30*24*60*60*1e3;class lA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xp();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=aA}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xp(),{heartbeatsToSend:r,unsentEntries:s}=uA(this._heartbeatsCache.heartbeats),i=Ga(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function xp(){return new Date().toISOString().substring(0,10)}function uA(t,e=oA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Dp(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Dp(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ey()?Zb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await iA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Dp(t){return Ga(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){ls(new kr("platform-logger",e=>new SI(e),"PRIVATE")),ls(new kr("heartbeat",e=>new lA(e),"PRIVATE")),Pn(Uc,kp,t),Pn(Uc,kp,"esm2017"),Pn("fire-js","")}hA("");var dA="firebase",fA="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn(dA,fA,"app");var pA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W,sd=sd||{},pe=pA||self;function Bl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function mA(t){return Object.prototype.hasOwnProperty.call(t,Yu)&&t[Yu]||(t[Yu]=++_A)}var Yu="closure_uid_"+(1e9*Math.random()>>>0),_A=0;function gA(t,e,n){return t.call.apply(t.bind,arguments)}function yA(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Rt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Rt=gA:Rt=yA,Rt.apply(null,arguments)}function ua(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function dt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,s,i){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[s].apply(r,o)}}function Nr(){this.s=this.s,this.o=this.o}var vA=0;Nr.prototype.s=!1;Nr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),vA!=0)&&mA(this)};Nr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oy=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function id(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Np(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Bl(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function Pt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Pt.prototype.h=function(){this.defaultPrevented=!0};var wA=function(){if(!pe.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};pe.addEventListener("test",n,e),pe.removeEventListener("test",n,e)}catch{}return t}();function ao(t){return/^[\s\xa0]*$/.test(t)}function jl(){var t=pe.navigator;return t&&(t=t.userAgent)?t:""}function bn(t){return jl().indexOf(t)!=-1}function od(t){return od[" "](t),t}od[" "]=function(){};function EA(t,e){var n=fS;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var TA=bn("Opera"),Zs=bn("Trident")||bn("MSIE"),ay=bn("Edge"),jc=ay||Zs,ly=bn("Gecko")&&!(jl().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge"))&&!(bn("Trident")||bn("MSIE"))&&!bn("Edge"),bA=jl().toLowerCase().indexOf("webkit")!=-1&&!bn("Edge");function uy(){var t=pe.document;return t?t.documentMode:void 0}var qc;e:{var Ju="",Zu=function(){var t=jl();if(ly)return/rv:([^\);]+)(\)|;)/.exec(t);if(ay)return/Edge\/([\d\.]+)/.exec(t);if(Zs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(bA)return/WebKit\/(\S+)/.exec(t);if(TA)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Zu&&(Ju=Zu?Zu[1]:""),Zs){var ec=uy();if(ec!=null&&ec>parseFloat(Ju)){qc=String(ec);break e}}qc=Ju}var Hc;if(pe.document&&Zs){var Vp=uy();Hc=Vp||parseInt(qc,10)||void 0}else Hc=void 0;var IA=Hc;function lo(t,e){if(Pt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(ly){e:{try{od(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:AA[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&lo.$.h.call(this)}}dt(lo,Pt);var AA={2:"touch",3:"pen",4:"mouse"};lo.prototype.h=function(){lo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Do="closure_listenable_"+(1e6*Math.random()|0),SA=0;function RA(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=s,this.key=++SA,this.fa=this.ia=!1}function ql(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function ad(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function PA(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function cy(t){const e={};for(const n in t)e[n]=t[n];return e}const Mp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hy(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<Mp.length;i++)n=Mp[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hl(t){this.src=t,this.g={},this.h=0}Hl.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Gc(t,e,r,s);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new RA(e,this.src,i,!!r,s),e.ia=n,t.push(e)),e};function zc(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=oy(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ql(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Gc(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.fa&&i.listener==e&&i.capture==!!n&&i.la==r)return s}return-1}var ld="closure_lm_"+(1e6*Math.random()|0),tc={};function dy(t,e,n,r,s){if(r&&r.once)return py(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)dy(t,e[i],n,r,s);return null}return n=hd(n),t&&t[Do]?t.O(e,n,xo(r)?!!r.capture:!!r,s):fy(t,e,n,!1,r,s)}function fy(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=xo(s)?!!s.capture:!!s,l=cd(t);if(l||(t[ld]=l=new Hl(t)),n=l.add(e,n,r,o,i),n.proxy)return n;if(r=CA(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)wA||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(_y(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function CA(){function t(n){return e.call(t.src,t.listener,n)}const e=kA;return t}function py(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)py(t,e[i],n,r,s);return null}return n=hd(n),t&&t[Do]?t.P(e,n,xo(r)?!!r.capture:!!r,s):fy(t,e,n,!0,r,s)}function my(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)my(t,e[i],n,r,s);else r=xo(r)?!!r.capture:!!r,n=hd(n),t&&t[Do]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Gc(i,n,r,s),-1<n&&(ql(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=cd(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Gc(e,n,r,s)),(n=-1<t?e[t]:null)&&ud(n))}function ud(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Do])zc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_y(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cd(e))?(zc(n,t),n.h==0&&(n.src=null,e[ld]=null)):ql(t)}}}function _y(t){return t in tc?tc[t]:tc[t]="on"+t}function kA(t,e){if(t.fa)t=!0;else{e=new lo(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ud(t),t=n.call(r,e)}return t}function cd(t){return t=t[ld],t instanceof Hl?t:null}var nc="__closure_events_fn_"+(1e9*Math.random()>>>0);function hd(t){return typeof t=="function"?t:(t[nc]||(t[nc]=function(e){return t.handleEvent(e)}),t[nc])}function ht(){Nr.call(this),this.i=new Hl(this),this.S=this,this.J=null}dt(ht,Nr);ht.prototype[Do]=!0;ht.prototype.removeEventListener=function(t,e,n,r){my(this,t,e,n,r)};function yt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Pt(e,t);else if(e instanceof Pt)e.target=e.target||t;else{var s=e;e=new Pt(r,t),hy(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=ca(o,r,!0,e)&&s}if(o=e.g=t,s=ca(o,r,!0,e)&&s,s=ca(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=ca(o,r,!1,e)&&s}ht.prototype.N=function(){if(ht.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ql(n[r]);delete t.g[e],t.h--}}this.J=null};ht.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};ht.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function ca(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.fa&&o.capture==n){var l=o.listener,u=o.la||o.src;o.ia&&zc(t.i,o),s=l.call(u,r)!==!1&&s}}return s&&!r.defaultPrevented}var dd=pe.JSON.stringify;class OA{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function xA(){var t=fd;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class DA{constructor(){this.h=this.g=null}add(e,n){const r=gy.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var gy=new OA(()=>new NA,t=>t.reset());class NA{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function VA(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function MA(t){pe.setTimeout(()=>{throw t},0)}let uo,co=!1,fd=new DA,yy=()=>{const t=pe.Promise.resolve(void 0);uo=()=>{t.then(LA)}};var LA=()=>{for(var t;t=xA();){try{t.h.call(t.g)}catch(n){MA(n)}var e=gy;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}co=!1};function zl(t,e){ht.call(this),this.h=t||1,this.g=e||pe,this.j=Rt(this.qb,this),this.l=Date.now()}dt(zl,ht);W=zl.prototype;W.ga=!1;W.T=null;W.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),yt(this,"tick"),this.ga&&(pd(this),this.start()))}};W.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function pd(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}W.N=function(){zl.$.N.call(this),pd(this),delete this.g};function md(t,e,n){if(typeof t=="function")n&&(t=Rt(t,n));else if(t&&typeof t.handleEvent=="function")t=Rt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:pe.setTimeout(t,e||0)}function vy(t){t.g=md(()=>{t.g=null,t.i&&(t.i=!1,vy(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class FA extends Nr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vy(this)}N(){super.N(),this.g&&(pe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ho(t){Nr.call(this),this.h=t,this.g={}}dt(ho,Nr);var Lp=[];function wy(t,e,n,r){Array.isArray(n)||(n&&(Lp[0]=n.toString()),n=Lp);for(var s=0;s<n.length;s++){var i=dy(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ey(t){ad(t.g,function(e,n){this.g.hasOwnProperty(n)&&ud(e)},t),t.g={}}ho.prototype.N=function(){ho.$.N.call(this),Ey(this)};ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gl(){this.g=!0}Gl.prototype.Ea=function(){this.g=!1};function UA(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",l=i.split("&"),u=0;u<l.length;u++){var c=l[u].split("=");if(1<c.length){var d=c[0];c=c[1];var a=d.split("_");o=2<=a.length&&a[1]=="type"?o+(d+"="+c+"&"):o+(d+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function $A(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function Fs(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+jA(t,n)+(r?" "+r:"")})}function BA(t,e){t.info(function(){return"TIMEOUT: "+e})}Gl.prototype.info=function(){};function jA(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return dd(n)}catch{return e}}var ys={},Fp=null;function Wl(){return Fp=Fp||new ht}ys.Ta="serverreachability";function Ty(t){Pt.call(this,ys.Ta,t)}dt(Ty,Pt);function fo(t){const e=Wl();yt(e,new Ty(e))}ys.STAT_EVENT="statevent";function by(t,e){Pt.call(this,ys.STAT_EVENT,t),this.stat=e}dt(by,Pt);function Dt(t){const e=Wl();yt(e,new by(e,t))}ys.Ua="timingevent";function Iy(t,e){Pt.call(this,ys.Ua,t),this.size=e}dt(Iy,Pt);function No(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return pe.setTimeout(function(){t()},e)}var Kl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ay={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function _d(){}_d.prototype.h=null;function Up(t){return t.h||(t.h=t.i())}function Sy(){}var Vo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gd(){Pt.call(this,"d")}dt(gd,Pt);function yd(){Pt.call(this,"c")}dt(yd,Pt);var Wc;function Ql(){}dt(Ql,_d);Ql.prototype.g=function(){return new XMLHttpRequest};Ql.prototype.i=function(){return{}};Wc=new Ql;function Mo(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new ho(this),this.P=qA,t=jc?125:void 0,this.V=new zl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ry}function Ry(){this.i=null,this.g="",this.h=!1}var qA=45e3,Py={},Kc={};W=Mo.prototype;W.setTimeout=function(t){this.P=t};function Qc(t,e,n){t.L=1,t.A=Yl(Qn(e)),t.u=n,t.S=!0,Cy(t,null)}function Cy(t,e){t.G=Date.now(),Lo(t),t.B=Qn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),Ly(n.i,"t",r),t.o=0,n=t.l.J,t.h=new Ry,t.g=sv(t.l,n?e:null,!t.u),0<t.O&&(t.M=new FA(Rt(t.Pa,t,t.g),t.O)),wy(t.U,t.g,"readystatechange",t.nb),e=t.I?cy(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),fo(),UA(t.j,t.v,t.B,t.m,t.W,t.u)}W.nb=function(t){t=t.target;const e=this.M;e&&In(t)==3?e.l():this.Pa(t)};W.Pa=function(t){try{if(t==this.g)e:{const d=In(this.g);var e=this.g.Ia();const a=this.g.da();if(!(3>d)&&(d!=3||jc||this.g&&(this.h.h||this.g.ja()||qp(this.g)))){this.J||d!=4||e==7||(e==8||0>=a?fo(3):fo(2)),Xl(this);var n=this.g.da();this.ca=n;t:if(ky(this)){var r=qp(this.g);t="";var s=r.length,i=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Bi(this);var o="";break t}this.h.i=new pe.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,$A(this.j,this.v,this.B,this.m,this.W,d,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ao(l)){var c=l;break t}}c=null}if(n=c)Fs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Xc(this,n);else{this.i=!1,this.s=3,Dt(12),Qr(this),Bi(this);break e}}this.S?(Oy(this,d,o),jc&&this.i&&d==3&&(wy(this.U,this.V,"tick",this.mb),this.V.start())):(Fs(this.j,this.m,o,null),Xc(this,o)),d==4&&Qr(this),this.i&&!this.J&&(d==4?ev(this.l,this):(this.i=!1,Lo(this)))}else cS(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),Qr(this),Bi(this)}}}catch{}finally{}};function ky(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function Oy(t,e,n){let r=!0,s;for(;!t.J&&t.o<n.length;)if(s=HA(t,n),s==Kc){e==4&&(t.s=4,Dt(14),r=!1),Fs(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Py){t.s=4,Dt(15),Fs(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Fs(t.j,t.m,s,null),Xc(t,s);ky(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Dt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Id(e),e.M=!0,Dt(11))):(Fs(t.j,t.m,n,"[Invalid Chunked Response]"),Qr(t),Bi(t))}W.mb=function(){if(this.g){var t=In(this.g),e=this.g.ja();this.o<e.length&&(Xl(this),Oy(this,t,e),this.i&&t!=4&&Lo(this))}};function HA(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Kc:(n=Number(e.substring(n,r)),isNaN(n)?Py:(r+=1,r+n>e.length?Kc:(e=e.slice(r,r+n),t.o=r+n,e)))}W.cancel=function(){this.J=!0,Qr(this)};function Lo(t){t.Y=Date.now()+t.P,xy(t,t.P)}function xy(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=No(Rt(t.lb,t),e)}function Xl(t){t.C&&(pe.clearTimeout(t.C),t.C=null)}W.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(BA(this.j,this.B),this.L!=2&&(fo(),Dt(17)),Qr(this),this.s=2,Bi(this)):xy(this,this.Y-t)};function Bi(t){t.l.H==0||t.J||ev(t.l,t)}function Qr(t){Xl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,pd(t.V),Ey(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Xc(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Yc(n.i,t))){if(!t.K&&Yc(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ya(n),tu(n);else break e;bd(n),Dt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=No(Rt(n.ib,n),6e3));if(1>=$y(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Xr(n,11)}else if((t.K||n.g==t)&&Ya(n),!ao(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let c=s[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const d=c[3];d!=null&&(n.ra=d,n.l.info("VER="+n.ra));const a=c[4];a!=null&&(n.Ga=a,n.l.info("SVER="+n.Ga));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var i=r.i;i.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(vd(i,i.h),i.h=null))}if(r.F){const _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,We(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=rv(r,r.J?r.pa:null,r.Y),o.K){By(r.i,o);var l=o,u=r.L;u&&l.setTimeout(u),l.C&&(Xl(l),Lo(l)),r.g=o}else Jy(r);0<n.j.length&&nu(n)}else c[0]!="stop"&&c[0]!="close"||Xr(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Xr(n,7):Td(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}fo(4)}catch{}}function zA(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Bl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function GA(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Bl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function Dy(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=GA(t),r=zA(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var Ny=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WA(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function rs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof rs){this.h=t.h,Qa(this,t.j),this.s=t.s,this.g=t.g,Xa(this,t.m),this.l=t.l;var e=t.i,n=new po;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),$p(this,n),this.o=t.o}else t&&(e=String(t).match(Ny))?(this.h=!1,Qa(this,e[1]||"",!0),this.s=Oi(e[2]||""),this.g=Oi(e[3]||"",!0),Xa(this,e[4]),this.l=Oi(e[5]||"",!0),$p(this,e[6]||"",!0),this.o=Oi(e[7]||"")):(this.h=!1,this.i=new po(null,this.h))}rs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xi(e,Bp,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(xi(e,Bp,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(xi(n,n.charAt(0)=="/"?XA:QA,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xi(n,JA)),t.join("")};function Qn(t){return new rs(t)}function Qa(t,e,n){t.j=n?Oi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Xa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function $p(t,e,n){e instanceof po?(t.i=e,ZA(t.i,t.h)):(n||(e=xi(e,YA)),t.i=new po(e,t.h))}function We(t,e,n){t.i.set(e,n)}function Yl(t){return We(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Oi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xi(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,KA),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function KA(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Bp=/[#\/\?@]/g,QA=/[#\?:]/g,XA=/[#\?]/g,YA=/[#\?@]/g,JA=/#/g;function po(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Vr(t){t.g||(t.g=new Map,t.h=0,t.i&&WA(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}W=po.prototype;W.add=function(t,e){Vr(this),this.i=null,t=di(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Vy(t,e){Vr(t),e=di(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function My(t,e){return Vr(t),e=di(t,e),t.g.has(e)}W.forEach=function(t,e){Vr(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};W.ta=function(){Vr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};W.Z=function(t){Vr(this);let e=[];if(typeof t=="string")My(this,t)&&(e=e.concat(this.g.get(di(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};W.set=function(t,e){return Vr(this),this.i=null,t=di(this,t),My(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};W.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Ly(t,e,n){Vy(t,e),0<n.length&&(t.i=null,t.g.set(di(t,e),id(n)),t.h+=n.length)}W.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function di(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function ZA(t,e){e&&!t.j&&(Vr(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(Vy(this,r),Ly(this,s,n))},t)),t.j=e}var eS=class{constructor(t,e){this.g=t,this.map=e}};function Fy(t){this.l=t||tS,pe.PerformanceNavigationTiming?(t=pe.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(pe.g&&pe.g.Ka&&pe.g.Ka()&&pe.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var tS=10;function Uy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function $y(t){return t.h?1:t.g?t.g.size:0}function Yc(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function vd(t,e){t.g?t.g.add(e):t.h=e}function By(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Fy.prototype.cancel=function(){if(this.i=jy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function jy(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return id(t.i)}var nS=class{stringify(t){return pe.JSON.stringify(t,void 0)}parse(t){return pe.JSON.parse(t,void 0)}};function rS(){this.g=new nS}function sS(t,e,n){const r=n||"";try{Dy(t,function(s,i){let o=s;xo(s)&&(o=dd(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function iS(t,e){const n=new Gl;if(pe.Image){const r=new Image;r.onload=ua(ha,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ua(ha,n,r,"TestLoadImage: error",!1,e),r.onabort=ua(ha,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ua(ha,n,r,"TestLoadImage: timeout",!1,e),pe.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function ha(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Jl(t){this.l=t.ec||null,this.j=t.ob||!1}dt(Jl,_d);Jl.prototype.g=function(){return new Zl(this.l,this.j)};Jl.prototype.i=function(t){return function(){return t}}({});function Zl(t,e){ht.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=wd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dt(Zl,ht);var wd=0;W=Zl.prototype;W.open=function(t,e){if(this.readyState!=wd)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,mo(this)};W.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||pe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};W.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fo(this)),this.readyState=wd};W.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,mo(this)),this.g&&(this.readyState=3,mo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof pe.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qy(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function qy(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}W.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Fo(this):mo(this),this.readyState==3&&qy(this)}};W.Za=function(t){this.g&&(this.response=this.responseText=t,Fo(this))};W.Ya=function(t){this.g&&(this.response=t,Fo(this))};W.ka=function(){this.g&&Fo(this)};function Fo(t){t.readyState=4,t.l=null,t.j=null,t.A=null,mo(t)}W.setRequestHeader=function(t,e){this.v.append(t,e)};W.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};W.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function mo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Zl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var oS=pe.JSON.parse;function et(t){ht.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Hy,this.L=this.M=!1}dt(et,ht);var Hy="",aS=/^https?$/i,lS=["POST","PUT"];W=et.prototype;W.Oa=function(t){this.M=t};W.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wc.g(),this.C=this.u?Up(this.u):Up(Wc),this.g.onreadystatechange=Rt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(i){jp(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=pe.FormData&&t instanceof pe.FormData,!(0<=oy(lS,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wy(this),0<this.B&&((this.L=uS(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Rt(this.ua,this)):this.A=md(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){jp(this,i)}};function uS(t){return Zs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}W.ua=function(){typeof sd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yt(this,"timeout"),this.abort(8))};function jp(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,zy(t),eu(t)}function zy(t){t.F||(t.F=!0,yt(t,"complete"),yt(t,"error"))}W.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,yt(this,"complete"),yt(this,"abort"),eu(this))};W.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eu(this,!0)),et.$.N.call(this)};W.La=function(){this.s||(this.G||this.v||this.l?Gy(this):this.kb())};W.kb=function(){Gy(this)};function Gy(t){if(t.h&&typeof sd<"u"&&(!t.C[1]||In(t)!=4||t.da()!=2)){if(t.v&&In(t)==4)md(t.La,0,t);else if(yt(t,"readystatechange"),In(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var s=String(t.I).match(Ny)[1]||null;!s&&pe.self&&pe.self.location&&(s=pe.self.location.protocol.slice(0,-1)),r=!aS.test(s?s.toLowerCase():"")}n=r}if(n)yt(t,"complete"),yt(t,"success");else{t.m=6;try{var i=2<In(t)?t.g.statusText:""}catch{i=""}t.j=i+" ["+t.da()+"]",zy(t)}}finally{eu(t)}}}}function eu(t,e){if(t.g){Wy(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||yt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Wy(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(pe.clearTimeout(t.A),t.A=null)}W.isActive=function(){return!!this.g};function In(t){return t.g?t.g.readyState:0}W.da=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}};W.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};W.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),oS(e)}};function qp(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Hy:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function cS(t){const e={};t=(t.g&&2<=In(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ao(t[r]))continue;var n=VA(t[r]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const i=e[s]||[];e[s]=i,i.push(n)}PA(e,function(r){return r.join(", ")})}W.Ia=function(){return this.m};W.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Ky(t){let e="";return ad(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Ed(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ky(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):We(t,e,n))}function bi(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Qy(t){this.Ga=0,this.j=[],this.l=new Gl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=bi("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=bi("baseRetryDelayMs",5e3,t),this.hb=bi("retryDelaySeedMs",1e4,t),this.eb=bi("forwardChannelMaxRetries",2,t),this.xa=bi("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Fy(t&&t.concurrentRequestLimit),this.Ja=new rS,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}W=Qy.prototype;W.ra=8;W.H=1;function Td(t){if(Xy(t),t.H==3){var e=t.W++,n=Qn(t.I);if(We(n,"SID",t.K),We(n,"RID",e),We(n,"TYPE","terminate"),Uo(t,n),e=new Mo(t,t.l,e),e.L=2,e.A=Yl(Qn(n)),n=!1,pe.navigator&&pe.navigator.sendBeacon)try{n=pe.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&pe.Image&&(new Image().src=e.A,n=!0),n||(e.g=sv(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Lo(e)}nv(t)}function tu(t){t.g&&(Id(t),t.g.cancel(),t.g=null)}function Xy(t){tu(t),t.u&&(pe.clearTimeout(t.u),t.u=null),Ya(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&pe.clearTimeout(t.m),t.m=null)}function nu(t){if(!Uy(t.i)&&!t.m){t.m=!0;var e=t.Na;uo||yy(),co||(uo(),co=!0),fd.add(e,t),t.C=0}}function hS(t,e){return $y(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=No(Rt(t.Na,t,e),tv(t,t.C)),t.C++,!0)}W.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new Mo(this,this.l,t);let i=this.s;if(this.U&&(i?(i=cy(i),hy(i,this.U)):i=this.U),this.o!==null||this.O||(s.I=i,i=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Yy(this,s,e),n=Qn(this.I),We(n,"RID",t),We(n,"CVER",22),this.F&&We(n,"X-HTTP-Session-Id",this.F),Uo(this,n),i&&(this.O?e="headers="+encodeURIComponent(String(Ky(i)))+"&"+e:this.o&&Ed(n,this.o,i)),vd(this.i,s),this.bb&&We(n,"TYPE","init"),this.P?(We(n,"$req",e),We(n,"SID","null"),s.aa=!0,Qc(s,n,null)):Qc(s,n,e),this.H=2}}else this.H==3&&(t?Hp(this,t):this.j.length==0||Uy(this.i)||Hp(this))};function Hp(t,e){var n;e?n=e.m:n=t.W++;const r=Qn(t.I);We(r,"SID",t.K),We(r,"RID",n),We(r,"AID",t.V),Uo(t,r),t.o&&t.s&&Ed(r,t.o,t.s),n=new Mo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Yy(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),vd(t.i,n),Qc(n,r,e)}function Uo(t,e){t.na&&ad(t.na,function(n,r){We(e,r,n)}),t.h&&Dy({},function(n,r){We(e,r,n)})}function Yy(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Rt(t.h.Va,t.h,t):null;e:{var s=t.j;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].g,o.push("ofs="+i)):i=0:o.push("ofs="+i);let l=!0;for(let u=0;u<n;u++){let c=s[u].g;const d=s[u].map;if(c-=i,0>c)i=Math.max(0,s[u].g-100),l=!1;else try{sS(d,o,"req"+c+"_")}catch{r&&r(d)}}if(l){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Jy(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;uo||yy(),co||(uo(),co=!0),fd.add(e,t),t.A=0}}function bd(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=No(Rt(t.Ma,t),tv(t,t.A)),t.A++,!0)}W.Ma=function(){if(this.u=null,Zy(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=No(Rt(this.jb,this),t)}};W.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Dt(10),tu(this),Zy(this))};function Id(t){t.B!=null&&(pe.clearTimeout(t.B),t.B=null)}function Zy(t){t.g=new Mo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Qn(t.wa);We(e,"RID","rpc"),We(e,"SID",t.K),We(e,"AID",t.V),We(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&We(e,"TO",t.qa),We(e,"TYPE","xmlhttp"),Uo(t,e),t.o&&t.s&&Ed(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Yl(Qn(e)),n.u=null,n.S=!0,Cy(n,t)}W.ib=function(){this.v!=null&&(this.v=null,tu(this),bd(this),Dt(19))};function Ya(t){t.v!=null&&(pe.clearTimeout(t.v),t.v=null)}function ev(t,e){var n=null;if(t.g==e){Ya(t),Id(t),t.g=null;var r=2}else if(Yc(t.i,e))n=e.F,By(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var s=t.C;r=Wl(),yt(r,new Iy(r,n)),nu(t)}else Jy(t);else if(s=e.s,s==3||s==0&&0<e.ca||!(r==1&&hS(t,e)||r==2&&bd(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:Xr(t,5);break;case 4:Xr(t,10);break;case 3:Xr(t,6);break;default:Xr(t,2)}}}function tv(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Xr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Rt(t.pb,t);n||(n=new rs("//www.google.com/images/cleardot.gif"),pe.location&&pe.location.protocol=="http"||Qa(n,"https"),Yl(n)),iS(n.toString(),r)}else Dt(2);t.H=0,t.h&&t.h.za(e),nv(t),Xy(t)}W.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Dt(2)):(this.l.info("Failed to ping google.com"),Dt(1))};function nv(t){if(t.H=0,t.ma=[],t.h){const e=jy(t.i);(e.length!=0||t.j.length!=0)&&(Np(t.ma,e),Np(t.ma,t.j),t.i.i.length=0,id(t.j),t.j.length=0),t.h.ya()}}function rv(t,e,n){var r=n instanceof rs?Qn(n):new rs(n);if(r.g!="")e&&(r.g=e+"."+r.g),Xa(r,r.m);else{var s=pe.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new rs(null);r&&Qa(i,r),e&&(i.g=e),s&&Xa(i,s),n&&(i.l=n),r=i}return n=t.F,e=t.Da,n&&e&&We(r,n,e),We(r,"VER",t.ra),Uo(t,r),r}function sv(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new et(new Jl({ob:n})):new et(t.va),e.Oa(t.J),e}W.isActive=function(){return!!this.h&&this.h.isActive(this)};function iv(){}W=iv.prototype;W.Ba=function(){};W.Aa=function(){};W.za=function(){};W.ya=function(){};W.isActive=function(){return!0};W.Va=function(){};function Ja(){if(Zs&&!(10<=Number(IA)))throw Error("Environmental error: no available transport.")}Ja.prototype.g=function(t,e){return new Yt(t,e)};function Yt(t,e){ht.call(this),this.g=new Qy(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ao(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ao(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new fi(this)}dt(Yt,ht);Yt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Dt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=rv(t,null,t.Y),nu(t)};Yt.prototype.close=function(){Td(this.g)};Yt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=dd(t),t=n);e.j.push(new eS(e.fb++,t)),e.H==3&&nu(e)};Yt.prototype.N=function(){this.g.h=null,delete this.j,Td(this.g),delete this.g,Yt.$.N.call(this)};function ov(t){gd.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}dt(ov,gd);function av(){yd.call(this),this.status=1}dt(av,yd);function fi(t){this.g=t}dt(fi,iv);fi.prototype.Ba=function(){yt(this.g,"a")};fi.prototype.Aa=function(t){yt(this.g,new ov(t))};fi.prototype.za=function(t){yt(this.g,new av)};fi.prototype.ya=function(){yt(this.g,"b")};function dS(){this.blockSize=-1}function dn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}dt(dn,dS);dn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function rc(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)r[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var i=t.g[3],o=e+(i^n&(s^i))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[1]+3905402710&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[2]+606105819&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[5]+1200080426&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[6]+2821735955&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[9]+2336552879&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[10]+4294925233&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(i^n&(s^i))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=i+(s^e&(n^s))+r[13]+4254626195&4294967295,i=e+(o<<12&4294967295|o>>>20),o=s+(n^i&(e^n))+r[14]+2792965006&4294967295,s=i+(o<<17&4294967295|o>>>15),o=n+(e^s&(i^e))+r[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=e+(s^i&(n^s))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[6]+3225465664&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[11]+643717713&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[10]+38016083&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[15]+3634488961&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[14]+3275163606&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[3]+4107603335&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(s^i&(n^s))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=i+(n^s&(e^n))+r[2]+4243563512&4294967295,i=e+(o<<9&4294967295|o>>>23),o=s+(e^n&(i^e))+r[7]+1735328473&4294967295,s=i+(o<<14&4294967295|o>>>18),o=n+(i^e&(s^i))+r[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=e+(n^s^i)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[8]+2272392833&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[11]+1839030562&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[4]+1272893353&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[7]+4139469664&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[0]+3936430074&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[3]+3572445317&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(n^s^i)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=i+(e^n^s)+r[12]+3873151461&4294967295,i=e+(o<<11&4294967295|o>>>21),o=s+(i^e^n)+r[15]+530742520&4294967295,s=i+(o<<16&4294967295|o>>>16),o=n+(s^i^e)+r[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=e+(s^(n|~i))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[7]+1126891415&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[14]+2878612391&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[3]+2399980690&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[10]+4293915773&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[15]+4264355552&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[6]+2734768916&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=e+(s^(n|~i))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=i+(n^(e|~s))+r[11]+3174756917&4294967295,i=e+(o<<10&4294967295|o>>>22),o=s+(e^(i|~n))+r[2]+718787259&4294967295,s=i+(o<<15&4294967295|o>>>17),o=n+(i^(s|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+i&4294967295}dn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,s=this.h,i=0;i<e;){if(s==0)for(;i<=n;)rc(this,t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<e;)if(r[s++]=t.charCodeAt(i++),s==this.blockSize){rc(this,r),s=0;break}}else for(;i<e;)if(r[s++]=t[i++],s==this.blockSize){rc(this,r),s=0;break}}this.h=s,this.i+=e};dn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ue(t,e){this.h=e;for(var n=[],r=!0,s=t.length-1;0<=s;s--){var i=t[s]|0;r&&i==e||(n[s]=i,r=!1)}this.g=n}var fS={};function Ad(t){return-128<=t&&128>t?EA(t,function(e){return new Ue([e|0],0>e?-1:0)}):new Ue([t|0],0>t?-1:0)}function An(t){if(isNaN(t)||!isFinite(t))return zs;if(0>t)return _t(An(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Jc;return new Ue(e,0)}function lv(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return _t(lv(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=An(Math.pow(e,8)),r=zs,s=0;s<t.length;s+=8){var i=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+i),e);8>i?(i=An(Math.pow(e,i)),r=r.R(i).add(An(o))):(r=r.R(n),r=r.add(An(o)))}return r}var Jc=4294967296,zs=Ad(0),Zc=Ad(1),zp=Ad(16777216);W=Ue.prototype;W.ea=function(){if(en(this))return-_t(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Jc+r)*e,e*=Jc}return t};W.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(jn(this))return"0";if(en(this))return"-"+_t(this).toString(t);for(var e=An(Math.pow(t,6)),n=this,r="";;){var s=el(n,e).g;n=Za(n,s.R(e));var i=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,jn(n))return i+r;for(;6>i.length;)i="0"+i;r=i+r}};W.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function jn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function en(t){return t.h==-1}W.X=function(t){return t=Za(this,t),en(t)?-1:jn(t)?0:1};function _t(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ue(n,~t.h).add(Zc)}W.abs=function(){return en(this)?_t(this):this};W.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,s=0;s<=e;s++){var i=r+(this.D(s)&65535)+(t.D(s)&65535),o=(i>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Ue(n,n[n.length-1]&-2147483648?-1:0)};function Za(t,e){return t.add(_t(e))}W.R=function(t){if(jn(this)||jn(t))return zs;if(en(this))return en(t)?_t(this).R(_t(t)):_t(_t(this).R(t));if(en(t))return _t(this.R(_t(t)));if(0>this.X(zp)&&0>t.X(zp))return An(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<t.g.length;s++){var i=this.D(r)>>>16,o=this.D(r)&65535,l=t.D(s)>>>16,u=t.D(s)&65535;n[2*r+2*s]+=o*u,da(n,2*r+2*s),n[2*r+2*s+1]+=i*u,da(n,2*r+2*s+1),n[2*r+2*s+1]+=o*l,da(n,2*r+2*s+1),n[2*r+2*s+2]+=i*l,da(n,2*r+2*s+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ue(n,0)};function da(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ii(t,e){this.g=t,this.h=e}function el(t,e){if(jn(e))throw Error("division by zero");if(jn(t))return new Ii(zs,zs);if(en(t))return e=el(_t(t),e),new Ii(_t(e.g),_t(e.h));if(en(e))return e=el(t,_t(e)),new Ii(_t(e.g),e.h);if(30<t.g.length){if(en(t)||en(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Zc,r=e;0>=r.X(t);)n=Gp(n),r=Gp(r);var s=Ps(n,1),i=Ps(r,1);for(r=Ps(r,2),n=Ps(n,2);!jn(r);){var o=i.add(r);0>=o.X(t)&&(s=s.add(n),i=o),r=Ps(r,1),n=Ps(n,1)}return e=Za(t,s.R(e)),new Ii(s,e)}for(s=zs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),i=An(n),o=i.R(e);en(o)||0<o.X(t);)n-=r,i=An(n),o=i.R(e);jn(i)&&(i=Zc),s=s.add(i),t=Za(t,o)}return new Ii(s,t)}W.gb=function(t){return el(this,t).h};W.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ue(n,this.h&t.h)};W.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ue(n,this.h|t.h)};W.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ue(n,this.h^t.h)};function Gp(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ue(n,t.h)}function Ps(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,s=[],i=0;i<r;i++)s[i]=0<e?t.D(i+n)>>>e|t.D(i+n+1)<<32-e:t.D(i+n);return new Ue(s,t.h)}Ja.prototype.createWebChannel=Ja.prototype.g;Yt.prototype.send=Yt.prototype.u;Yt.prototype.open=Yt.prototype.m;Yt.prototype.close=Yt.prototype.close;Kl.NO_ERROR=0;Kl.TIMEOUT=8;Kl.HTTP_ERROR=6;Ay.COMPLETE="complete";Sy.EventType=Vo;Vo.OPEN="a";Vo.CLOSE="b";Vo.ERROR="c";Vo.MESSAGE="d";ht.prototype.listen=ht.prototype.O;et.prototype.listenOnce=et.prototype.P;et.prototype.getLastError=et.prototype.Sa;et.prototype.getLastErrorCode=et.prototype.Ia;et.prototype.getStatus=et.prototype.da;et.prototype.getResponseJson=et.prototype.Wa;et.prototype.getResponseText=et.prototype.ja;et.prototype.send=et.prototype.ha;et.prototype.setWithCredentials=et.prototype.Oa;dn.prototype.digest=dn.prototype.l;dn.prototype.reset=dn.prototype.reset;dn.prototype.update=dn.prototype.j;Ue.prototype.add=Ue.prototype.add;Ue.prototype.multiply=Ue.prototype.R;Ue.prototype.modulo=Ue.prototype.gb;Ue.prototype.compare=Ue.prototype.X;Ue.prototype.toNumber=Ue.prototype.ea;Ue.prototype.toString=Ue.prototype.toString;Ue.prototype.getBits=Ue.prototype.D;Ue.fromNumber=An;Ue.fromString=lv;var pS=function(){return new Ja},mS=function(){return Wl()},sc=Kl,_S=Ay,gS=ys,Wp={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},fa=Sy,yS=et,vS=dn,Gs=Ue;const Kp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new td("@firebase/firestore");function Ai(){return us.logLevel}function G(t,...e){if(us.logLevel<=Ae.DEBUG){const n=e.map(Sd);us.debug(`Firestore (${pi}): ${t}`,...n)}}function Vn(t,...e){if(us.logLevel<=Ae.ERROR){const n=e.map(Sd);us.error(`Firestore (${pi}): ${t}`,...n)}}function ei(t,...e){if(us.logLevel<=Ae.WARN){const n=e.map(Sd);us.warn(`Firestore (${pi}): ${t}`,...n)}}function Sd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${pi}) INTERNAL ASSERTION FAILED: `+t;throw Vn(e),new Error(e)}function qe(t,e){t||fe()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}}class ES{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class TS{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string"),new uv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string"),new Tt(e)}}class bS{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class IS{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bS(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AS{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SS{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string"),this.R=n.token,new AS(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=RS(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function ti(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.timestamp=e}static fromTimestamp(e){return new _e(e)}static min(){return new _e(new ot(0,0))}static max(){return new _e(new ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _o.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _o?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends _o{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const PS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gt extends _o{construct(e,n,r){return new gt(e,n,r)}static isValidIdentifier(e){return PS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new gt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new q(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gt(n)}static emptyPath(){return new gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(je.fromString(e))}static fromName(e){return new oe(je.fromString(e).popFirst(5))}static empty(){return new oe(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new je(e.slice()))}}function CS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(r===1e9?new ot(n+1,0):new ot(n,r));return new Or(s,oe.empty(),e)}function kS(t){return new Or(t.readTime,t.key,-1)}class Or{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Or(_e.min(),oe.empty(),-1)}static max(){return new Or(_e.max(),oe.empty(),-1)}}function OS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t){if(t.code!==R.FAILED_PRECONDITION||t.message!==xS)throw t;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(s=>s?N.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new N((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new N((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Cn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ji(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const s=Pd(r.target.error);this.V.reject(new ji(e,s))}}static open(e,n,r,s){try{return new Rd(n,e.transaction(s,r))}catch(i){throw new ji(n,i)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new VS(n)}}class Yr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Yr.S(it())===12.2&&Vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),zr(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ey())return!1;if(Yr.C())return!0;const e=it(),n=Yr.S(e),r=0<n&&n<10,s=Yr.v(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new ji(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new q(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new q(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ji(e,o))},s.onupgradeneeded=i=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.p.N(o,s.transaction,i.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const l=Rd.open(this.db,e,i?"readonly":"readwrite",r),u=s(l).next(c=>(l.g(),c)).catch(c=>(l.abort(c),N.reject(c))).toPromise();return u.catch(()=>{}),await l.m,u}catch(l){const u=l,c=u.name!=="FirebaseError"&&o<3;if(G("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),!c)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class NS{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return zr(this.k.delete())}}class ji extends q{constructor(e,n){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Bo(t){return t.name==="IndexedDbTransactionError"}class VS{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zr(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),zr(this.store.add(e))}get(e){return zr(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),zr(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),zr(this.store.count())}W(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new N((o,l)=>{i.onerror=u=>{l(u.target.error)},i.onsuccess=u=>{o(u.target.result)}})}{const i=this.cursor(r),o=[];return this.G(i,(l,u)=>{o.push(u)}).next(()=>o)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}H(e,n){G("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const s=this.cursor(r);return this.G(s,(i,o,l)=>l.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.G(s,n)}Z(e){const n=this.cursor({});return new N((r,s)=>{n.onerror=i=>{const o=Pd(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(l=>{l?o.continue():r()}):r()}})}G(e,n){const r=[];return new N((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const l=o.target.result;if(!l)return void s();const u=new NS(l),c=n(l.primaryKey,l.value,u);if(c instanceof N){const d=c.catch(a=>(u.done(),N.reject(a)));r.push(d)}u.isDone?s():u.$===null?l.continue():l.continue(u.$)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zr(t){return new N((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Pd(r.target.error);n(s)}})}let Qp=!1;function Pd(t){const e=Yr.S(it());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new q("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Qp||(Qp=!0,setTimeout(()=>{throw r},0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}Cd._e=-1;function ru(t){return t==null}function tl(t){return t===0&&1/t==-1/0}function MS(t){return typeof t=="number"&&Number.isInteger(t)&&!tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pa(this.root,e,this.comparator,!0)}}class pa{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??mt.RED,this.left=s??mt.EMPTY,this.right=i??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new mt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return mt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,s,i){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yp(this.data.getIterator())}getIteratorFrom(e){return new Yp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class Yp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new Kt([])}unionWith(e){let n=new vt(gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ti(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dv("Invalid base64 string: "+i):i}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const LS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xr(t){if(qe(!!t),typeof t=="string"){let e=0;const n=LS.exec(t);if(qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rt(t.seconds),nanos:rt(t.nanos)}}function rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cs(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function kd(t){const e=t.mapValue.fields.__previous_value__;return su(e)?kd(e):e}function go(t){const e=xr(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,n,r,s,i,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class yo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?su(t)?4:US(t)?9007199254740991:10:fe()}function Mn(t,e){if(t===e)return!0;const n=hs(t);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return go(t).isEqual(go(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=xr(s.timestampValue),l=xr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return cs(s.bytesValue).isEqual(cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return rt(s.geoPointValue.latitude)===rt(i.geoPointValue.latitude)&&rt(s.geoPointValue.longitude)===rt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return rt(s.integerValue)===rt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=rt(s.doubleValue),l=rt(i.doubleValue);return o===l?tl(o)===tl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ti(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Xp(o)!==Xp(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Mn(o[u],l[u])))return!1;return!0}(t,e);default:return fe()}}function vo(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function ni(t,e){if(t===e)return 0;const n=hs(t),r=hs(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=rt(i.integerValue||i.doubleValue),u=rt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Jp(t.timestampValue,e.timestampValue);case 4:return Jp(go(t),go(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(i,o){const l=cs(i),u=cs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=Ne(l[c],u[c]);if(d!==0)return d}return Ne(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ne(rt(i.latitude),rt(o.latitude));return l!==0?l:Ne(rt(i.longitude),rt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,o){const l=i.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const d=ni(l[c],u[c]);if(d)return d}return Ne(l.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===ma.mapValue&&o===ma.mapValue)return 0;if(i===ma.mapValue)return 1;if(o===ma.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let a=0;a<u.length&&a<d.length;++a){const h=Ne(u[a],d[a]);if(h!==0)return h;const f=ni(l[u[a]],c[d[a]]);if(f!==0)return f}return Ne(u.length,d.length)}(t.mapValue,e.mapValue);default:throw fe()}}function Jp(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=xr(t),r=xr(e),s=Ne(n.seconds,r.seconds);return s!==0?s:Ne(n.nanos,r.nanos)}function ri(t){return eh(t)}function eh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=xr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=eh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${eh(n.fields[o])}`;return s+"}"}(t.mapValue):fe()}function nl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function th(t){return!!t&&"integerValue"in t}function Od(t){return!!t&&"arrayValue"in t}function Zp(t){return!!t&&"nullValue"in t}function em(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ka(t){return!!t&&"mapValue"in t}function qi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qi(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qi(t.arrayValue.values[n]);return e}return Object.assign({},t)}function US(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ka(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qi(n)}setAll(e){let n=gt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=qi(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ka(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ka(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){vs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new qt(qi(this.value))}}function fv(t){const e=[];return vs(t.fields,(n,r)=>{const s=new gt([n]);if(ka(r)){const i=fv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new bt(e,0,_e.min(),_e.min(),_e.min(),qt.empty(),0)}static newFoundDocument(e,n,r,s){return new bt(e,1,n,_e.min(),r,s,0)}static newNoDocument(e,n){return new bt(e,2,n,_e.min(),_e.min(),qt.empty(),0)}static newUnknownDocument(e,n){return new bt(e,3,n,_e.min(),_e.min(),qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,n){this.position=e,this.inclusive=n}}function tm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=oe.comparator(oe.fromName(o.referenceValue),n.key):r=ni(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function nm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n="asc"){this.field=e,this.dir=n}}function $S(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{}class st extends pv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jS(e,n,r):n==="array-contains"?new zS(e,r):n==="in"?new GS(e,r):n==="not-in"?new WS(e,r):n==="array-contains-any"?new KS(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qS(e,r):new HS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ni(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(ni(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends pv{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new fn(e,n)}matches(e){return mv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function mv(t){return t.op==="and"}function _v(t){return BS(t)&&mv(t)}function BS(t){for(const e of t.filters)if(e instanceof fn)return!1;return!0}function nh(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+ri(t.value);if(_v(t))return t.filters.map(e=>nh(e)).join(",");{const e=t.filters.map(n=>nh(n)).join(",");return`${t.op}(${e})`}}function gv(t,e){return t instanceof st?function(r,s){return s instanceof st&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)}(t,e):t instanceof fn?function(r,s){return s instanceof fn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&gv(o,s.filters[l]),!0):!1}(t,e):void fe()}function yv(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${ri(n.value)}`}(t):t instanceof fn?function(n){return n.op.toString()+" {"+n.getFilters().map(yv).join(" ,")+"}"}(t):"Filter"}class jS extends st{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class qS extends st{constructor(e,n){super(e,"in",n),this.keys=vv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class HS extends st{constructor(e,n){super(e,"not-in",n),this.keys=vv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class zS extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Od(n)&&vo(n.arrayValue,this.value)}}class GS extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&vo(this.value.arrayValue,n)}}class WS extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!vo(this.value.arrayValue,n)}}class KS extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Od(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>vo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ce=null}}function rm(t,e=null,n=[],r=[],s=null,i=null,o=null){return new QS(t,e,n,r,s,i,o)}function xd(t){const e=ve(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>nh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ru(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ri(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ri(r)).join(",")),e.ce=n}return e.ce}function Dd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$S(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nm(t.startAt,e.startAt)&&nm(t.endAt,e.endAt)}function rh(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function XS(t,e,n,r,s,i,o,l){return new ws(t,e,n,r,s,i,o,l)}function Nd(t){return new ws(t)}function sm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Vd(t){return t.collectionGroup!==null}function Ws(t){const e=ve(t);if(e.le===null){e.le=[];const n=new Set;for(const i of e.explicitOrderBy)e.le.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new vt(gt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.le.push(new wo(i,r))}),n.has(gt.keyField().canonicalString())||e.le.push(new wo(gt.keyField(),r))}return e.le}function kn(t){const e=ve(t);return e.he||(e.he=YS(e,Ws(t))),e.he}function YS(t,e){if(t.limitType==="F")return rm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new wo(s.field,i)});const n=t.endAt?new si(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new si(t.startAt.position,t.startAt.inclusive):null;return rm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sh(t,e){const n=t.filters.concat([e]);return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rl(t,e,n){return new ws(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function iu(t,e){return Dd(kn(t),kn(e))&&t.limitType===e.limitType}function wv(t){return`${xd(kn(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yv(s)).join(", ")}]`),ru(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ri(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ri(s)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function ou(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):oe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ws(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const c=tm(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Ws(r),s)||r.endAt&&!function(o,l,u){const c=tm(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Ws(r),s))}(t,e)}function JS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ev(t){return(e,n)=>{let r=!1;for(const s of Ws(t)){const i=ZS(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function ZS(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),c=l.data.field(i);return u!==null&&c!==null?ni(u,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){vs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return hv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new Ye(oe.comparator);function Xn(){return eR}const Tv=new Ye(oe.comparator);function Di(...t){let e=Tv;for(const n of t)e=e.insert(n.key,n);return e}function bv(t){let e=Tv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Jr(){return Hi()}function Iv(){return Hi()}function Hi(){return new mi(t=>t.toString(),(t,e)=>t.isEqual(e))}const tR=new Ye(oe.comparator),nR=new vt(oe.comparator);function Ie(...t){let e=nR;for(const n of t)e=e.add(n);return e}const rR=new vt(Ne);function sR(){return rR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function Sv(t){return{integerValue:""+t}}function iR(t,e){return MS(e)?Sv(e):Av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(){this._=void 0}}function oR(t,e,n){return t instanceof sl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&su(i)&&(i=kd(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Eo?Pv(t,e):t instanceof To?Cv(t,e):function(s,i){const o=Rv(s,i),l=im(o)+im(s.Ie);return th(o)&&th(s.Ie)?Sv(l):Av(s.serializer,l)}(t,e)}function aR(t,e,n){return t instanceof Eo?Pv(t,e):t instanceof To?Cv(t,e):n}function Rv(t,e){return t instanceof il?function(r){return th(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class sl extends au{}class Eo extends au{constructor(e){super(),this.elements=e}}function Pv(t,e){const n=kv(e);for(const r of t.elements)n.some(s=>Mn(s,r))||n.push(r);return{arrayValue:{values:n}}}class To extends au{constructor(e){super(),this.elements=e}}function Cv(t,e){let n=kv(e);for(const r of t.elements)n=n.filter(s=>!Mn(s,r));return{arrayValue:{values:n}}}class il extends au{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function im(t){return rt(t.integerValue||t.doubleValue)}function kv(t){return Od(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function lR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Eo&&s instanceof Eo||r instanceof To&&s instanceof To?ti(r.elements,s.elements,Mn):r instanceof il&&s instanceof il?Mn(r.Ie,s.Ie):r instanceof sl&&s instanceof sl}(t.transform,e.transform)}class uR{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oa(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class lu{}function Ov(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Md(t.key,sn.none()):new jo(t.key,t.data,sn.none());{const n=t.data,r=qt.empty();let s=new vt(gt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Mr(t.key,r,new Kt(s.toArray()),sn.none())}}function cR(t,e,n){t instanceof jo?function(s,i,o){const l=s.value.clone(),u=am(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Mr?function(s,i,o){if(!Oa(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=am(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(xv(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function zi(t,e,n,r){return t instanceof jo?function(i,o,l,u){if(!Oa(i.precondition,o))return l;const c=i.value.clone(),d=lm(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mr?function(i,o,l,u){if(!Oa(i.precondition,o))return l;const c=lm(i.fieldTransforms,u,o),d=o.data;return d.setAll(xv(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(a=>a.field))}(t,e,n,r):function(i,o,l){return Oa(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function hR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Rv(r.transform,s||null);i!=null&&(n===null&&(n=qt.empty()),n.set(r.field,i))}return n||null}function om(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ti(r,s,(i,o)=>lR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class jo extends lu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Mr extends lu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function am(t,e,n){const r=new Map;qe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,aR(o,l,n[s]))}return r}function lm(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,oR(i,o,e))}return r}class Md extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dR extends lu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&cR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=zi(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Iv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Ov(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ti(this.mutations,e.mutations,(n,r)=>om(n,r))&&ti(this.baseMutations,e.baseMutations,(n,r)=>om(n,r))}}class Ld{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){qe(e.mutations.length===r.length);let s=function(){return tR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ld(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,Se;function _R(t){switch(t){default:return fe();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Dv(t){if(t===void 0)return Vn("GRPC error has no .code"),R.UNKNOWN;switch(t){case nt.OK:return R.OK;case nt.CANCELLED:return R.CANCELLED;case nt.UNKNOWN:return R.UNKNOWN;case nt.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case nt.INTERNAL:return R.INTERNAL;case nt.UNAVAILABLE:return R.UNAVAILABLE;case nt.UNAUTHENTICATED:return R.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case nt.NOT_FOUND:return R.NOT_FOUND;case nt.ALREADY_EXISTS:return R.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return R.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case nt.ABORTED:return R.ABORTED;case nt.OUT_OF_RANGE:return R.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return R.UNIMPLEMENTED;case nt.DATA_LOSS:return R.DATA_LOSS;default:return fe()}}(Se=nt||(nt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=new Gs([4294967295,4294967295],0);function um(t){const e=gR().encode(t),n=new vS;return n.update(e),new Uint8Array(n.digest())}function cm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Gs([n,r],0),new Gs([s,i],0)]}class Fd{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ni(`Invalid padding: ${n}`);if(r<0)throw new Ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ni(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Gs.fromNumber(this.Te)}de(e,n,r){let s=e.add(n.multiply(Gs.fromNumber(r)));return s.compare(yR)===1&&(s=new Gs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=um(e),[r,s]=cm(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Fd(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Te===0)return;const n=um(e),[r,s]=cm(n);for(let i=0;i<this.hashCount;i++){const o=this.de(r,s,i);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ni extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,qo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new uu(_e.min(),s,new Ye(Ne),Xn(),Ie())}}class qo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qo(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,r,s){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=s}}class Nv{constructor(e,n){this.targetId=e,this.fe=n}}class Vv{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hm{constructor(){this.ge=0,this.pe=fm(),this.ye=Ct.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.pe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe()}}),new qo(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=fm()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,qe(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class vR{constructor(e){this.Le=e,this.ke=new Map,this.qe=Xn(),this.Qe=dm(),this.Ke=new Ye(Ne)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,s)=>{this.je(s)&&n(s)})}Je(e){const n=e.targetId,r=e.fe.count,s=this.Ye(n);if(s){const i=s.target;if(rh(i))if(r===0){const o=new oe(i.path);this.We(n,o,bt.newNoDocument(o,_e.min()))}else qe(r===1);else{const o=this.Ze(n);if(o!==r){const l=this.Xe(e),u=l?this.et(l,e,o):1;if(u!==0){this.He(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=cs(r).toUint8Array()}catch(u){if(u instanceof dv)return ei("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Fd(o,s,i)}catch(u){return ei(u instanceof Ni?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Te===0?null:l}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.nt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.We(n,i,null),s++)}),s}it(e){const n=new Map;this.ke.forEach((i,o)=>{const l=this.Ye(o);if(l){if(i.current&&rh(l.target)){const u=new oe(l.target.path);this.qe.get(u)!==null||this.st(o,u)||this.We(o,u,bt.newNoDocument(u,e))}i.De&&(n.set(o,i.ve()),i.Fe())}});let r=Ie();this.Qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Ye(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.qe.forEach((i,o)=>o.setReadTime(e));const s=new uu(e,n,this.Ke,this.qe,r);return this.qe=Xn(),this.Qe=dm(),this.Ke=new Ye(Ne),s}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const s=this.ze(e);this.st(e,n)?s.Me(n,1):s.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new hm,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new vt(Ne),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new hm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function dm(){return new Ye(oe.comparator)}function fm(){return new Ye(oe.comparator)}const wR={asc:"ASCENDING",desc:"DESCENDING"},ER={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TR={and:"AND",or:"OR"};class bR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ih(t,e){return t.useProto3Json||ru(e)?e:{value:e}}function ol(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function IR(t,e){return ol(t,e.toTimestamp())}function On(t){return qe(!!t),_e.fromTimestamp(function(n){const r=xr(n);return new ot(r.seconds,r.nanos)}(t))}function Ud(t,e){return oh(t,e).canonicalString()}function oh(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Lv(t){const e=je.fromString(t);return qe(jv(e)),e}function ah(t,e){return Ud(t.databaseId,e.path)}function ic(t,e){const n=Lv(e);if(n.get(1)!==t.databaseId.projectId)throw new q(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(Uv(n))}function Fv(t,e){return Ud(t.databaseId,e)}function AR(t){const e=Lv(t);return e.length===4?je.emptyPath():Uv(e)}function lh(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Uv(t){return qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function pm(t,e,n){return{name:ah(t,e),fields:n.value.mapValue.fields}}function SR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(qe(d===void 0||typeof d=="string"),Ct.fromBase64String(d||"")):(qe(d===void 0||d instanceof Uint8Array),Ct.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const d=c.code===void 0?R.UNKNOWN:Dv(c.code);return new q(d,c.message||"")}(o);n=new Vv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ic(t,r.document.name),i=On(r.document.updateTime),o=r.document.createTime?On(r.document.createTime):_e.min(),l=new qt({mapValue:{fields:r.document.fields}}),u=bt.newFoundDocument(s,i,o,l),c=r.targetIds||[],d=r.removedTargetIds||[];n=new xa(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ic(t,r.document),i=r.readTime?On(r.readTime):_e.min(),o=bt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new xa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ic(t,r.document),i=r.removedTargetIds||[];n=new xa([],i,s,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new mR(s,i),l=r.targetId;n=new Nv(l,o)}}return n}function RR(t,e){let n;if(e instanceof jo)n={update:pm(t,e.key,e.value)};else if(e instanceof Md)n={delete:ah(t,e.key)};else if(e instanceof Mr)n={update:pm(t,e.key,e.data),updateMask:MR(e.fieldMask)};else{if(!(e instanceof dR))return fe();n={verify:ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof sl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Eo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof To)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof il)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:IR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe()}(t,e.precondition)),n}function PR(t,e){return t&&t.length>0?(qe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?On(s.updateTime):On(i);return o.isEqual(_e.min())&&(o=On(i)),new uR(o,s.transformResults||[])}(n,e))):[]}function CR(t,e){return{documents:[Fv(t,e.path)]}}function kR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Fv(t,s);const i=function(c){if(c.length!==0)return Bv(fn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(h){return{field:Ds(h.field),direction:DR(h.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ih(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:n,parent:s}}function OR(t){let e=AR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){qe(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(a){const h=$v(a);return h instanceof fn&&_v(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(a){return a.map(h=>function(p){return new wo(Ns(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(n.orderBy));let l=null;n.limit&&(l=function(a){let h;return h=typeof a=="object"?a.value:a,ru(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(a){const h=!!a.before,f=a.values||[];return new si(f,h)}(n.startAt));let c=null;return n.endAt&&(c=function(a){const h=!a.before,f=a.values||[];return new si(f,h)}(n.endAt)),XS(e,s,o,i,l,"F",u,c)}function xR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $v(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ns(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ns(n.unaryFilter.field);return st.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ns(n.unaryFilter.field);return st.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ns(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return st.create(Ns(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fn.create(n.compositeFilter.filters.map(r=>$v(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function DR(t){return wR[t]}function NR(t){return ER[t]}function VR(t){return TR[t]}function Ds(t){return{fieldPath:t.canonicalString()}}function Ns(t){return gt.fromServerFormat(t.fieldPath)}function Bv(t){return t instanceof st?function(n){if(n.op==="=="){if(em(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NAN"}};if(Zp(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(em(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NAN"}};if(Zp(n.value))return{unaryFilter:{field:Ds(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ds(n.field),op:NR(n.op),value:n.value}}}(t):t instanceof fn?function(n){const r=n.getFilters().map(s=>Bv(s));return r.length===1?r[0]:{compositeFilter:{op:VR(n.op),filters:r}}}(t):fe()}function MR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,s,i=_e.min(),o=_e.min(),l=Ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.ct=e}}function FR(t){const e=OR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(){this._n=new $R}addToCollectionParentIndex(e,n){return this._n.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(Or.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(Or.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class $R{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new vt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new vt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new ii(0)}static Bn(){return new ii(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.changes=new mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&zi(r.mutation,s,Kt.empty(),ot.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=Jr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Di();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Xn();const o=Hi(),l=function(){return Hi()}();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Mr)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),zi(d.mutation,c,d.mutation.getFieldMask(),ot.now())):o.set(c.key,Kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var a;return l.set(c,new jR(d,(a=o.get(c))!==null&&a!==void 0?a:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Hi();let s=new Ye((o,l)=>o-l),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||Kt.empty();d=l.applyToLocalView(c,d),r.set(u,d);const a=(s.get(l.batchId)||Ie()).add(u);s=s.insert(l.batchId,a)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,a=Iv();d.forEach(h=>{if(!i.has(h)){const f=Ov(n.get(h),r.get(h));f!==null&&a.set(h,f),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,a))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return oe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Vd(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):N.resolve(Jr());let l=-1,u=i;return o.next(c=>N.forEach(c,(d,a)=>(l<a.largestBatchId&&(l=a.largestBatchId),i.get(d)?N.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{u=u.insert(d,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,Ie())).next(d=>({batchId:l,changes:bv(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let s=Di();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Di();return this.indexManager.getCollectionParents(e,i).next(l=>N.forEach(l,u=>{const c=function(a,h){return new ws(h,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((a,h)=>{o=o.insert(a,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,bt.newInvalidDocument(d)))});let l=Di();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&zi(d.mutation,c,Kt.empty(),ot.now()),ou(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return N.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:On(s.createTime)}}(n)),N.resolve()}getNamedQuery(e,n){return N.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(s){return{name:s.name,query:FR(s.bundledQuery),readTime:On(s.readTime)}}(n)),N.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.overlays=new Ye(oe.comparator),this.hr=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Jr();return N.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.hr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.hr.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const s=Jr(),i=n.length+1,o=new oe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return N.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ye((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Jr(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=Jr(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return N.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new pR(n,r));let i=this.hr.get(n);i===void 0&&(i=Ie(),this.hr.set(n,i)),this.hr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(){this.Pr=new vt(ut.Ir),this.Tr=new vt(ut.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ut(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new oe(new je([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.Tr.forEachInRange([r,s],o=>{this.Ar(o),i.push(o.key)}),i}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new oe(new je([])),r=new ut(n,e),s=new ut(n,e+1);let i=Ie();return this.Tr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ut(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return oe.comparator(e.key,n.key)||Ne(e.pr,n.pr)}static Er(e,n){return Ne(e.pr,n.pr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new vt(ut.Ir)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fR(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.wr=this.wr.add(new ut(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.br(r),i=s<0?0:s;return N.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([r,s],o=>{const l=this.Sr(o.pr);i.push(l)}),N.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Ne);return n.forEach(s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([i,o],l=>{r=r.add(l.pr)})}),N.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;oe.isDocumentKey(i)||(i=i.child(""));const o=new ut(new oe(i),0);let l=new vt(Ne);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.pr)),!0)},o),N.resolve(this.Dr(l))}Dr(e){const n=[];return e.forEach(r=>{const s=this.Sr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){qe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return N.forEach(n.mutations,s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new ut(n,0),s=this.wr.firstAfterOrEqual(r);return N.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.vr=e,this.docs=function(){return new Ye(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(n))}getEntries(e,n){let r=Xn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():bt.newInvalidDocument(s))}),N.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xn();const o=n.path,l=new oe(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||OS(kS(d),r)<=0||(s.has(d.key)||ou(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return N.resolve(i)}getAllFromCollectionGroup(e,n,r,s){fe()}Fr(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KR(this)}getSize(e){return N.resolve(this.size)}}class KR extends BR{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.persistence=e,this.Mr=new mi(n=>xd(n),Dd),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Or=0,this.Nr=new $d,this.targetCount=0,this.Br=ii.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,s)=>n(s)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),N.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new ii(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.qn(n),N.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),N.waitFor(i).next(()=>s)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),N.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Cd(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new QR(this),this.indexManager=new UR,this.remoteDocumentCache=function(s){return new WR(s)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new LR(n),this.$r=new HR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new zR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new GR(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);const s=new YR(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(i=>this.referenceDelegate.Wr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Gr(e,n){return N.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class YR extends DS{constructor(e){super(),this.currentSequenceNumber=e}}class Bd{constructor(e){this.persistence=e,this.zr=new $d,this.jr=null}static Hr(e){return new Bd(e)}get Jr(){if(this.jr)return this.jr;throw fe()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),N.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Jr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Jr,r=>{const s=oe.fromPath(r);return this.Yr(e,s).next(i=>{i||n.removeEntry(s,_e.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return N.or([()=>N.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=s}static Ki(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new jd(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Jb()?8:Yr.v(it())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ji(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Hi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new JR;return this.Ji(e,n,o).next(l=>{if(i.result=l,this.Ui)return this.Yi(e,n,o,l.size)})}).next(()=>i.result)}Yi(e,n,r,s){return r.documentReadCount<this.Wi?(Ai()<=Ae.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),N.resolve()):(Ai()<=Ae.DEBUG&&G("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Ai()<=Ae.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):N.resolve())}ji(e,n){if(sm(n))return N.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=rl(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ie(...i);return this.zi.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Zi(n,l);return this.Xi(n,c,o,u.readTime)?this.ji(e,rl(n,null,"F")):this.es(e,c,n,u)}))})))}Hi(e,n,r,s){return sm(n)||s.isEqual(_e.min())?N.resolve(null):this.zi.getDocuments(e,r).next(i=>{const o=this.Zi(n,i);return this.Xi(n,o,r,s)?N.resolve(null):(Ai()<=Ae.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xs(n)),this.es(e,o,n,CS(s,-1)).next(l=>l))})}Zi(e,n){let r=new vt(Ev(e));return n.forEach((s,i)=>{ou(e,i)&&(r=r.add(i))}),r}Xi(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ji(e,n,r){return Ai()<=Ae.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",xs(n)),this.zi.getDocumentsMatchingQuery(e,n,Or.min(),r)}es(e,n,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,n,r,s){this.persistence=e,this.ts=n,this.serializer=s,this.ns=new Ye(Ne),this.rs=new mi(i=>xd(i),Dd),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qR(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function tP(t,e,n,r){return new eP(t,e,n,r)}async function qv(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=Ie();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function nP(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const a=c.batch,h=a.keys();let f=N.resolve();return h.forEach(p=>{f=f.next(()=>d.getEntry(u,p)).next(_=>{const m=c.docVersions.get(p);qe(m!==null),_.version.compareTo(m)<0&&(a.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),d.addEntry(_)))})}),f.next(()=>l.mutationQueue.removeMutationBatch(u,a))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=Ie();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Hv(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function rP(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;const l=[];e.targetChanges.forEach((d,a)=>{const h=s.get(a);if(!h)return;l.push(n.Qr.removeMatchingKeys(i,d.removedDocuments,a).next(()=>n.Qr.addMatchingKeys(i,d.addedDocuments,a)));let f=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(a)!==null?f=f.withResumeToken(Ct.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,r)),s=s.insert(a,f),function(_,m,g){return _.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(h,f,d)&&l.push(n.Qr.updateTargetData(i,f))});let u=Xn(),c=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(sP(i,o,e.documentUpdates).next(d=>{u=d.cs,c=d.ls})),!r.isEqual(_e.min())){const d=n.Qr.getLastRemoteSnapshotVersion(i).next(a=>n.Qr.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return N.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.ns=s,i))}function sP(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Xn();return n.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(_e.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:s}})}function iP(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function oP(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Qr.getTargetData(r,e).next(i=>i?(s=i,N.resolve(s)):n.Qr.allocateTargetId(r).next(o=>(s=new vr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.ns.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function uh(t,e,n){const r=ve(t),s=r.ns.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Bo(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)}function mm(t,e,n){const r=ve(t);let s=_e.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const a=ve(u),h=a.rs.get(d);return h!==void 0?N.resolve(a.ns.get(h)):a.Qr.getTargetData(c,d)}(r,o,kn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?s:_e.min(),n?i:Ie())).next(l=>(aP(r,JS(e),l),{documents:l,hs:i})))}function aP(t,e,n){let r=t.ss.get(e)||_e.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.ss.set(e,r)}class _m{constructor(){this.activeTargetIds=sR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lP{constructor(){this.no=new _m,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new _m,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _a=null;function oc(){return _a===null?_a=function(){return 268435456+Math.round(2147483648*Math.random())}():_a++,"0x"+_a.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et="WebChannelConnection";class dP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${s}/databases/${i}`,this.yo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get wo(){return!1}So(n,r,s,i,o){const l=oc(),u=this.bo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,i,o),this.Co(n,u,c,s).then(d=>(G("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw ei("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",u,"request:",s),d})}vo(n,r,s,i,o,l){return this.So(n,r,s,i,o)}Do(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}bo(n,r){const s=cP[n];return`${this.fo}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,s){const i=oc();return new Promise((o,l)=>{const u=new yS;u.setWithCredentials(!0),u.listenOnce(_S.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sc.NO_ERROR:const d=u.getResponseJson();G(Et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case sc.TIMEOUT:G(Et,`RPC '${e}' ${i} timed out`),l(new q(R.DEADLINE_EXCEEDED,"Request time out"));break;case sc.HTTP_ERROR:const a=u.getStatus();if(G(Et,`RPC '${e}' ${i} failed with status:`,a,"response text:",u.getResponseText()),a>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const p=function(m){const g=m.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(g)>=0?g:R.UNKNOWN}(f.status);l(new q(p,f.message))}else l(new q(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(R.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{G(Et,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);G(Et,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Fo(e,n,r){const s=oc(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pS(),l=mS(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");G(Et,`Creating RPC '${e}' stream ${s}: ${d}`,u);const a=o.createWebChannel(d,u);let h=!1,f=!1;const p=new hP({lo:m=>{f?G(Et,`Not sending because RPC '${e}' stream ${s} is closed:`,m):(h||(G(Et,`Opening RPC '${e}' stream ${s} transport.`),a.open(),h=!0),G(Et,`RPC '${e}' stream ${s} sending:`,m),a.send(m))},ho:()=>a.close()}),_=(m,g,T)=>{m.listen(g,I=>{try{T(I)}catch(S){setTimeout(()=>{throw S},0)}})};return _(a,fa.EventType.OPEN,()=>{f||G(Et,`RPC '${e}' stream ${s} transport opened.`)}),_(a,fa.EventType.CLOSE,()=>{f||(f=!0,G(Et,`RPC '${e}' stream ${s} transport closed`),p.Vo())}),_(a,fa.EventType.ERROR,m=>{f||(f=!0,ei(Et,`RPC '${e}' stream ${s} transport errored:`,m),p.Vo(new q(R.UNAVAILABLE,"The operation could not be completed")))}),_(a,fa.EventType.MESSAGE,m=>{var g;if(!f){const T=m.data[0];qe(!!T);const I=T,S=I.error||((g=I[0])===null||g===void 0?void 0:g.error);if(S){G(Et,`RPC '${e}' stream ${s} received error:`,S);const L=S.status;let x=function(O){const X=nt[O];if(X!==void 0)return Dv(X)}(L),Y=S.message;x===void 0&&(x=R.INTERNAL,Y="Unknown error status: "+L+" with message "+S.message),f=!0,p.Vo(new q(x,Y)),a.close()}else G(Et,`RPC '${e}' stream ${s} received:`,T),p.mo(T)}}),_(l,gS.STAT_EVENT,m=>{m.stat===Wp.PROXY?G(Et,`RPC '${e}' stream ${s} detected buffering proxy`):m.stat===Wp.NOPROXY&&G(Et,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{p.Ro()},0),p}}function ac(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){return new bR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=s,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),s=Math.max(0,n-r);s>0&&G("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n,r,s,i,o,l,u){this.oi=e,this.$o=r,this.Uo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new zv(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===R.RESOURCE_EXHAUSTED?(Vn(n.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Wo===n&&this.o_(r,s)},r=>{e(()=>{const s=new q(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(s)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(s=>{r(()=>this.__(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fP extends Gv{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=SR(this.serializer,e),r=function(i){if(!("targetChange"in i))return _e.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?On(o.readTime):_e.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=lh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=rh(u)?{documents:CR(i,u)}:{query:kR(i,u).ut},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Mv(i,o.resumeToken);const c=ih(i,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(_e.min())>0){l.readTime=ol(i,o.snapshotVersion.toTimestamp());const c=ih(i,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=xR(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=lh(this.serializer),n.removeTarget=e,this.t_(n)}}class pP extends Gv{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=PR(e.writeResults,e.commitTime),r=On(e.commitTime);return this.listener.T_(r,n)}return qe(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=lh(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>RR(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.A_=!1}R_(){if(this.A_)throw new q(R.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.So(e,oh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(R.UNKNOWN,i.toString())})}vo(e,n,r,s,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.vo(e,oh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(R.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class _P{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Vn(n),this.g_=!1):G("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io(o=>{r.enqueueAndForget(async()=>{Es(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ve(u);c.v_.add(4),await Ho(c),c.x_.set("Unknown"),c.v_.delete(4),await hu(c)}(this))})}),this.x_=new _P(r,s)}}async function hu(t){if(Es(t))for(const e of t.F_)await e(!0)}async function Ho(t){for(const e of t.F_)await e(!1)}function Wv(t,e){const n=ve(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),zd(n)?Hd(n):_i(n).Jo()&&qd(n,e))}function Kv(t,e){const n=ve(t),r=_i(n);n.C_.delete(e),r.Jo()&&Qv(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Es(n)&&n.x_.set("Unknown"))}function qd(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_i(t).c_(e)}function Qv(t,e){t.O_.Oe(e),_i(t).l_(e)}function Hd(t){t.O_=new vR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),_i(t).start(),t.x_.p_()}function zd(t){return Es(t)&&!_i(t).Ho()&&t.C_.size>0}function Es(t){return ve(t).v_.size===0}function Xv(t){t.O_=void 0}async function yP(t){t.C_.forEach((e,n)=>{qd(t,e)})}async function vP(t,e){Xv(t),zd(t)?(t.x_.S_(e),Hd(t)):t.x_.set("Unknown")}async function wP(t,e,n){if(t.x_.set("Online"),e instanceof Vv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.C_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.C_.delete(l),s.O_.removeTarget(l))}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await al(t,r)}else if(e instanceof xa?t.O_.$e(e):e instanceof Nv?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(_e.min()))try{const r=await Hv(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.O_.it(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.C_.get(c);d&&i.C_.set(c,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const d=i.C_.get(u);if(!d)return;i.C_.set(u,d.withResumeToken(Ct.EMPTY_BYTE_STRING,d.snapshotVersion)),Qv(i,u);const a=new vr(d.target,u,c,d.sequenceNumber);qd(i,a)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){G("RemoteStore","Failed to raise snapshot:",r),await al(t,r)}}async function al(t,e,n){if(!Bo(e))throw e;t.v_.add(1),await Ho(t),t.x_.set("Offline"),n||(n=()=>Hv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await hu(t)})}function Yv(t,e){return e().catch(n=>al(t,n,e))}async function du(t){const e=ve(t),n=Dr(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;EP(e);)try{const s=await iP(e.localStore,r);if(s===null){e.D_.length===0&&n.Xo();break}r=s.batchId,TP(e,s)}catch(s){await al(e,s)}Jv(e)&&Zv(e)}function EP(t){return Es(t)&&t.D_.length<10}function TP(t,e){t.D_.push(e);const n=Dr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Jv(t){return Es(t)&&!Dr(t).Ho()&&t.D_.length>0}function Zv(t){Dr(t).start()}async function bP(t){Dr(t).d_()}async function IP(t){const e=Dr(t);for(const n of t.D_)e.I_(n.mutations)}async function AP(t,e,n){const r=t.D_.shift(),s=Ld.from(r,e,n);await Yv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await du(t)}async function SP(t,e){e&&Dr(t).P_&&await async function(r,s){if(function(o){return _R(o)&&o!==R.ABORTED}(s.code)){const i=r.D_.shift();Dr(r).Zo(),await Yv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await du(r)}}(t,e),Jv(t)&&Zv(t)}async function ym(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const r=Es(n);n.v_.add(3),await Ho(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await hu(n)}async function RP(t,e){const n=ve(t);e?(n.v_.delete(2),await hu(n)):e||(n.v_.add(2),await Ho(n),n.x_.set("Unknown"))}function _i(t){return t.N_||(t.N_=function(n,r,s){const i=ve(n);return i.R_(),new fP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:yP.bind(null,t),To:vP.bind(null,t),u_:wP.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),zd(t)?Hd(t):t.x_.set("Unknown")):(await t.N_.stop(),Xv(t))})),t.N_}function Dr(t){return t.B_||(t.B_=function(n,r,s){const i=ve(n);return i.R_(),new pP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Po:bP.bind(null,t),To:SP.bind(null,t),E_:IP.bind(null,t),T_:AP.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await du(t)):(await t.B_.stop(),t.D_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Gd(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wd(t,e){if(Vn("AsyncQueue",`${e}: ${t}`),Bo(t))return new q(R.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=Di(),this.sortedSet=new Ye(this.comparator)}static emptySet(e){return new Ks(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(){this.L_=new Ye(oe.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):fe():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class oi{constructor(e,n,r,s,i,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new oi(e,n,Ks.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.q_=void 0,this.Q_=[]}}class CP{constructor(){this.queries=new mi(e=>wv(e),iu),this.onlineState="Unknown",this.K_=new Set}}async function e0(t,e){const n=ve(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new PP),s)try{i.q_=await n.onListen(r)}catch(o){const l=Wd(o,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Q_.push(e),e.U_(n.onlineState),i.q_&&e.W_(i.q_)&&Kd(n)}async function t0(t,e){const n=ve(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.Q_.indexOf(e);o>=0&&(i.Q_.splice(o,1),s=i.Q_.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function kP(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Q_)l.W_(s)&&(r=!0);o.q_=s}}r&&Kd(n)}function OP(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.Q_)i.onError(n);r.queries.delete(e)}function Kd(t){t.K_.forEach(e=>{e.next()})}class n0{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.key=e}}class s0{constructor(e){this.key=e}}class xP{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Ie(),this.mutatedKeys=Ie(),this.ua=Ev(e),this.ca=new Ks(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new vm,s=n?n.ca:this.ca;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,a)=>{const h=s.get(d),f=ou(this.query,a)?a:null,p=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let m=!1;h&&f?h.data.isEqual(f.data)?p!==_&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(u&&this.ua(f,u)>0||c&&this.ua(f,c)<0)&&(l=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(u||c)&&(l=!0)),m&&(f?(o=o.add(f),i=_?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{ca:o,Pa:r,Xi:l,mutatedKeys:i}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((d,a)=>function(f,p){const _=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return _(f)-_(p)}(d.type,a.type)||this.ua(d.doc,a.doc)),this.Ta(r),s=s!=null&&s;const l=n&&!s?this.Ea():[],u=this.aa.size===0&&this.current&&!s?1:0,c=u!==this._a;return this._a=u,o.length!==0||c?{snapshot:new oi(this.query,e.ca,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:l}:{da:l}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new vm,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Ie(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new s0(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new r0(r))}),n}Ra(e){this.oa=e.hs,this.aa=Ie();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return oi.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class DP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class NP{constructor(e){this.key=e,this.ma=!1}}class VP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new mi(l=>wv(l),iu),this.pa=new Map,this.ya=new Set,this.wa=new Ye(oe.comparator),this.Sa=new Map,this.ba=new $d,this.Da={},this.Ca=new Map,this.va=ii.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function MP(t,e){const n=GP(t);let r,s;const i=n.ga.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.Va();else{const o=await oP(n.localStore,kn(e)),l=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await LP(n,e,r,l==="current",o.resumeToken),n.isPrimaryClient&&Wv(n.remoteStore,o)}return s}async function LP(t,e,n,r,s){t.Ma=(a,h,f)=>async function(_,m,g,T){let I=m.view.ha(g);I.Xi&&(I=await mm(_.localStore,m.query,!1).then(({documents:Y})=>m.view.ha(Y,I)));const S=T&&T.targetChanges.get(m.targetId),L=T&&T.targetMismatches.get(m.targetId)!=null,x=m.view.applyChanges(I,_.isPrimaryClient,S,L);return Em(_,m.targetId,x.da),x.snapshot}(t,a,h,f);const i=await mm(t.localStore,e,!0),o=new xP(e,i.hs),l=o.ha(i.documents),u=qo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);Em(t,n,c.da);const d=new DP(e,n,o);return t.ga.set(e,d),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}async function FP(t,e){const n=ve(t),r=n.ga.get(e),s=n.pa.get(r.targetId);if(s.length>1)return n.pa.set(r.targetId,s.filter(i=>!iu(i,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await uh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Kv(n.remoteStore,r.targetId),ch(n,r.targetId)}).catch($o)):(ch(n,r.targetId),await uh(n.localStore,r.targetId,!0))}async function UP(t,e,n){const r=WP(t);try{const s=await function(o,l){const u=ve(o),c=ot.now(),d=l.reduce((f,p)=>f.add(p.key),Ie());let a,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=Xn(),_=Ie();return u.os.getEntries(f,d).next(m=>{p=m,p.forEach((g,T)=>{T.isValidDocument()||(_=_.add(g))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,p)).next(m=>{a=m;const g=[];for(const T of l){const I=hR(T,a.get(T.key).overlayedDocument);I!=null&&g.push(new Mr(T.key,I,fv(I.value.mapValue),sn.exists(!0)))}return u.mutationQueue.addMutationBatch(f,c,g,l)}).next(m=>{h=m;const g=m.applyToLocalDocumentSet(a,_);return u.documentOverlayCache.saveOverlays(f,m.batchId,g)})}).then(()=>({batchId:h.batchId,changes:bv(a)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Da[o.currentUser.toKey()];c||(c=new Ye(Ne)),c=c.insert(l,u),o.Da[o.currentUser.toKey()]=c}(r,s.batchId,n),await zo(r,s.changes),await du(r.remoteStore)}catch(s){const i=Wd(s,"Failed to persist write");n.reject(i)}}async function i0(t,e){const n=ve(t);try{const r=await rP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Sa.get(i);o&&(qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.ma=!0:s.modifiedDocuments.size>0?qe(o.ma):s.removedDocuments.size>0&&(qe(o.ma),o.ma=!1))}),await zo(n,r,e)}catch(r){await $o(r)}}function wm(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ga.forEach((i,o)=>{const l=o.view.U_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ve(o);u.onlineState=l;let c=!1;u.queries.forEach((d,a)=>{for(const h of a.Q_)h.U_(l)&&(c=!0)}),c&&Kd(u)}(r.eventManager,e),s.length&&r.fa.u_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $P(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Sa.get(e),i=s&&s.key;if(i){let o=new Ye(oe.comparator);o=o.insert(i,bt.newNoDocument(i,_e.min()));const l=Ie().add(i),u=new uu(_e.min(),new Map,new Ye(Ne),o,l);await i0(r,u),r.wa=r.wa.remove(i),r.Sa.delete(e),Qd(r)}else await uh(r.localStore,e,!1).then(()=>ch(r,e,n)).catch($o)}async function BP(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await nP(n.localStore,e);a0(n,r,null),o0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zo(n,s)}catch(s){await $o(s)}}async function jP(t,e,n){const r=ve(t);try{const s=await function(o,l){const u=ve(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(a=>(qe(a!==null),d=a.keys(),u.mutationQueue.removeMutationBatch(c,a))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);a0(r,e,n),o0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zo(r,s)}catch(s){await $o(s)}}function o0(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function a0(t,e,n){const r=ve(t);let s=r.Da[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Da[r.currentUser.toKey()]=s}}function ch(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||l0(t,r)})}function l0(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(Kv(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Qd(t))}function Em(t,e,n){for(const r of n)r instanceof r0?(t.ba.addReference(r.key,e),qP(t,r)):r instanceof s0?(G("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||l0(t,r.key)):fe()}function qP(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(G("SyncEngine","New document in limbo: "+n),t.ya.add(r),Qd(t))}function Qd(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new oe(je.fromString(e)),r=t.va.next();t.Sa.set(r,new NP(n)),t.wa=t.wa.insert(n,r),Wv(t.remoteStore,new vr(kn(Nd(n.path)),r,"TargetPurposeLimboResolution",Cd._e))}}async function zo(t,e,n){const r=ve(t),s=[],i=[],o=[];r.ga.isEmpty()||(r.ga.forEach((l,u)=>{o.push(r.Ma(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c!=null&&c.fromCache?"not-current":"current"),c){s.push(c);const d=jd.Ki(u.targetId,c);i.push(d)}}))}),await Promise.all(o),r.fa.u_(s),await async function(u,c){const d=ve(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",a=>N.forEach(c,h=>N.forEach(h.qi,f=>d.persistence.referenceDelegate.addReference(a,h.targetId,f)).next(()=>N.forEach(h.Qi,f=>d.persistence.referenceDelegate.removeReference(a,h.targetId,f)))))}catch(a){if(!Bo(a))throw a;G("LocalStore","Failed to update sequence numbers: "+a)}for(const a of c){const h=a.targetId;if(!a.fromCache){const f=d.ns.get(h),p=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(p);d.ns=d.ns.insert(h,_)}}}(r.localStore,i))}async function HP(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());const r=await qv(n.localStore,e);n.currentUser=e,function(i,o){i.Ca.forEach(l=>{l.forEach(u=>{u.reject(new q(R.CANCELLED,o))})}),i.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zo(n,r.us)}}function zP(t,e){const n=ve(t),r=n.Sa.get(e);if(r&&r.ma)return Ie().add(r.key);{let s=Ie();const i=n.pa.get(e);if(!i)return s;for(const o of i){const l=n.ga.get(o);s=s.unionWith(l.view.la)}return s}}function GP(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$P.bind(null,e),e.fa.u_=kP.bind(null,e.eventManager),e.fa.xa=OP.bind(null,e.eventManager),e}function WP(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jP.bind(null,e),e}class Tm{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=cu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return tP(this.persistence,new ZR,e.initialUser,this.serializer)}createPersistence(e){return new XR(Bd.Hr,this.serializer)}createSharedClientState(e){return new lP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class KP{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HP.bind(null,this.syncEngine),await RP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CP}()}createDatastore(e){const n=cu(e.databaseInfo.databaseId),r=function(i){return new dP(i)}(e.databaseInfo);return function(i,o,l,u){return new mP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new gP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>wm(this.syncEngine,n,0),function(){return gm.D()?new gm:new uP}())}createSyncEngine(e,n){return function(s,i,o,l,u,c,d){const a=new VP(s,i,o,l,u,c);return d&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const s=ve(r);G("RemoteStore","RemoteStore shutting down."),s.v_.add(5),await Ho(s),s.M_.shutdown(),s.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Tt.UNAUTHENTICATED,this.clientId=cv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{G("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(G("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wd(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function lc(t,e){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await qv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await YP(t);G("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ym(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>ym(e.remoteStore,s)),t._onlineComponents=e}function XP(t){return t.name==="FirebaseError"?t.code===R.FAILED_PRECONDITION||t.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function YP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await lc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!XP(n))throw n;ei("Error using user provided cache. Falling back to memory cache: "+n),await lc(t,new Tm)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await lc(t,new Tm);return t._offlineComponents}async function c0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await bm(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await bm(t,new KP))),t._onlineComponents}function JP(t){return c0(t).then(e=>e.syncEngine)}async function h0(t){const e=await c0(t),n=e.eventManager;return n.onListen=MP.bind(null,e.syncEngine),n.onUnlisten=FP.bind(null,e.syncEngine),n}function ZP(t,e,n={}){const r=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const d=new u0({next:h=>{o.enqueueAndForget(()=>t0(i,a));const f=h.docs.has(l);!f&&h.fromCache?c.reject(new q(R.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?c.reject(new q(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),a=new n0(Nd(l.path),d,{includeMetadataChanges:!0,Z_:!0});return e0(i,a)}(await h0(t),t.asyncQueue,e,n,r)),r.promise}function eC(t,e,n={}){const r=new Cn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const d=new u0({next:h=>{o.enqueueAndForget(()=>t0(i,a)),h.fromCache&&u.source==="server"?c.reject(new q(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),a=new n0(l,d,{includeMetadataChanges:!0,Z_:!0});return e0(i,a)}(await h0(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(t,e,n){if(!n)throw new q(R.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tC(t,e,n,r){if(e===!0&&r===!0)throw new q(R.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Am(t){if(!oe.isDocumentKey(t))throw new q(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sm(t){if(oe.isDocumentKey(t))throw new q(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function fu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fu(t);throw new q(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function nC(t,e){if(e<=0)throw new q(R.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=d0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(R.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wS;switch(r.type){case"firstParty":return new IS(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Im.get(n);r&&(G("ComponentProvider","Removing Datastore"),Im.delete(n),r.terminate())}(this),Promise.resolve()}}function rC(t,e,n,r={}){var s;const i=(t=pn(t,pu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ei("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Tt.MOCK_USER;else{l=Zg(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tt(c)}t._authCredentials=new ES(new uv(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zn(this.firestore,e,this._query)}}class Nt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Nt(this.firestore,e,this._key)}}class Ar extends Zn{constructor(e,n,r){super(e,n,Nd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Nt(this.firestore,null,new oe(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function Xd(t,e,...n){if(t=Xe(t),f0("collection","path",e),t instanceof pu){const r=je.fromString(e,...n);return Sm(r),new Ar(t,null,r)}{if(!(t instanceof Nt||t instanceof Ar))throw new q(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Sm(r),new Ar(t.firestore,null,r)}}function p0(t,e,...n){if(t=Xe(t),arguments.length===1&&(e=cv.newId()),f0("doc","path",e),t instanceof pu){const r=je.fromString(e,...n);return Am(r),new Nt(t,null,new oe(r))}{if(!(t instanceof Nt||t instanceof Ar))throw new q(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Am(r),new Nt(t.firestore,t instanceof Ar?t.converter:null,new oe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new zv(this,"async_queue_retry"),this._u=()=>{const n=ac();n&&G("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=ac();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=ac();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new Cn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Bo(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Vn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const s=Gd.createAndSchedule(this,e,n,r,i=>this.lu(i));return this.nu.push(s),s}au(){this.ru&&fe()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}class Ts extends pu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new sC}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||m0(this),this._firestoreClient.terminate()}}function iC(t,e){const n=typeof t=="object"?t:rd(),r=typeof t=="string"?t:e||"(default)",s=$l(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Xg("firestore");i&&rC(s,...i)}return s}function Yd(t){return t._firestoreClient||m0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function m0(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,c,d){return new FS(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d0(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new QP(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ai(Ct.fromBase64String(e))}catch(n){throw new q(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ai(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=/^__.*__$/;class aC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms):new jo(e,this.data,n,this.fieldTransforms)}}class _0{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Mr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function g0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class ef{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new ef(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.mu(e),s}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Au({path:r,Vu:!1});return s.Eu(),s}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return ll(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(g0(this.du)&&oC.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class lC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||cu(e)}Su(e,n,r,s=!1){return new ef({du:e,methodName:n,wu:r,path:gt.emptyPath(),Vu:!1,yu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Go(t){const e=t._freezeSettings(),n=cu(t._databaseId);return new lC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function y0(t,e,n,r,s,i={}){const o=t.Su(i.merge||i.mergeFields?2:0,e,n,s);tf("Data must be an object, but it was:",o,r);const l=w0(r,o);let u,c;if(i.merge)u=new Kt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const a of i.mergeFields){const h=hh(e,a,n);if(!o.contains(h))throw new q(R.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);T0(d,h)||d.push(h)}u=new Kt(d),c=o.fieldTransforms.filter(a=>u.covers(a.field))}else u=null,c=o.fieldTransforms;return new aC(new qt(l),u,c)}class _u extends Jd{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _u}}function uC(t,e,n,r){const s=t.Su(1,e,n);tf("Data must be an object, but it was:",s,r);const i=[],o=qt.empty();vs(r,(u,c)=>{const d=nf(e,u,n);c=Xe(c);const a=s.fu(d);if(c instanceof _u)i.push(d);else{const h=Wo(c,a);h!=null&&(i.push(d),o.set(d,h))}});const l=new Kt(i);return new _0(o,l,s.fieldTransforms)}function cC(t,e,n,r,s,i){const o=t.Su(1,e,n),l=[hh(e,r,n)],u=[s];if(i.length%2!=0)throw new q(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)l.push(hh(e,i[h])),u.push(i[h+1]);const c=[],d=qt.empty();for(let h=l.length-1;h>=0;--h)if(!T0(c,l[h])){const f=l[h];let p=u[h];p=Xe(p);const _=o.fu(f);if(p instanceof _u)c.push(f);else{const m=Wo(p,_);m!=null&&(c.push(f),d.set(f,m))}}const a=new Kt(c);return new _0(d,a,o.fieldTransforms)}function v0(t,e,n,r=!1){return Wo(n,t.Su(r?4:3,e))}function Wo(t,e){if(E0(t=Xe(t)))return tf("Unsupported field value:",e,t),w0(t,e);if(t instanceof Jd)return function(r,s){if(!g0(s.du))throw s.pu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.pu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Wo(l,s.gu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ot.fromDate(r);return{timestampValue:ol(s.serializer,i)}}if(r instanceof ot){const i=new ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ol(s.serializer,i)}}if(r instanceof Zd)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ai)return{bytesValue:Mv(s.serializer,r._byteString)};if(r instanceof Nt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ud(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.pu(`Unsupported field value: ${fu(r)}`)}(t,e)}function w0(t,e){const n={};return hv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vs(t,(r,s)=>{const i=Wo(s,e.Ru(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function E0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Zd||t instanceof ai||t instanceof Nt||t instanceof Jd)}function tf(t,e,n){if(!E0(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=fu(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function hh(t,e,n){if((e=Xe(e))instanceof mu)return e._internalPath;if(typeof e=="string")return nf(t,e);throw ll("Field path arguments must be of type string or ",t,!1,void 0,n)}const hC=new RegExp("[~\\*/\\[\\]]");function nf(t,e,n){if(e.search(hC)>=0)throw ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new mu(...e.split("."))._internalPath}catch{throw ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ll(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new q(R.INVALID_ARGUMENT,l+t+u)}function T0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Nt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dC extends rf{data(){return super.data()}}function gu(t,e){return typeof e=="string"?nf(t,e):e instanceof mu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sf{}class yu extends sf{}function cM(t,e,...n){let r=[];e instanceof sf&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof of).length,l=i.filter(u=>u instanceof vu).length;if(o>1||o>0&&l>0)throw new q(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class vu extends yu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new vu(e,n,r)}_apply(e){const n=this._parse(e);return b0(e._query,n),new Zn(e.firestore,e.converter,sh(e._query,n))}_parse(e){const n=Go(e.firestore);return function(i,o,l,u,c,d,a){let h;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Cm(a,d);const f=[];for(const p of a)f.push(Pm(u,i,p));h={arrayValue:{values:f}}}else h=Pm(u,i,a)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Cm(a,d),h=v0(l,o,a,d==="in"||d==="not-in");return st.create(c,d,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hM(t,e,n){const r=e,s=gu("where",t);return vu._create(s,r,n)}class of extends sf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new of(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)b0(o,u),o=sh(o,u)}(e._query,n),new Zn(e.firestore,e.converter,sh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class af extends yu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new af(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wo(i,o)}(e._query,this._field,this._direction);return new Zn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ws(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function dM(t,e="asc"){const n=e,r=gu("orderBy",t);return af._create(r,n)}class lf extends yu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lf(e,n,r)}_apply(e){return new Zn(e.firestore,e.converter,rl(e._query,this._limit,this._limitType))}}function fM(t){return nC("limit",t),lf._create("limit",t,"F")}class uf extends yu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new uf(e,n,r)}_apply(e){const n=pC(e,this.type,this._docOrFields,this._inclusive);return new Zn(e.firestore,e.converter,function(s,i){return new ws(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function pM(...t){return uf._create("startAfter",t,!1)}function pC(t,e,n,r){if(n[0]=Xe(n[0]),n[0]instanceof rf)return function(i,o,l,u,c){if(!u)throw new q(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const a of Ws(i))if(a.field.isKeyField())d.push(nl(o,u.key));else{const h=u.data.field(a.field);if(su(h))throw new q(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=a.field.canonicalString();throw new q(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}d.push(h)}return new si(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Go(t.firestore);return function(o,l,u,c,d,a){const h=o.explicitOrderBy;if(d.length>h.length)throw new q(R.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<d.length;p++){const _=d[p];if(h[p].field.isKeyField()){if(typeof _!="string")throw new q(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof _}`);if(!Vd(o)&&_.indexOf("/")!==-1)throw new q(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${_}' contains a slash.`);const m=o.path.child(je.fromString(_));if(!oe.isDocumentKey(m))throw new q(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);const g=new oe(m);f.push(nl(l,g))}else{const m=v0(u,c,_);f.push(m)}}return new si(f,a)}(t._query,t.firestore._databaseId,s,e,n,r)}}function Pm(t,e,n){if(typeof(n=Xe(n))=="string"){if(n==="")throw new q(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Vd(e)&&n.indexOf("/")!==-1)throw new q(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!oe.isDocumentKey(r))throw new q(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nl(t,new oe(r))}if(n instanceof Nt)return nl(t,n._key);throw new q(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fu(n)}.`)}function Cm(t,e){if(!Array.isArray(t)||t.length===0)throw new q(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b0(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mC{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return vs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Zd(rt(e.latitude),rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(go(e));default:return null}}convertTimestamp(e){const n=xr(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);qe(jv(r));const s=new yo(r.get(1),r.get(3)),i=new oe(r.popFirst(5));return s.isEqual(n)||Vn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A0 extends rf{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Da(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Da extends A0{data(e={}){return super.data(e)}}class _C{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Da(this._firestore,this._userDataWriter,r.key,r,new Vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Da(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Da(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:gC(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mM(t){t=pn(t,Nt);const e=pn(t.firestore,Ts);return ZP(Yd(e),t._key).then(n=>vC(e,t,n))}class S0 extends mC{constructor(e){super(),this.firestore=e}convertBytes(e){return new ai(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Nt(this.firestore,null,n)}}function _M(t){t=pn(t,Zn);const e=pn(t.firestore,Ts),n=Yd(e),r=new S0(e);return fC(t._query),eC(n,t._query).then(s=>new _C(e,r,t,s))}function yC(t,e,n){t=pn(t,Nt);const r=pn(t.firestore,Ts),s=I0(t.converter,e,n);return wu(r,[y0(Go(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sn.none())])}function gM(t,e,n,...r){t=pn(t,Nt);const s=pn(t.firestore,Ts),i=Go(s);let o;return o=typeof(e=Xe(e))=="string"||e instanceof mu?cC(i,"updateDoc",t._key,e,n,r):uC(i,"updateDoc",t._key,e),wu(s,[o.toMutation(t._key,sn.exists(!0))])}function yM(t){return wu(pn(t.firestore,Ts),[new Md(t._key,sn.none())])}function vM(t,e){const n=pn(t.firestore,Ts),r=p0(t),s=I0(t.converter,e);return wu(n,[y0(Go(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function wu(t,e){return function(r,s){const i=new Cn;return r.asyncQueue.enqueueAndForget(async()=>UP(await JP(r),s,i)),i.promise}(Yd(t),e)}function vC(t,e,n){const r=n.docs.get(e._key),s=new S0(t);return new A0(t,s,e._key,r,new Vi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){pi=s})(gs),ls(new kr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ts(new TS(r.getProvider("auth-internal")),new SS(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Pn(Kp,"4.4.1",e),Pn(Kp,"4.4.1","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="firebasestorage.googleapis.com",P0="storageBucket",wC=2*60*1e3,EC=10*60*1e3,TC=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends Fn{constructor(e,n,r=0){super(uc(e),`Firebase Storage: ${n} (${uc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return uc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ke||(Ke={}));function uc(t){return"storage/"+t}function cf(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(Ke.UNKNOWN,t)}function bC(t){return new Je(Ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function IC(t){return new Je(Ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function AC(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(Ke.UNAUTHENTICATED,t)}function SC(){return new Je(Ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function RC(t){return new Je(Ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function C0(){return new Je(Ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function k0(){return new Je(Ke.CANCELED,"User canceled the upload/download.")}function PC(t){return new Je(Ke.INVALID_URL,"Invalid URL '"+t+"'.")}function CC(t){return new Je(Ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function kC(){return new Je(Ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+P0+"' property when initializing the app?")}function O0(){return new Je(Ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function OC(){return new Je(Ke.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function xC(){return new Je(Ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DC(t){return new Je(Ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dh(t){return new Je(Ke.INVALID_ARGUMENT,t)}function x0(){return new Je(Ke.APP_DELETED,"The Firebase app was deleted.")}function NC(t){return new Je(Ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gi(t,e){return new Je(Ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Si(t){throw new Je(Ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Qt.makeFromUrl(e,n)}catch{return new Qt(e,"")}if(r.path==="")return r;throw CC(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(S){S.path_=decodeURIComponent(S.path)}const d="v[A-Za-z0-9_]+",a=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${a}/${d}/b/${s}/o${h}`,"i"),p={bucket:1,path:3},_=n===R0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",g=new RegExp(`^https?://${_}/${s}/${m}`,"i"),I=[{regex:l,indices:u,postModify:i},{regex:f,indices:p,postModify:c},{regex:g,indices:{bucket:1,path:2},postModify:c}];for(let S=0;S<I.length;S++){const L=I[S],x=L.regex.exec(e);if(x){const Y=x[L.indices.bucket];let D=x[L.indices.path];D||(D=""),r=new Qt(Y,D),L.postModify(r);break}}if(r==null)throw PC(e);return r}}class VC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let c=!1;function d(...m){c||(c=!0,e.apply(null,m))}function a(m){s=setTimeout(()=>{s=null,t(f,u())},m)}function h(){i&&clearTimeout(i)}function f(m,...g){if(c){h();return}if(m){h(),d.call(null,m,...g);return}if(u()||o){h(),d.call(null,m,...g);return}r<64&&(r*=2);let I;l===1?(l=2,I=0):I=(r+Math.random())*1e3,a(I)}let p=!1;function _(m){p||(p=!0,h(),!c&&(s!==null?(m||(l=2),clearTimeout(s),a(0)):m||(l=1)))}return a(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function LC(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(t){return t!==void 0}function UC(t){return typeof t=="function"}function $C(t){return typeof t=="object"&&!Array.isArray(t)}function Eu(t){return typeof t=="string"||t instanceof String}function km(t){return hf()&&t instanceof Blob}function hf(){return typeof Blob<"u"}function Om(t,e,n,r){if(r<e)throw dh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw dh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function D0(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ss;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ss||(ss={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r,s,i,o,l,u,c,d,a,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=a,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,p)=>{this.resolve_=f,this.reject_=p,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ga(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===ss.NO_ERROR,u=i.getStatus();if(!l||N0(u,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===ss.ABORT;r(!1,new ga(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new ga(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());FC(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=cf();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?x0():k0();o(u)}else{const u=C0();o(u)}};this.canceled_?n(!1,new ga(!1,null,!0)):this.backoffId_=MC(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&LC(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ga{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function jC(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function qC(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HC(t,e){e&&(t["X-Firebase-GMPID"]=e)}function zC(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function GC(t,e,n,r,s,i,o=!0){const l=D0(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return HC(c,e),jC(c,n),qC(c,i),zC(c,r),new BC(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KC(...t){const e=WC();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(hf())return new Blob(t);throw new Je(Ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QC(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){if(typeof atob>"u")throw DC("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cc{constructor(e,n){this.data=e,this.contentType=n||null}}function YC(t,e){switch(t){case Sn.RAW:return new cc(V0(e));case Sn.BASE64:case Sn.BASE64URL:return new cc(M0(t,e));case Sn.DATA_URL:return new cc(ZC(e),ek(e))}throw cf()}function V0(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function JC(t){let e;try{e=decodeURIComponent(t)}catch{throw Gi(Sn.DATA_URL,"Malformed data URL.")}return V0(e)}function M0(t,e){switch(t){case Sn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Gi(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Sn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Gi(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XC(e)}catch(s){throw s.message.includes("polyfill")?s:Gi(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class L0{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gi(Sn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=tk(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ZC(t){const e=new L0(t);return e.base64?M0(Sn.BASE64,e.rest):JC(e.rest)}function ek(t){return new L0(t).contentType}function tk(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){let r=0,s="";km(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(km(this.data_)){const r=this.data_,s=QC(r,e,n);return s===null?null:new pr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pr(r,!0)}}static getBlob(...e){if(hf()){const n=e.map(r=>r instanceof pr?r.data_:r);return new pr(KC.apply(null,n))}else{const n=e.map(o=>Eu(o)?YC(Sn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new pr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(t){let e;try{e=JSON.parse(t)}catch{return null}return $C(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function rk(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function U0(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t,e){return e}class Ot{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||sk}}let ya=null;function ik(t){return!Eu(t)||t.length<2?t:U0(t)}function $0(){if(ya)return ya;const t=[];t.push(new Ot("bucket")),t.push(new Ot("generation")),t.push(new Ot("metageneration")),t.push(new Ot("name","fullPath",!0));function e(i,o){return ik(o)}const n=new Ot("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new Ot("size");return s.xform=r,t.push(s),t.push(new Ot("timeCreated")),t.push(new Ot("updated")),t.push(new Ot("md5Hash",null,!0)),t.push(new Ot("cacheControl",null,!0)),t.push(new Ot("contentDisposition",null,!0)),t.push(new Ot("contentEncoding",null,!0)),t.push(new Ot("contentLanguage",null,!0)),t.push(new Ot("contentType",null,!0)),t.push(new Ot("metadata","customMetadata",!0)),ya=t,ya}function ok(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Qt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function ak(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return ok(r,t),r}function B0(t,e,n){const r=F0(e);return r===null?null:ak(t,r,n)}function lk(t,e,n,r){const s=F0(e);if(s===null||!Eu(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(c=>{const d=t.bucket,a=t.fullPath,h="/b/"+o(d)+"/o/"+o(a),f=gi(h,n,r),p=D0({alt:"media",token:c});return f+p})[0]}function j0(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class bs{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(t){if(!t)throw cf()}function df(t,e){function n(r,s){const i=B0(t,s,e);return Wn(i!==null),i}return n}function uk(t,e){function n(r,s){const i=B0(t,s,e);return Wn(i!==null),lk(i,s,t.host,t._protocol)}return n}function Ko(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=SC():s=AC():n.getStatus()===402?s=IC(t.bucket):n.getStatus()===403?s=RC(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function ff(t){const e=Ko(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=bC(t.path)),i.serverResponse=s.serverResponse,i}return n}function ck(t,e,n){const r=e.fullServerUrl(),s=gi(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new bs(s,i,df(t,n),o);return l.errorHandler=ff(e),l}function hk(t,e,n){const r=e.fullServerUrl(),s=gi(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new bs(s,i,uk(t,n),o);return l.errorHandler=ff(e),l}function dk(t,e){const n=e.fullServerUrl(),r=gi(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,c){}const l=new bs(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=ff(e),l}function fk(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function q0(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=fk(null,e)),r}function pk(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let I="";for(let S=0;S<2;S++)I=I+Math.random().toString().slice(2);return I}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const c=q0(e,r,s),d=j0(c,n),a="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+u+"--",f=pr.getBlob(a,r,h);if(f===null)throw O0();const p={name:c.fullPath},_=gi(i,t.host,t._protocol),m="POST",g=t.maxUploadRetryTime,T=new bs(_,m,df(t,n),g);return T.urlParams=p,T.headers=o,T.body=f.uploadData(),T.errorHandler=Ko(e),T}class ul{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function pf(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Wn(!1)}return Wn(!!n&&(e||["active"]).indexOf(n)!==-1),n}function mk(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=q0(e,r,s),l={name:o.fullPath},u=gi(i,t.host,t._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},a=j0(o,n),h=t.maxUploadRetryTime;function f(_){pf(_);let m;try{m=_.getResponseHeader("X-Goog-Upload-URL")}catch{Wn(!1)}return Wn(Eu(m)),m}const p=new bs(u,c,f,h);return p.urlParams=l,p.headers=d,p.body=a,p.errorHandler=Ko(e),p}function _k(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(c){const d=pf(c,["active","final"]);let a=null;try{a=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Wn(!1)}a||Wn(!1);const h=Number(a);return Wn(!isNaN(h)),new ul(h,r.size(),d==="final")}const o="POST",l=t.maxUploadRetryTime,u=new bs(n,o,i,l);return u.headers=s,u.errorHandler=Ko(e),u}const xm=256*1024;function gk(t,e,n,r,s,i,o,l){const u=new ul(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw OC();const c=u.total-u.current;let d=c;s>0&&(d=Math.min(d,s));const a=u.current,h=a+d;let f="";d===0?f="finalize":c===d?f="upload, finalize":f="upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${u.current}`},_=r.slice(a,h);if(_===null)throw O0();function m(S,L){const x=pf(S,["active","final"]),Y=u.current+d,D=r.size();let O;return x==="final"?O=df(e,i)(S,L):O=null,new ul(Y,D,x==="final",O)}const g="POST",T=e.maxUploadRetryTime,I=new bs(n,g,m,T);return I.headers=p,I.body=_.uploadData(),I.progressCallback=l||null,I.errorHandler=Ko(t),I}const $t={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function hc(t){switch(t){case"running":case"pausing":case"canceling":return $t.RUNNING;case"paused":return $t.PAUSED;case"success":return $t.SUCCESS;case"canceled":return $t.CANCELED;case"error":return $t.ERROR;default:return $t.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r){if(UC(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class vk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ss.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ss.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ss.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Si("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Si("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Si("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Si("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Si("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wk extends vk{initXhr(){this.xhr_.responseType="text"}}function Gr(){return new wk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=$0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Ke.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(N0(s.status,[]))if(i)s=C0();else{this.sleepTime=Math.max(this.sleepTime*2,TC),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Ke.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=mk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Gr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=_k(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Gr,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=xm*this._chunkMultiplier,n=new ul(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=gk(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const l=this._ref.storage._makeRequest(o,Gr,s,i,!1);this._request=l,l.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){xm*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=ck(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Gr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=pk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Gr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=k0(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=hc(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new yk(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(hc(this._state)){case $t.SUCCESS:Cs(this._resolve.bind(null,this.snapshot))();break;case $t.CANCELED:case $t.ERROR:const n=this._reject;Cs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(hc(this._state)){case $t.RUNNING:case $t.PAUSED:e.next&&Cs(e.next.bind(e,this.snapshot))();break;case $t.SUCCESS:e.complete&&Cs(e.complete.bind(e))();break;case $t.CANCELED:case $t.ERROR:e.error&&Cs(e.error.bind(e,this._error))();break;default:e.error&&Cs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu=class fh{constructor(e,n){this._service=e,n instanceof Qt?this._location=n:this._location=Qt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fh(e,n)}get root(){const e=new Qt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return U0(this._location.path)}get storage(){return this._service}get parent(){const e=nk(this._location.path);if(e===null)return null;const n=new Qt(this._location.bucket,e);return new fh(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw NC(e)}};function Tk(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Ek(t,new pr(e),n)}function bk(t){t._throwIfRoot("getDownloadURL");const e=hk(t.storage,t._location,$0());return t.storage.makeRequestWithTokens(e,Gr).then(n=>{if(n===null)throw xC();return n})}function Ik(t){t._throwIfRoot("deleteObject");const e=dk(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Gr)}function Ak(t,e){const n=rk(t._location.path,e),r=new Qt(t._location.bucket,n);return new Tu(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(t){return/^[A-Za-z]+:\/\//.test(t)}function Rk(t,e){return new Tu(t,e)}function H0(t,e){if(t instanceof mf){const n=t;if(n._bucket==null)throw kC();const r=new Tu(n,n._bucket);return e!=null?H0(r,e):r}else return e!==void 0?Ak(t,e):t}function Pk(t,e){if(e&&Sk(e)){if(t instanceof mf)return Rk(t,e);throw dh("To use ref(service, url), the first argument must be a Storage instance.")}else return H0(t,e)}function Dm(t,e){const n=e==null?void 0:e[P0];return n==null?null:Qt.makeFromBucketSpec(n,t)}function Ck(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Zg(s,t.app.options.projectId))}class mf{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=R0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wC,this._maxUploadRetryTime=EC,this._requests=new Set,s!=null?this._bucket=Qt.makeFromBucketSpec(s,this._host):this._bucket=Dm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qt.makeFromBucketSpec(this._url,e):this._bucket=Dm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Om("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Om("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new VC(x0());{const o=GC(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Nm="@firebase/storage",Vm="0.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="storage";function wM(t,e,n){return t=Xe(t),Tk(t,e,n)}function EM(t){return t=Xe(t),bk(t)}function TM(t){return t=Xe(t),Ik(t)}function kk(t,e){return t=Xe(t),Pk(t,e)}function Ok(t=rd(),e){t=Xe(t);const r=$l(t,z0).getImmediate({identifier:e}),s=Xg("storage");return s&&xk(r,...s),r}function xk(t,e,n,r={}){Ck(t,e,n,r)}function Dk(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new mf(n,r,s,e,gs)}function Nk(){ls(new kr(z0,Dk,"PUBLIC").setMultipleInstances(!0)),Pn(Nm,Vm,""),Pn(Nm,Vm,"esm2017")}Nk();function _f(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function G0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Vk=G0,W0=new ko("auth","Firebase",G0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=new td("@firebase/auth");function Mk(t,...e){cl.logLevel<=Ae.WARN&&cl.warn(`Auth (${gs}): ${t}`,...e)}function Na(t,...e){cl.logLevel<=Ae.ERROR&&cl.error(`Auth (${gs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t,...e){throw gf(t,...e)}function xn(t,...e){return gf(t,...e)}function Lk(t,e,n){const r=Object.assign(Object.assign({},Vk()),{[e]:n});return new ko("auth","Firebase",r).create(e,{appName:t.name})}function gf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return W0.create(t,...e)}function de(t,e,...n){if(!t)throw gf(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Na(e),new Error(e)}function Yn(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Fk(){return Mm()==="http:"||Mm()==="https:"}function Mm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fk()||Qb()||"connection"in navigator)?navigator.onLine:!0}function $k(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=Wb()||Xb()}get(){return Uk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new Qo(3e4,6e4);function Lr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function er(t,e,n,r,s={}){return Q0(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Oo(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),K0.fetch()(X0(t,t.config.apiHost,n,l),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},i))})}async function Q0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Bk),e);try{const s=new Hk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw va(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw va(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw va(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw va(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Lk(t,d,c);mn(t,d)}}catch(s){if(s instanceof Fn)throw s;mn(t,"network-request-failed",{message:String(s)})}}async function Xo(t,e,n,r,s={}){const i=await er(t,e,n,r,s);return"mfaPendingCredential"in i&&mn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function X0(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?yf(t.config,s):`${t.config.apiScheme}://${s}`}function qk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),jk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function va(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=xn(t,e,r);return s.customData._tokenResponse=n,s}function Lm(t){return t!==void 0&&t.enterprise!==void 0}class zk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Gk(t,e){return er(t,"GET","/v2/recaptchaConfig",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(t,e){return er(t,"POST","/v1/accounts:delete",e)}async function Kk(t,e){return er(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Qk(t,e=!1){const n=Xe(t),r=await n.getIdToken(e),s=vf(r);de(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Wi(dc(s.auth_time)),issuedAtTime:Wi(dc(s.iat)),expirationTime:Wi(dc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dc(t){return Number(t)*1e3}function vf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Na("JWT malformed, contained fewer than 3 sections"),null;try{const s=Kg(n);return s?JSON.parse(s):(Na("Failed to decode base64 JWT payload"),null)}catch(s){return Na("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Xk(t){const e=vf(t);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function li(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fn&&Yk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Yk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wi(this.lastLoginAt),this.creationTime=Wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await li(t,Kk(n,{idToken:r}));de(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?tO(i.providerUserInfo):[],l=eO(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),d=u?c:!1,a={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Y0(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,a)}async function Zk(t){const e=Xe(t);await hl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eO(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tO(t){return t.map(e=>{var{providerId:n}=e,r=_f(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e){const n=await Q0(t,{},async()=>{const r=Oo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=X0(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",K0.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rO(t,e){return er(t,"POST","/v2/accounts:revokeToken",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return de(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await nO(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new bo;return r&&(de(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(de(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(de(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){de(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=_f(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Y0(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await li(this,this.stsTokenManager.getToken(this.auth,e));return de(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Qk(this,e)}reload(){return Zk(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await li(this,Wk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,c,d;const a=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(l=n.tenantId)!==null&&l!==void 0?l:void 0,m=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,g=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:I,emailVerified:S,isAnonymous:L,providerData:x,stsTokenManager:Y}=n;de(I&&Y,e,"internal-error");const D=bo.fromJSON(this.name,Y);de(typeof I=="string",e,"internal-error"),sr(a,e.name),sr(h,e.name),de(typeof S=="boolean",e,"internal-error"),de(typeof L=="boolean",e,"internal-error"),sr(f,e.name),sr(p,e.name),sr(_,e.name),sr(m,e.name),sr(g,e.name),sr(T,e.name);const O=new is({uid:I,auth:e,email:h,emailVerified:S,displayName:a,isAnonymous:L,photoURL:p,phoneNumber:f,tenantId:_,stsTokenManager:D,createdAt:g,lastLoginAt:T});return x&&Array.isArray(x)&&(O.providerData=x.map(X=>Object.assign({},X))),m&&(O._redirectEventId=m),O}static async _fromIdTokenResponse(e,n,r=!1){const s=new bo;s.updateFromServerResponse(n);const i=new is({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hl(i),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Map;function Hn(t){Yn(t instanceof Function,"Expected a class definition");let e=Fm.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fm.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}J0.type="NONE";const Um=J0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(t,e,n){return`firebase:${t}:${e}:${n}`}class Qs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Va(this.userKey,s.apiKey,i),this.fullPersistenceKey=Va("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Qs(Hn(Um),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Hn(Um);const o=Va(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const d=await c._get(o);if(d){const a=is._fromJSON(e,d);c!==i&&(l=a),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Qs(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Qs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rw(e))return"Blackberry";if(sw(e))return"Webos";if(wf(e))return"Safari";if((e.includes("chrome/")||ew(e))&&!e.includes("edge/"))return"Chrome";if(nw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Z0(t=it()){return/firefox\//i.test(t)}function wf(t=it()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ew(t=it()){return/crios\//i.test(t)}function tw(t=it()){return/iemobile/i.test(t)}function nw(t=it()){return/android/i.test(t)}function rw(t=it()){return/blackberry/i.test(t)}function sw(t=it()){return/webos/i.test(t)}function bu(t=it()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sO(t=it()){var e;return bu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iO(){return Yb()&&document.documentMode===10}function iw(t=it()){return bu(t)||nw(t)||sw(t)||rw(t)||/windows phone/i.test(t)||tw(t)}function oO(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e=[]){let n;switch(t){case"Browser":n=$m(it());break;case"Worker":n=`${$m(it())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e={}){return er(t,"GET","/v2/passwordPolicy",Lr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO=6;class cO{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bm(this),this.idTokenSubscription=new Bm(this),this.beforeStateQueue=new aO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=W0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Qs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$k()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Xe(e):null;return n&&de(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Hn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lO(this),n=new cO(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ko("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hn(e)||this._popupRedirectResolver;de(n,this,"argument-error"),this.redirectPersistenceManager=await Qs.create(this,[Hn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ow(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Mk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Is(t){return Xe(t)}class Bm{constructor(e){this.auth=e,this.observer=null,this.addObserver=sI(n=>this.observer=n)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function aw(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=xn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",dO().appendChild(r)})}function fO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const pO="https://www.google.com/recaptcha/enterprise.js?render=",mO="recaptcha-enterprise",_O="NO_RECAPTCHA";class gO{constructor(e){this.type=mO,this.auth=Is(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{Gk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new zk(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;Lm(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(_O)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Lm(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}aw(pO+l).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function jm(t,e,n,r=!1){const s=new gO(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function mh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await jm(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await jm(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e){const n=$l(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wa(i,e??{}))return s;mn(s,"already-initialized")}return n.initialize({options:e})}function vO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Hn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wO(t,e,n){const r=Is(t);de(r._canInitEmulator,r,"emulator-config-failed"),de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=lw(e),{host:o,port:l}=EO(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||TO()}function lw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function EO(t){const e=lw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qm(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qm(o)}}}function qm(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function bO(t,e){return er(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e){return Xo(t,"POST","/v1/accounts:signInWithPassword",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t,e){return Xo(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}async function SO(t,e){return Xo(t,"POST","/v1/accounts:signInWithEmailLink",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io extends Ef{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Io(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Io(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,n,"signInWithPassword",IO);case"emailLink":return AO(e,{email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mh(e,r,"signUpPassword",bO);case"emailLink":return SO(e,{idToken:n,email:this._email,oobCode:this._password});default:mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(t,e){return Xo(t,"POST","/v1/accounts:signInWithIdp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO="http://localhost";class ds extends Ef{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):mn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=_f(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ds(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xs(e,n)}buildRequest(){const e={requestUri:RO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function CO(t){const e=Ci(ki(t)).link,n=e?Ci(ki(e)).deep_link_id:null,r=Ci(ki(t)).deep_link_id;return(r?Ci(ki(r)).link:null)||r||n||e||t}class Tf{constructor(e){var n,r,s,i,o,l;const u=Ci(ki(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,a=PO((s=u.mode)!==null&&s!==void 0?s:null);de(c&&d&&a,"argument-error"),this.apiKey=c,this.operation=a,this.code=d,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=CO(e);try{return new Tf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(){this.providerId=yi.PROVIDER_ID}static credential(e,n){return Io._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tf.parseLink(n);return de(r,"argument-error"),Io._fromEmailAndCode(e,r.code,r.tenantId)}}yi.PROVIDER_ID="password";yi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends uw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Yo{constructor(){super("facebook.com")}static credential(e){return ds._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Yo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ds._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Yo{constructor(){super("github.com")}static credential(e){return ds._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return gr.credential(e.oauthAccessToken)}catch{return null}}}gr.GITHUB_SIGN_IN_METHOD="github.com";gr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Yo{constructor(){super("twitter.com")}static credential(e,n){return ds._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return yr.credential(n,r)}catch{return null}}}yr.TWITTER_SIGN_IN_METHOD="twitter.com";yr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(t,e){return Xo(t,"POST","/v1/accounts:signUp",Lr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await is._fromIdTokenResponse(e,r,s),o=Hm(r);return new fs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Hm(r);return new fs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Hm(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Fn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,dl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new dl(e,n,r,s)}}function cw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?dl._fromErrorAndOperation(t,i,e,r):i})}async function OO(t,e,n=!1){const r=await li(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await li(t,cw(r,s,e,t),n);de(i.idToken,r,"internal-error");const o=vf(i.idToken);de(o,r,"internal-error");const{sub:l}=o;return de(t.uid===l,r,"user-mismatch"),fs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&mn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(t,e,n=!1){const r="signIn",s=await cw(t,r,e),i=await fs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function DO(t,e){return hw(Is(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(t){const e=Is(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function NO(t,e,n){const r=Is(t),o=await mh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kO).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&dw(t),u}),l=await fs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function VO(t,e,n){return DO(Xe(t),yi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&dw(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MO(t,e){return er(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LO(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Xe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await li(r,MO(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function FO(t,e,n,r){return Xe(t).onIdTokenChanged(e,n,r)}function UO(t,e,n){return Xe(t).beforeAuthStateChanged(e,n)}const fl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fl,"1"),this.storage.removeItem(fl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(){const t=it();return wf(t)||bu(t)}const BO=1e3,jO=10;class pw extends fw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=$O()&&oO(),this.fallbackToPolling=iw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);iO()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jO):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pw.type="LOCAL";const qO=pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw extends fw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mw.type="SESSION";const _w=mw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Iu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async c=>c(n.origin,i)),u=await HO(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Iu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const c=bf("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(a){const h=a;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(h.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return window}function GO(t){Dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function WO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function QO(){return gw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="firebaseLocalStorageDb",XO=1,pl="firebaseLocalStorage",vw="fbase_key";class Jo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Au(t,e){return t.transaction([pl],e?"readwrite":"readonly").objectStore(pl)}function YO(){const t=indexedDB.deleteDatabase(yw);return new Jo(t).toPromise()}function _h(){const t=indexedDB.open(yw,XO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pl,{keyPath:vw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pl)?e(r):(r.close(),await YO(),e(await _h()))})})}async function zm(t,e,n){const r=Au(t,!0).put({[vw]:e,value:n});return new Jo(r).toPromise()}async function JO(t,e){const n=Au(t,!1).get(e),r=await new Jo(n).toPromise();return r===void 0?null:r.value}function Gm(t,e){const n=Au(t,!0).delete(e);return new Jo(n).toPromise()}const ZO=800,ex=3;class ww{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _h(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>ex)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Iu._getInstance(QO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await WO(),!this.activeServiceWorker)return;this.sender=new zO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _h();return await zm(e,fl,"1"),await Gm(e,fl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>zm(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>JO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gm(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Au(s,!1).getAll();return new Jo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ww.type="LOCAL";const tx=ww;new Qo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e){return e?Hn(e):(de(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends Ef{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rx(t){return hw(t.auth,new If(t),t.bypassAuthState)}function sx(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),xO(n,new If(t),t.bypassAuthState)}async function ix(t){const{auth:e,user:n}=t;return de(n,e,"internal-error"),OO(n,new If(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rx;case"linkViaPopup":case"linkViaRedirect":return ix;case"reauthViaPopup":case"reauthViaRedirect":return sx;default:mn(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new Qo(2e3,1e4);class Us extends Ew{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Us.currentPopupAction&&Us.currentPopupAction.cancel(),Us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return de(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=bf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ox.get())};e()}}Us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="pendingRedirect",Ma=new Map;class lx extends Ew{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ma.get(this.auth._key());if(!e){try{const r=await ux(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ma.set(this.auth._key(),e)}return this.bypassAuthState||Ma.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ux(t,e){const n=dx(e),r=hx(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function cx(t,e){Ma.set(t._key(),e)}function hx(t){return Hn(t._redirectPersistence)}function dx(t){return Va(ax,t.config.apiKey,t.name)}async function fx(t,e,n=!1){const r=Is(t),s=nx(r,e),o=await new lx(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=10*60*1e3;class mx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_x(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Tw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=px&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wm(e))}saveEventToCache(e){this.cachedEventUids.add(Wm(e)),this.lastProcessedEventTime=Date.now()}}function Wm(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Tw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _x(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gx(t,e={}){return er(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vx=/^https?/;async function wx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gx(t);for(const n of e)try{if(Ex(n))return}catch{}mn(t,"unauthorized-domain")}function Ex(t){const e=ph(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!vx.test(n))return!1;if(yx.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new Qo(3e4,6e4);function Km(){const t=Dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bx(t){return new Promise((e,n)=>{var r,s,i;function o(){Km(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Km(),n(xn(t,"network-request-failed"))},timeout:Tx.get()})}if(!((s=(r=Dn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Dn().gapi)===null||i===void 0)&&i.load)o();else{const l=fO("iframefcb");return Dn()[l]=()=>{gapi.load?o():n(xn(t,"network-request-failed"))},aw(`https://apis.google.com/js/api.js?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw La=null,e})}let La=null;function Ix(t){return La=La||bx(t),La}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Qo(5e3,15e3),Sx="__/auth/iframe",Rx="emulator/auth/iframe",Px={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kx(t){const e=t.config;de(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yf(e,Rx):`https://${t.config.authDomain}/${Sx}`,r={apiKey:e.apiKey,appName:t.name,v:gs},s=Cx.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Oo(r).slice(1)}`}async function Ox(t){const e=await Ix(t),n=Dn().gapi;return de(n,t,"internal-error"),e.open({where:document.body,url:kx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Px,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),l=Dn().setTimeout(()=>{i(o)},Ax.get());function u(){Dn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dx=500,Nx=600,Vx="_blank",Mx="http://localhost";class Qm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lx(t,e,n,r=Dx,s=Nx){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},xx),{width:r.toString(),height:s.toString(),top:i,left:o}),c=it().toLowerCase();n&&(l=ew(c)?Vx:n),Z0(c)&&(e=e||Mx,u.scrollbars="yes");const d=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(sO(c)&&l!=="_self")return Fx(e||"",l),new Qm(null);const a=window.open(e||"",l,d);de(a,t,"popup-blocked");try{a.focus()}catch{}return new Qm(a)}function Fx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="__/auth/handler",$x="emulator/auth/handler",Bx=encodeURIComponent("fac");async function Xm(t,e,n,r,s,i){de(t.config.authDomain,t,"auth-domain-config-required"),de(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gs,eventId:s};if(e instanceof uw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,a]of Object.entries(i||{}))o[d]=a}if(e instanceof Yo){const d=e.getScopes().filter(a=>a!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${Bx}=${encodeURIComponent(u)}`:"";return`${jx(t)}?${Oo(l).slice(1)}${c}`}function jx({config:t}){return t.emulator?yf(t,$x):`https://${t.authDomain}/${Ux}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc="webStorageSupport";class qx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_w,this._completeRedirectFn=fx,this._overrideRedirectResult=cx}async _openPopup(e,n,r,s){var i;Yn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Xm(e,n,r,ph(),s);return Lx(e,o,bf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Xm(e,n,r,ph(),s);return GO(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Yn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ox(e),r=new mx(e);return n.register("authEvent",s=>(de(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fc,{type:fc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[fc];o!==void 0&&n(!!o),mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iw()||wf()||bu()}}const Hx=qx;var Ym="@firebase/auth",Jm="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Wx(t){ls(new kr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;de(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ow(t)},c=new hO(r,s,i,u);return vO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ls(new kr("auth-internal",e=>{const n=Is(e.getProvider("auth").getImmediate());return(r=>new zx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(Ym,Jm,Gx(t)),Pn(Ym,Jm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx=5*60,Qx=Jg("authIdTokenMaxAge")||Kx;let Zm=null;const Xx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Qx)return;const s=n==null?void 0:n.token;Zm!==s&&(Zm=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Yx(t=rd()){const e=$l(t,"auth");if(e.isInitialized())return e.getImmediate();const n=yO(t,{popupRedirectResolver:Hx,persistence:[tx,qO,_w]}),r=Jg("authTokenSyncURL");if(r){const i=Xx(r);UO(n,i,()=>i(n.currentUser)),FO(n,o=>i(o))}const s=Qg("auth");return s&&wO(n,`http://${s}`),n}Wx("Browser");const Jx={apiKey:"AIzaSyC9FPcO5ItIwZBUxEyb9smNb-6-muxbrj0",authDomain:"music-ecb10.firebaseapp.com",projectId:"music-ecb10",storageBucket:"music-ecb10.appspot.com",appId:"1:55270374227:web:7aa73ffe3c75be3d6effa6"},Af=ry(Jx),Ki=Yx(Af),Sf=iC(Af),Zx=Xd(Sf,"users"),bM=Xd(Sf,"songs"),IM=Xd(Sf,"comments"),e1=Ok(Af),AM=kk(e1),Zo=ed("user",()=>{const t=Ve(!1);async function e(s){const i=await NO(Ki,s.email,s.password);await yC(p0(Zx,i.user.uid),{name:s.name,age:s.age,country:s.country,email:s.email}),await LO(i.user,{displayName:s.name}),t.value=!0}async function n(s){await VO(Ki,s.email,s.password),t.value=!0}async function r(){await Ki.signOut(),t.value=!1}return{userLoggedIn:t,createUser:e,authenticate:n,signOut:r}});/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Vs=typeof window<"u";function t1(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const Fe=Object.assign;function pc(t,e){const n={};for(const r in e){const s=e[r];n[r]=_n(s)?s.map(t):t(s)}return n}const Qi=()=>{},_n=Array.isArray,n1=/\/$/,r1=t=>t.replace(n1,"");function mc(t,e,n="/"){let r,s={},i="",o="";const l=e.indexOf("#");let u=e.indexOf("?");return l<u&&l>=0&&(u=-1),u>-1&&(r=e.slice(0,u),i=e.slice(u+1,l>-1?l:e.length),s=t(i)),l>-1&&(r=r||e.slice(0,l),o=e.slice(l,e.length)),r=a1(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:o}}function s1(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function e_(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function i1(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&ui(e.matched[r],n.matched[s])&&bw(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ui(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bw(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!o1(t[n],e[n]))return!1;return!0}function o1(t,e){return _n(t)?t_(t,e):_n(e)?t_(e,t):t===e}function t_(t,e){return _n(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function a1(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,l;for(o=0;o<r.length;o++)if(l=r[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var Ao;(function(t){t.pop="pop",t.push="push"})(Ao||(Ao={}));var Xi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Xi||(Xi={}));function l1(t){if(!t)if(Vs){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),r1(t)}const u1=/^[^#]+#/;function c1(t,e){return t.replace(u1,"#")+e}function h1(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Su=()=>({left:window.pageXOffset,top:window.pageYOffset});function d1(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=h1(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function n_(t,e){return(history.state?history.state.position-e:-1)+t}const gh=new Map;function f1(t,e){gh.set(t,e)}function p1(t){const e=gh.get(t);return gh.delete(t),e}let m1=()=>location.protocol+"//"+location.host;function Iw(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let l=s.includes(t.slice(i))?t.slice(i).length:1,u=s.slice(l);return u[0]!=="/"&&(u="/"+u),e_(u,"")}return e_(n,t)+r+s}function _1(t,e,n,r){let s=[],i=[],o=null;const l=({state:h})=>{const f=Iw(t,location),p=n.value,_=e.value;let m=0;if(h){if(n.value=f,e.value=h,o&&o===p){o=null;return}m=_?h.position-_.position:0}else r(f);s.forEach(g=>{g(n.value,p,{delta:m,type:Ao.pop,direction:m?m>0?Xi.forward:Xi.back:Xi.unknown})})};function u(){o=n.value}function c(h){s.push(h);const f=()=>{const p=s.indexOf(h);p>-1&&s.splice(p,1)};return i.push(f),f}function d(){const{history:h}=window;h.state&&h.replaceState(Fe({},h.state,{scroll:Su()}),"")}function a(){for(const h of i)h();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:u,listen:c,destroy:a}}function r_(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Su():null}}function g1(t){const{history:e,location:n}=window,r={value:Iw(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(u,c,d){const a=t.indexOf("#"),h=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+u:m1()+t+u;try{e[d?"replaceState":"pushState"](c,"",h),s.value=c}catch(f){console.error(f),n[d?"replace":"assign"](h)}}function o(u,c){const d=Fe({},e.state,r_(s.value.back,u,s.value.forward,!0),c,{position:s.value.position});i(u,d,!0),r.value=u}function l(u,c){const d=Fe({},s.value,e.state,{forward:u,scroll:Su()});i(d.current,d,!0);const a=Fe({},r_(r.value,u,null),{position:d.position+1},c);i(u,a,!1),r.value=u}return{location:r,state:s,push:l,replace:o}}function y1(t){t=l1(t);const e=g1(t),n=_1(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=Fe({location:"",base:t,go:r,createHref:c1.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function v1(t){return typeof t=="string"||t&&typeof t=="object"}function Aw(t){return typeof t=="string"||typeof t=="symbol"}const ir={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Sw=Symbol("");var s_;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(s_||(s_={}));function ci(t,e){return Fe(new Error,{type:t,[Sw]:!0},e)}function Un(t,e){return t instanceof Error&&Sw in t&&(e==null||!!(t.type&e))}const i_="[^/]+?",w1={sensitive:!1,strict:!1,start:!0,end:!0},E1=/[.+*?^${}()[\]/\\]/g;function T1(t,e){const n=Fe({},w1,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let a=0;a<c.length;a++){const h=c[a];let f=40+(n.sensitive?.25:0);if(h.type===0)a||(s+="/"),s+=h.value.replace(E1,"\\$&"),f+=40;else if(h.type===1){const{value:p,repeatable:_,optional:m,regexp:g}=h;i.push({name:p,repeatable:_,optional:m});const T=g||i_;if(T!==i_){f+=10;try{new RegExp(`(${T})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${p}" (${T}): `+S.message)}}let I=_?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;a||(I=m&&c.length<2?`(?:/${I})`:"/"+I),m&&(I+="?"),s+=I,f+=20,m&&(f+=-8),_&&(f+=-20),T===".*"&&(f+=-50)}d.push(f)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function l(c){const d=c.match(o),a={};if(!d)return null;for(let h=1;h<d.length;h++){const f=d[h]||"",p=i[h-1];a[p.name]=f&&p.repeatable?f.split("/"):f}return a}function u(c){let d="",a=!1;for(const h of t){(!a||!d.endsWith("/"))&&(d+="/"),a=!1;for(const f of h)if(f.type===0)d+=f.value;else if(f.type===1){const{value:p,repeatable:_,optional:m}=f,g=p in c?c[p]:"";if(_n(g)&&!_)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const T=_n(g)?g.join("/"):g;if(!T)if(m)h.length<2&&(d.endsWith("/")?d=d.slice(0,-1):a=!0);else throw new Error(`Missing required param "${p}"`);d+=T}}return d||"/"}return{re:o,score:r,keys:i,parse:l,stringify:u}}function b1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function I1(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=b1(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(o_(r))return 1;if(o_(s))return-1}return s.length-r.length}function o_(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const A1={type:0,value:""},S1=/[a-zA-Z0-9_]/;function R1(t){if(!t)return[[]];if(t==="/")return[[A1]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(f){throw new Error(`ERR (${n})/"${c}": ${f}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let l=0,u,c="",d="";function a(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(u==="*"||u==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:d,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=u}for(;l<t.length;){if(u=t[l++],u==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:u==="/"?(c&&a(),o()):u===":"?(a(),n=1):h();break;case 4:h(),n=r;break;case 1:u==="("?n=2:S1.test(u)?h():(a(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--);break;case 2:u===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+u:n=3:d+=u;break;case 3:a(),n=0,u!=="*"&&u!=="?"&&u!=="+"&&l--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),a(),o(),s}function P1(t,e,n){const r=T1(R1(t.path),n),s=Fe(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function C1(t,e){const n=[],r=new Map;e=u_({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,a,h){const f=!h,p=k1(d);p.aliasOf=h&&h.record;const _=u_(e,d),m=[p];if("alias"in d){const I=typeof d.alias=="string"?[d.alias]:d.alias;for(const S of I)m.push(Fe({},p,{components:h?h.record.components:p.components,path:S,aliasOf:h?h.record:p}))}let g,T;for(const I of m){const{path:S}=I;if(a&&S[0]!=="/"){const L=a.record.path,x=L[L.length-1]==="/"?"":"/";I.path=a.record.path+(S&&x+S)}if(g=P1(I,a,_),h?h.alias.push(g):(T=T||g,T!==g&&T.alias.push(g),f&&d.name&&!l_(g)&&o(d.name)),p.children){const L=p.children;for(let x=0;x<L.length;x++)i(L[x],g,h&&h.children[x])}h=h||g,(g.record.components&&Object.keys(g.record.components).length||g.record.name||g.record.redirect)&&u(g)}return T?()=>{o(T)}:Qi}function o(d){if(Aw(d)){const a=r.get(d);a&&(r.delete(d),n.splice(n.indexOf(a),1),a.children.forEach(o),a.alias.forEach(o))}else{const a=n.indexOf(d);a>-1&&(n.splice(a,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function u(d){let a=0;for(;a<n.length&&I1(d,n[a])>=0&&(d.record.path!==n[a].record.path||!Rw(d,n[a]));)a++;n.splice(a,0,d),d.record.name&&!l_(d)&&r.set(d.record.name,d)}function c(d,a){let h,f={},p,_;if("name"in d&&d.name){if(h=r.get(d.name),!h)throw ci(1,{location:d});_=h.record.name,f=Fe(a_(a.params,h.keys.filter(T=>!T.optional).map(T=>T.name)),d.params&&a_(d.params,h.keys.map(T=>T.name))),p=h.stringify(f)}else if("path"in d)p=d.path,h=n.find(T=>T.re.test(p)),h&&(f=h.parse(p),_=h.record.name);else{if(h=a.name?r.get(a.name):n.find(T=>T.re.test(a.path)),!h)throw ci(1,{location:d,currentLocation:a});_=h.record.name,f=Fe({},a.params,d.params),p=h.stringify(f)}const m=[];let g=h;for(;g;)m.unshift(g.record),g=g.parent;return{name:_,path:p,params:f,matched:m,meta:x1(m)}}return t.forEach(d=>i(d)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:l,getRecordMatcher:s}}function a_(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function k1(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:O1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function O1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function l_(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function x1(t){return t.reduce((e,n)=>Fe(e,n.meta),{})}function u_(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function Rw(t,e){return e.children.some(n=>n===t||Rw(t,n))}const Pw=/#/g,D1=/&/g,N1=/\//g,V1=/=/g,M1=/\?/g,Cw=/\+/g,L1=/%5B/g,F1=/%5D/g,kw=/%5E/g,U1=/%60/g,Ow=/%7B/g,$1=/%7C/g,xw=/%7D/g,B1=/%20/g;function Rf(t){return encodeURI(""+t).replace($1,"|").replace(L1,"[").replace(F1,"]")}function j1(t){return Rf(t).replace(Ow,"{").replace(xw,"}").replace(kw,"^")}function yh(t){return Rf(t).replace(Cw,"%2B").replace(B1,"+").replace(Pw,"%23").replace(D1,"%26").replace(U1,"`").replace(Ow,"{").replace(xw,"}").replace(kw,"^")}function q1(t){return yh(t).replace(V1,"%3D")}function H1(t){return Rf(t).replace(Pw,"%23").replace(M1,"%3F")}function z1(t){return t==null?"":H1(t).replace(N1,"%2F")}function ml(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function G1(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Cw," "),o=i.indexOf("="),l=ml(o<0?i:i.slice(0,o)),u=o<0?null:ml(i.slice(o+1));if(l in e){let c=e[l];_n(c)||(c=e[l]=[c]),c.push(u)}else e[l]=u}return e}function c_(t){let e="";for(let n in t){const r=t[n];if(n=q1(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(_n(r)?r.map(i=>i&&yh(i)):[r&&yh(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function W1(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=_n(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const K1=Symbol(""),h_=Symbol(""),Ru=Symbol(""),Pf=Symbol(""),vh=Symbol("");function Ri(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function fr(t,e,n,r,s){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((o,l)=>{const u=a=>{a===!1?l(ci(4,{from:n,to:e})):a instanceof Error?l(a):v1(a)?l(ci(2,{from:e,to:a})):(i&&r.enterCallbacks[s]===i&&typeof a=="function"&&i.push(a),o())},c=t.call(r&&r.instances[s],e,n,u);let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(a=>l(a))})}function _c(t,e,n,r){const s=[];for(const i of t)for(const o in i.components){let l=i.components[o];if(!(e!=="beforeRouteEnter"&&!i.instances[o]))if(Q1(l)){const c=(l.__vccOpts||l)[e];c&&s.push(fr(c,n,r,i,o))}else{let u=l();s.push(()=>u.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${i.path}"`));const d=t1(c)?c.default:c;i.components[o]=d;const h=(d.__vccOpts||d)[e];return h&&fr(h,n,r,i,o)()}))}}return s}function Q1(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function d_(t){const e=zt(Ru),n=zt(Pf),r=me(()=>e.resolve(te(t.to))),s=me(()=>{const{matched:u}=r.value,{length:c}=u,d=u[c-1],a=n.matched;if(!d||!a.length)return-1;const h=a.findIndex(ui.bind(null,d));if(h>-1)return h;const f=f_(u[c-2]);return c>1&&f_(d)===f&&a[a.length-1].path!==f?a.findIndex(ui.bind(null,u[c-2])):h}),i=me(()=>s.value>-1&&Z1(n.params,r.value.params)),o=me(()=>s.value>-1&&s.value===n.matched.length-1&&bw(n.params,r.value.params));function l(u={}){return J1(u)?e[te(t.replace)?"replace":"push"](te(t.to)).catch(Qi):Promise.resolve()}return{route:r,href:me(()=>r.value.href),isActive:i,isExactActive:o,navigate:l}}const X1=Ln({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:d_,setup(t,{slots:e}){const n=Kn(d_(t)),{options:r}=zt(Ru),s=me(()=>({[p_(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[p_(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:Js("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Y1=X1;function J1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Z1(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!_n(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function f_(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const p_=(t,e,n)=>t??e??n,eD=Ln({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=zt(vh),s=me(()=>t.route||r.value),i=zt(h_,0),o=me(()=>{let c=te(i);const{matched:d}=s.value;let a;for(;(a=d[c])&&!a.components;)c++;return c}),l=me(()=>s.value.matched[o.value]);Hs(h_,me(()=>o.value+1)),Hs(K1,l),Hs(vh,s);const u=Ve();return rn(()=>[u.value,l.value,t.name],([c,d,a],[h,f,p])=>{d&&(d.instances[a]=c,f&&f!==d&&c&&c===h&&(d.leaveGuards.size||(d.leaveGuards=f.leaveGuards),d.updateGuards.size||(d.updateGuards=f.updateGuards))),c&&d&&(!f||!ui(d,f)||!h)&&(d.enterCallbacks[a]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=s.value,d=t.name,a=l.value,h=a&&a.components[d];if(!h)return m_(n.default,{Component:h,route:c});const f=a.props[d],p=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=Js(h,Fe({},p,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(a.instances[d]=null)},ref:u}));return m_(n.default,{Component:m,route:c})||m}}});function m_(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const tD=eD;function nD(t){const e=C1(t.routes,t),n=t.parseQuery||G1,r=t.stringifyQuery||c_,s=t.history,i=Ri(),o=Ri(),l=Ri(),u=lg(ir);let c=ir;Vs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=pc.bind(null,A=>""+A),a=pc.bind(null,z1),h=pc.bind(null,ml);function f(A,M){let $,K;return Aw(A)?($=e.getRecordMatcher(A),K=M):K=A,e.addRoute(K,$)}function p(A){const M=e.getRecordMatcher(A);M&&e.removeRoute(M)}function _(){return e.getRoutes().map(A=>A.record)}function m(A){return!!e.getRecordMatcher(A)}function g(A,M){if(M=Fe({},M||u.value),typeof A=="string"){const v=mc(n,A,M.path),b=e.resolve({path:v.path},M),k=s.createHref(v.fullPath);return Fe(v,b,{params:h(b.params),hash:ml(v.hash),redirectedFrom:void 0,href:k})}let $;if("path"in A)$=Fe({},A,{path:mc(n,A.path,M.path).path});else{const v=Fe({},A.params);for(const b in v)v[b]==null&&delete v[b];$=Fe({},A,{params:a(v)}),M.params=a(M.params)}const K=e.resolve($,M),ye=A.hash||"";K.params=d(h(K.params));const Be=s1(r,Fe({},A,{hash:j1(ye),path:K.path})),y=s.createHref(Be);return Fe({fullPath:Be,hash:ye,query:r===c_?W1(A.query):A.query||{}},K,{redirectedFrom:void 0,href:y})}function T(A){return typeof A=="string"?mc(n,A,u.value.path):Fe({},A)}function I(A,M){if(c!==A)return ci(8,{from:M,to:A})}function S(A){return Y(A)}function L(A){return S(Fe(T(A),{replace:!0}))}function x(A){const M=A.matched[A.matched.length-1];if(M&&M.redirect){const{redirect:$}=M;let K=typeof $=="function"?$(A):$;return typeof K=="string"&&(K=K.includes("?")||K.includes("#")?K=T(K):{path:K},K.params={}),Fe({query:A.query,hash:A.hash,params:"path"in K?{}:A.params},K)}}function Y(A,M){const $=c=g(A),K=u.value,ye=A.state,Be=A.force,y=A.replace===!0,v=x($);if(v)return Y(Fe(T(v),{state:typeof v=="object"?Fe({},ye,v.state):ye,force:Be,replace:y}),M||$);const b=$;b.redirectedFrom=M;let k;return!Be&&i1(r,K,$)&&(k=ci(16,{to:b,from:K}),kt(K,K,!0,!1)),(k?Promise.resolve(k):X(b,K)).catch(P=>Un(P)?Un(P,2)?P:Mt(P):Te(P,b,K)).then(P=>{if(P){if(Un(P,2))return Y(Fe({replace:y},T(P.to),{state:typeof P.to=="object"?Fe({},ye,P.to.state):ye,force:Be}),M||b)}else P=H(b,K,!0,y,ye);return ne(b,K,P),P})}function D(A,M){const $=I(A,M);return $?Promise.reject($):Promise.resolve()}function O(A){const M=yn.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(A):A()}function X(A,M){let $;const[K,ye,Be]=rD(A,M);$=_c(K.reverse(),"beforeRouteLeave",A,M);for(const v of K)v.leaveGuards.forEach(b=>{$.push(fr(b,A,M))});const y=D.bind(null,A,M);return $.push(y),se($).then(()=>{$=[];for(const v of i.list())$.push(fr(v,A,M));return $.push(y),se($)}).then(()=>{$=_c(ye,"beforeRouteUpdate",A,M);for(const v of ye)v.updateGuards.forEach(b=>{$.push(fr(b,A,M))});return $.push(y),se($)}).then(()=>{$=[];for(const v of Be)if(v.beforeEnter)if(_n(v.beforeEnter))for(const b of v.beforeEnter)$.push(fr(b,A,M));else $.push(fr(v.beforeEnter,A,M));return $.push(y),se($)}).then(()=>(A.matched.forEach(v=>v.enterCallbacks={}),$=_c(Be,"beforeRouteEnter",A,M),$.push(y),se($))).then(()=>{$=[];for(const v of o.list())$.push(fr(v,A,M));return $.push(y),se($)}).catch(v=>Un(v,8)?v:Promise.reject(v))}function ne(A,M,$){l.list().forEach(K=>O(()=>K(A,M,$)))}function H(A,M,$,K,ye){const Be=I(A,M);if(Be)return Be;const y=M===ir,v=Vs?history.state:{};$&&(K||y?s.replace(A.fullPath,Fe({scroll:y&&v&&v.scroll},ye)):s.push(A.fullPath,ye)),u.value=A,kt(A,M,$,y),Mt()}let le;function Ee(){le||(le=s.listen((A,M,$)=>{if(!Z.listening)return;const K=g(A),ye=x(K);if(ye){Y(Fe(ye,{replace:!0}),K).catch(Qi);return}c=K;const Be=u.value;Vs&&f1(n_(Be.fullPath,$.delta),Su()),X(K,Be).catch(y=>Un(y,12)?y:Un(y,2)?(Y(y.to,K).then(v=>{Un(v,20)&&!$.delta&&$.type===Ao.pop&&s.go(-1,!1)}).catch(Qi),Promise.reject()):($.delta&&s.go(-$.delta,!1),Te(y,K,Be))).then(y=>{y=y||H(K,Be,!1),y&&($.delta&&!Un(y,8)?s.go(-$.delta,!1):$.type===Ao.pop&&Un(y,20)&&s.go(-1,!1)),ne(K,Be,y)}).catch(Qi)}))}let Ce=Ri(),J=Ri(),ke;function Te(A,M,$){Mt(A);const K=J.list();return K.length?K.forEach(ye=>ye(A,M,$)):console.error(A),Promise.reject(A)}function ft(){return ke&&u.value!==ir?Promise.resolve():new Promise((A,M)=>{Ce.add([A,M])})}function Mt(A){return ke||(ke=!A,Ee(),Ce.list().forEach(([M,$])=>A?$(A):M()),Ce.reset()),A}function kt(A,M,$,K){const{scrollBehavior:ye}=t;if(!Vs||!ye)return Promise.resolve();const Be=!$&&p1(n_(A.fullPath,0))||(K||!$)&&history.state&&history.state.scroll||null;return Ut().then(()=>ye(A,M,Be)).then(y=>y&&d1(y)).catch(y=>Te(y,A,M))}const pt=A=>s.go(A);let Ze;const yn=new Set,Z={currentRoute:u,listening:!0,addRoute:f,removeRoute:p,hasRoute:m,getRoutes:_,resolve:g,options:t,push:S,replace:L,go:pt,back:()=>pt(-1),forward:()=>pt(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:J.add,isReady:ft,install(A){const M=this;A.component("RouterLink",Y1),A.component("RouterView",tD),A.config.globalProperties.$router=M,Object.defineProperty(A.config.globalProperties,"$route",{enumerable:!0,get:()=>te(u)}),Vs&&!Ze&&u.value===ir&&(Ze=!0,S(s.location).catch(ye=>{}));const $={};for(const ye in ir)Object.defineProperty($,ye,{get:()=>u.value[ye],enumerable:!0});A.provide(Ru,M),A.provide(Pf,sg($)),A.provide(vh,u);const K=A.unmount;yn.add(A),A.unmount=function(){yn.delete(A),yn.size<1&&(c=ir,le&&le(),le=null,u.value=ir,Ze=!1,ke=!1),K()}}};function se(A){return A.reduce((M,$)=>M.then(()=>O($)),Promise.resolve())}return Z}function rD(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(c=>ui(c,l))?r.push(l):n.push(l));const u=t.matched[o];u&&(e.matched.find(c=>ui(c,u))||s.push(u))}return[n,r,s]}function sD(){return zt(Ru)}function iD(){return zt(Pf)}const oD={id:"header",class:"bg-gray-700"},aD={class:"container mx-auto flex justify-start items-center py-5 px-4"},lD={class:"flex flex-grow items-center"},uD={class:"flex flex-row mt-1"},cD={key:0},hD=Ln({__name:"AppHeader",setup(t){const e=zg(),n=Zo(),r=sD(),s=iD();function i(){n.signOut(),s.meta.requiredAuth&&r.push({name:"home"})}return(o,l)=>{const u=no("router-link");return Xt(),Rn("header",oD,[ee("nav",aD,[we(u,{class:"text-white font-bold uppercase text-2xl mr-4",to:{name:"home"},"exact-active-class":"no-active"},{default:ns(()=>[Ui("Music")]),_:1}),ee("div",lD,[ee("ul",uD,[ee("li",null,[we(u,{class:"px-2 text-white",to:{name:"about"}},{default:ns(()=>[Ui(" About ")]),_:1})]),te(n).userLoggedIn?(Xt(),Rn(Bt,{key:1},[ee("li",null,[we(u,{class:"px-2 text-white",to:{name:"manage"}},{default:ns(()=>[Ui("Manage")]),_:1})]),ee("li",null,[ee("a",{class:"px-2 text-white",href:"#",onClick:Kr(i,["prevent"])}," Logout")])],64)):(Xt(),Rn("li",cD,[ee("a",{class:"px-2 text-white",href:"#",onClick:l[0]||(l[0]=Kr((...c)=>te(e).toggle&&te(e).toggle(...c),["prevent"]))}," Login / Register ")]))])])])])}}});/**
  * vee-validate v4.12.5
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function At(t){return typeof t=="function"}function Dw(t){return t==null}const ps=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function Cf(t){return Number(t)>=0}function dD(t){const e=parseFloat(t);return isNaN(e)?t:e}function fD(t){return typeof t=="object"&&t!==null}function pD(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function __(t){if(!fD(t)||pD(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function So(t,e){return Object.keys(e).forEach(n=>{if(__(e[n])&&__(t[n])){t[n]||(t[n]={}),So(t[n],e[n]);return}t[n]=e[n]}),t}function Mi(t){const e=t.split(".");if(!e.length)return"";let n=String(e[0]);for(let r=1;r<e.length;r++){if(Cf(e[r])){n+=`[${e[r]}]`;continue}n+=`.${e[r]}`}return n}const mD={};function _D(t){return mD[t]}function g_(t,e,n){typeof n.value=="object"&&(n.value=ze(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||e==="__proto__"?Object.defineProperty(t,e,n):t[e]=n.value}function ze(t){if(typeof t!="object")return t;var e=0,n,r,s,i=Object.prototype.toString.call(t);if(i==="[object Object]"?s=Object.create(t.__proto__||null):i==="[object Array]"?s=Array(t.length):i==="[object Set]"?(s=new Set,t.forEach(function(o){s.add(ze(o))})):i==="[object Map]"?(s=new Map,t.forEach(function(o,l){s.set(ze(l),ze(o))})):i==="[object Date]"?s=new Date(+t):i==="[object RegExp]"?s=new RegExp(t.source,t.flags):i==="[object DataView]"?s=new t.constructor(ze(t.buffer)):i==="[object ArrayBuffer]"?s=t.slice(0):i.slice(-6)==="Array]"&&(s=new t.constructor(t)),s){for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)g_(s,r[e],Object.getOwnPropertyDescriptor(t,r[e]));for(e=0,r=Object.getOwnPropertyNames(t);e<r.length;e++)Object.hasOwnProperty.call(s,n=r[e])&&s[n]===t[n]||g_(s,n,Object.getOwnPropertyDescriptor(t,n))}return s||t}const Pu=Symbol("vee-validate-form"),gD=Symbol("vee-validate-field-instance"),_l=Symbol("Default empty value"),yD=typeof window<"u";function wh(t){return At(t)&&!!t.__locatorRef}function un(t){return!!t&&At(t.parse)&&t.__type==="VVTypedSchema"}function gl(t){return!!t&&At(t.validate)}function ea(t){return t==="checkbox"||t==="radio"}function vD(t){return ps(t)||Array.isArray(t)}function wD(t){return Array.isArray(t)?t.length===0:ps(t)&&Object.keys(t).length===0}function ta(t){return/^\[.+\]$/i.test(t)}function ED(t){return Nw(t)&&t.multiple}function Nw(t){return t.tagName==="SELECT"}function TD(t,e){const n=![!1,null,void 0,0].includes(e.multiple)&&!Number.isNaN(e.multiple);return t==="select"&&"multiple"in e&&n}function bD(t,e){return!TD(t,e)&&e.type!=="file"&&!ea(e.type)}function ID(t){return Vw(t)&&t.target&&"submit"in t.target}function Vw(t){return t?!!(typeof Event<"u"&&At(Event)&&t instanceof Event||t&&t.srcElement):!1}function y_(t,e){return e in t&&t[e]!==_l}function Vt(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Vt(t[r],e[r]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;for(r of t.entries())if(!Vt(r[1],e.get(r[0])))return!1;return!0}if(v_(t)&&v_(e))return!(t.size!==e.size||t.name!==e.name||t.lastModified!==e.lastModified||t.type!==e.type);if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(r of t.entries())if(!e.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();for(s=Object.keys(t),n=s.length,r=n;r--!==0;){var i=s[r];if(!Vt(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function v_(t){return yD?t instanceof File:!1}function Cu(t){return ta(t)?t.replace(/\[|\]/gi,""):t}function Ht(t,e,n){return t?ta(e)?t[Cu(e)]:(e||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((s,i)=>vD(s)&&i in s?s[i]:n,t):n}function ar(t,e,n){if(ta(e)){t[Cu(e)]=n;return}const r=e.split(/\.|\[(\d+)\]/).filter(Boolean);let s=t;for(let i=0;i<r.length;i++){if(i===r.length-1){s[r[i]]=n;return}(!(r[i]in s)||Dw(s[r[i]]))&&(s[r[i]]=Cf(r[i+1])?[]:{}),s=s[r[i]]}}function gc(t,e){if(Array.isArray(t)&&Cf(e)){t.splice(Number(e),1);return}ps(t)&&delete t[e]}function w_(t,e){if(ta(e)){delete t[Cu(e)];return}const n=e.split(/\.|\[(\d+)\]/).filter(Boolean);let r=t;for(let i=0;i<n.length;i++){if(i===n.length-1){gc(r,n[i]);break}if(!(n[i]in r)||Dw(r[n[i]]))break;r=r[n[i]]}const s=n.map((i,o)=>Ht(t,n.slice(0,o).join(".")));for(let i=s.length-1;i>=0;i--)if(wD(s[i])){if(i===0){gc(t,n[0]);continue}gc(s[i-1],n[i-1])}}function Zt(t){return Object.keys(t)}function Mw(t,e=void 0){const n=Po();return(n==null?void 0:n.provides[t])||zt(t,e)}function E_(t,e,n){if(Array.isArray(t)){const r=[...t],s=r.findIndex(i=>Vt(i,e));return s>=0?r.splice(s,1):r.push(e),r}return Vt(t,e)?n:e}function T_(t,e=0){let n=null,r=[];return function(...s){return n&&clearTimeout(n),n=setTimeout(()=>{const i=t(...s);r.forEach(o=>o(i)),r=[]},e),new Promise(i=>r.push(i))}}function AD(t,e){return ps(e)&&e.number?dD(t):t}function Eh(t,e){let n;return async function(...s){const i=t(...s);n=i;const o=await i;return i!==n?o:(n=void 0,e(o,s))}}function Th(t){return Array.isArray(t)?t:t?[t]:[]}function wa(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function SD(t){let e=null,n=[];return function(...r){const s=Ut(()=>{if(e!==s)return;const i=t(...r);n.forEach(o=>o(i)),n=[],e=null});return e=s,new Promise(i=>n.push(i))}}function Lw(t,e,n){return e.slots.default?typeof t=="string"||!t?e.slots.default(n()):{default:()=>{var r,s;return(s=(r=e.slots).default)===null||s===void 0?void 0:s.call(r,n())}}:e.slots.default}function yc(t){if(Fw(t))return t._value}function Fw(t){return"_value"in t}function RD(t){return t.type==="number"||t.type==="range"?Number.isNaN(t.valueAsNumber)?t.value:t.valueAsNumber:t.value}function yl(t){if(!Vw(t))return t;const e=t.target;if(ea(e.type)&&Fw(e))return yc(e);if(e.type==="file"&&e.files){const n=Array.from(e.files);return e.multiple?n:n[0]}if(ED(e))return Array.from(e.options).filter(n=>n.selected&&!n.disabled).map(yc);if(Nw(e)){const n=Array.from(e.options).find(r=>r.selected);return n?yc(n):e.value}return RD(e)}function Uw(t){const e={};return Object.defineProperty(e,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),t?ps(t)&&t._$$isNormalized?t:ps(t)?Object.keys(t).reduce((n,r)=>{const s=PD(t[r]);return t[r]!==!1&&(n[r]=b_(s)),n},e):typeof t!="string"?e:t.split("|").reduce((n,r)=>{const s=CD(r);return s.name&&(n[s.name]=b_(s.params)),n},e):e}function PD(t){return t===!0?[]:Array.isArray(t)||ps(t)?t:[t]}function b_(t){const e=n=>typeof n=="string"&&n[0]==="@"?kD(n.slice(1)):n;return Array.isArray(t)?t.map(e):t instanceof RegExp?[t]:Object.keys(t).reduce((n,r)=>(n[r]=e(t[r]),n),{})}const CD=t=>{let e=[];const n=t.split(":")[0];return t.includes(":")&&(e=t.split(":").slice(1).join(":").split(",")),{name:n,params:e}};function kD(t){const e=n=>Ht(n,t)||n[t];return e.__locatorRef=t,e}function OD(t){return Array.isArray(t)?t.filter(wh):Zt(t).filter(e=>wh(t[e])).map(e=>t[e])}const xD={generateMessage:({field:t})=>`${t} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let DD=Object.assign({},xD);const Zr=()=>DD;async function $w(t,e,n={}){const r=n==null?void 0:n.bails,s={name:(n==null?void 0:n.name)||"{field}",rules:e,label:n==null?void 0:n.label,bails:r??!0,formData:(n==null?void 0:n.values)||{}},o=(await ND(s,t)).errors;return{errors:o,valid:!o.length}}async function ND(t,e){if(un(t.rules)||gl(t.rules))return MD(e,t.rules);if(At(t.rules)||Array.isArray(t.rules)){const o={field:t.label||t.name,name:t.name,label:t.label,form:t.formData,value:e},l=Array.isArray(t.rules)?t.rules:[t.rules],u=l.length,c=[];for(let d=0;d<u;d++){const a=l[d],h=await a(e,o);if(!(typeof h!="string"&&!Array.isArray(h)&&h)){if(Array.isArray(h))c.push(...h);else{const p=typeof h=="string"?h:jw(o);c.push(p)}if(t.bails)return{errors:c}}}return{errors:c}}const n=Object.assign(Object.assign({},t),{rules:Uw(t.rules)}),r=[],s=Object.keys(n.rules),i=s.length;for(let o=0;o<i;o++){const l=s[o],u=await LD(n,e,{name:l,params:n.rules[l]});if(u.error&&(r.push(u.error),t.bails))return{errors:r}}return{errors:r}}function VD(t){return!!t&&t.name==="ValidationError"}function Bw(t){return{__type:"VVTypedSchema",async parse(n){var r;try{return{output:await t.validate(n,{abortEarly:!1}),errors:[]}}catch(s){if(!VD(s))throw s;if(!(!((r=s.inner)===null||r===void 0)&&r.length)&&s.errors.length)return{errors:[{path:s.path,errors:s.errors}]};const i=s.inner.reduce((o,l)=>{const u=l.path||"";return o[u]||(o[u]={errors:[],path:u}),o[u].errors.push(...l.errors),o},{});return{errors:Object.values(i)}}}}}async function MD(t,e){const r=await(un(e)?e:Bw(e)).parse(t),s=[];for(const i of r.errors)i.errors.length&&s.push(...i.errors);return{errors:s}}async function LD(t,e,n){const r=_D(n.name);if(!r)throw new Error(`No such validator '${n.name}' exists.`);const s=FD(n.params,t.formData),i={field:t.label||t.name,name:t.name,label:t.label,value:e,form:t.formData,rule:Object.assign(Object.assign({},n),{params:s})},o=await r(e,s,i);return typeof o=="string"?{error:o}:{error:o?void 0:jw(i)}}function jw(t){const e=Zr().generateMessage;return e?e(t):"Field is invalid"}function FD(t,e){const n=r=>wh(r)?r(e):r;return Array.isArray(t)?t.map(n):Object.keys(t).reduce((r,s)=>(r[s]=n(t[s]),r),{})}async function UD(t,e){const r=await(un(t)?t:Bw(t)).parse(ze(e)),s={},i={};for(const o of r.errors){const l=o.errors,u=(o.path||"").replace(/\["(\d+)"\]/g,(c,d)=>`[${d}]`);s[u]={valid:!l.length,errors:l},l.length&&(i[u]=l[0])}return{valid:!r.errors.length,results:s,errors:i,values:r.value}}async function $D(t,e,n){const s=Zt(t).map(async c=>{var d,a,h;const f=(d=n==null?void 0:n.names)===null||d===void 0?void 0:d[c],p=await $w(Ht(e,c),t[c],{name:(f==null?void 0:f.name)||c,label:f==null?void 0:f.label,values:e,bails:(h=(a=n==null?void 0:n.bailsMap)===null||a===void 0?void 0:a[c])!==null&&h!==void 0?h:!0});return Object.assign(Object.assign({},p),{path:c})});let i=!0;const o=await Promise.all(s),l={},u={};for(const c of o)l[c.path]={valid:c.valid,errors:c.errors},c.valid||(i=!1,u[c.path]=c.errors[0]);return{valid:i,results:l,errors:u}}let I_=0;function BD(t,e){const{value:n,initialValue:r,setInitialValue:s}=jD(t,e.modelValue,e.form);if(!e.form){let u=function(f){var p;"value"in f&&(n.value=f.value),"errors"in f&&d(f.errors),"touched"in f&&(h.touched=(p=f.touched)!==null&&p!==void 0?p:h.touched),"initialValue"in f&&s(f.initialValue)};const{errors:c,setErrors:d}=zD(),a=I_>=Number.MAX_SAFE_INTEGER?0:++I_,h=HD(n,r,c,e.schema);return{id:a,path:t,value:n,initialValue:r,meta:h,flags:{pendingUnmount:{[a]:!1},pendingReset:!1},errors:c,setState:u}}const i=e.form.createPathState(t,{bails:e.bails,label:e.label,type:e.type,validate:e.validate,schema:e.schema}),o=me(()=>i.errors);function l(u){var c,d,a;"value"in u&&(n.value=u.value),"errors"in u&&((c=e.form)===null||c===void 0||c.setFieldError(te(t),u.errors)),"touched"in u&&((d=e.form)===null||d===void 0||d.setFieldTouched(te(t),(a=u.touched)!==null&&a!==void 0?a:!1)),"initialValue"in u&&s(u.initialValue)}return{id:Array.isArray(i.id)?i.id[i.id.length-1]:i.id,path:t,value:n,errors:o,meta:i,initialValue:r,flags:i.__flags,setState:l}}function jD(t,e,n){const r=Ve(te(e));function s(){return n?Ht(n.initialValues.value,te(t),te(r)):te(r)}function i(c){if(!n){r.value=c;return}n.setFieldInitialValue(te(t),c,!0)}const o=me(s);if(!n)return{value:Ve(s()),initialValue:o,setInitialValue:i};const l=qD(e,n,o,t);return n.stageInitialValue(te(t),l,!0),{value:me({get(){return Ht(n.values,te(t))},set(c){n.setFieldValue(te(t),c,!1)}}),initialValue:o,setInitialValue:i}}function qD(t,e,n,r){return Qe(t)?te(t):t!==void 0?t:Ht(e.values,te(r),te(n))}function HD(t,e,n,r){var s,i;const o=(i=(s=r==null?void 0:r.describe)===null||s===void 0?void 0:s.call(r).required)!==null&&i!==void 0?i:!1,l=Kn({touched:!1,pending:!1,valid:!0,required:o,validated:!!te(n).length,initialValue:me(()=>te(e)),dirty:me(()=>!Vt(te(t),te(e)))});return rn(n,u=>{l.valid=!u.length},{immediate:!0,flush:"sync"}),l}function zD(){const t=Ve([]);return{errors:t,setErrors:e=>{t.value=Th(e)}}}function GD(t,e,n){return ea(n==null?void 0:n.type)?KD(t,e,n):qw(t,e,n)}function qw(t,e,n){const{initialValue:r,validateOnMount:s,bails:i,type:o,checkedValue:l,label:u,validateOnValueUpdate:c,uncheckedValue:d,controlled:a,keepValueOnUnmount:h,syncVModel:f,form:p}=WD(n),_=a?Mw(Pu):void 0,m=p||_,g=me(()=>Mi(De(t))),T=me(()=>{if(De(m==null?void 0:m.schema))return;const se=te(e);return gl(se)||un(se)||At(se)||Array.isArray(se)?se:Uw(se)}),{id:I,value:S,initialValue:L,meta:x,setState:Y,errors:D,flags:O}=BD(g,{modelValue:r,form:m,bails:i,label:u,type:o,validate:T.value?Ce:void 0,schema:un(e)?e:void 0}),X=me(()=>D.value[0]);f&&QD({value:S,prop:f,handleChange:J,shouldValidate:()=>c&&!O.pendingReset});const ne=(Z,se=!1)=>{x.touched=!0,se&&le()};async function H(Z){var se,A;if(m!=null&&m.validateSchema){const{results:M}=await m.validateSchema(Z);return(se=M[De(g)])!==null&&se!==void 0?se:{valid:!0,errors:[]}}return T.value?$w(S.value,T.value,{name:De(g),label:De(u),values:(A=m==null?void 0:m.values)!==null&&A!==void 0?A:{},bails:i}):{valid:!0,errors:[]}}const le=Eh(async()=>(x.pending=!0,x.validated=!0,H("validated-only")),Z=>(O.pendingUnmount[Ze.id]||(Y({errors:Z.errors}),x.pending=!1,x.valid=Z.valid),Z)),Ee=Eh(async()=>H("silent"),Z=>(x.valid=Z.valid,Z));function Ce(Z){return(Z==null?void 0:Z.mode)==="silent"?Ee():le()}function J(Z,se=!0){const A=yl(Z);Mt(A,se)}Dl(()=>{if(s)return le();(!m||!m.validateSchema)&&Ee()});function ke(Z){x.touched=Z}function Te(Z){var se;const A=Z&&"value"in Z?Z.value:L.value;Y({value:ze(A),initialValue:ze(A),touched:(se=Z==null?void 0:Z.touched)!==null&&se!==void 0?se:!1,errors:(Z==null?void 0:Z.errors)||[]}),x.pending=!1,x.validated=!1,Ee()}const ft=Po();function Mt(Z,se=!0){S.value=ft&&f?AD(Z,ft.props.modelModifiers):Z,(se?le:Ee)()}function kt(Z){Y({errors:Array.isArray(Z)?Z:[Z]})}const pt=me({get(){return S.value},set(Z){Mt(Z,c)}}),Ze={id:I,name:g,label:u,value:pt,meta:x,errors:D,errorMessage:X,type:o,checkedValue:l,uncheckedValue:d,bails:i,keepValueOnUnmount:h,resetField:Te,handleReset:()=>Te(),validate:Ce,handleChange:J,handleBlur:ne,setState:Y,setTouched:ke,setErrors:kt,setValue:Mt};if(Hs(gD,Ze),Qe(e)&&typeof te(e)!="function"&&rn(e,(Z,se)=>{Vt(Z,se)||(x.validated?le():Ee())},{deep:!0}),!m)return Ze;const yn=me(()=>{const Z=T.value;return!Z||At(Z)||gl(Z)||un(Z)||Array.isArray(Z)?{}:Object.keys(Z).reduce((se,A)=>{const M=OD(Z[A]).map($=>$.__locatorRef).reduce(($,K)=>{const ye=Ht(m.values,K)||m.values[K];return ye!==void 0&&($[K]=ye),$},{});return Object.assign(se,M),se},{})});return rn(yn,(Z,se)=>{if(!Object.keys(Z).length)return;!Vt(Z,se)&&(x.validated?le():Ee())}),Gh(()=>{var Z;const se=(Z=De(Ze.keepValueOnUnmount))!==null&&Z!==void 0?Z:De(m.keepValuesOnUnmount),A=De(g);if(se||!m||O.pendingUnmount[Ze.id]){m==null||m.removePathState(A,I);return}O.pendingUnmount[Ze.id]=!0;const M=m.getPathState(A);if(Array.isArray(M==null?void 0:M.id)&&(M!=null&&M.multiple)?M!=null&&M.id.includes(Ze.id):(M==null?void 0:M.id)===Ze.id){if(M!=null&&M.multiple&&Array.isArray(M.value)){const K=M.value.findIndex(ye=>Vt(ye,De(Ze.checkedValue)));if(K>-1){const ye=[...M.value];ye.splice(K,1),m.setFieldValue(A,ye)}Array.isArray(M.id)&&M.id.splice(M.id.indexOf(Ze.id),1)}else m.unsetPathValue(De(g));m.removePathState(A,I)}}),Ze}function WD(t){const e=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),n=!!(t!=null&&t.syncVModel),r=typeof(t==null?void 0:t.syncVModel)=="string"?t.syncVModel:(t==null?void 0:t.modelPropName)||"modelValue",s=n&&!("initialValue"in(t||{}))?bh(Po(),r):t==null?void 0:t.initialValue;if(!t)return Object.assign(Object.assign({},e()),{initialValue:s});const i="valueProp"in t?t.valueProp:t.checkedValue,o="standalone"in t?!t.standalone:t.controlled,l=(t==null?void 0:t.modelPropName)||(t==null?void 0:t.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},e()),t||{}),{initialValue:s,controlled:o??!0,checkedValue:i,syncVModel:l})}function KD(t,e,n){const r=n!=null&&n.standalone?void 0:Mw(Pu),s=n==null?void 0:n.checkedValue,i=n==null?void 0:n.uncheckedValue;function o(l){const u=l.handleChange,c=me(()=>{const a=De(l.value),h=De(s);return Array.isArray(a)?a.findIndex(f=>Vt(f,h))>=0:Vt(h,a)});function d(a,h=!0){var f,p;if(c.value===((f=a==null?void 0:a.target)===null||f===void 0?void 0:f.checked)){h&&l.validate();return}const _=De(t),m=r==null?void 0:r.getPathState(_),g=yl(a);let T=(p=De(s))!==null&&p!==void 0?p:g;r&&(m!=null&&m.multiple)&&m.type==="checkbox"?T=E_(Ht(r.values,_)||[],T,void 0):(n==null?void 0:n.type)==="checkbox"&&(T=E_(De(l.value),T,De(i))),u(T,h)}return Object.assign(Object.assign({},l),{checked:c,checkedValue:s,uncheckedValue:i,handleChange:d})}return o(qw(t,e,n))}function QD({prop:t,value:e,handleChange:n,shouldValidate:r}){const s=Po();if(!s||!t)return;const i=typeof t=="string"?t:"modelValue",o=`update:${i}`;i in s.props&&(rn(e,l=>{Vt(l,bh(s,i))||s.emit(o,l)}),rn(()=>bh(s,i),l=>{if(l===_l&&e.value===void 0)return;const u=l===_l?void 0:l;Vt(u,e.value)||n(u,r())}))}function bh(t,e){if(t)return t.props[e]}const XD=Ln({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Zr().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:_l},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(t,e){const n=wi(t,"rules"),r=wi(t,"name"),s=wi(t,"label"),i=wi(t,"uncheckedValue"),o=wi(t,"keepValue"),{errors:l,value:u,errorMessage:c,validate:d,handleChange:a,handleBlur:h,setTouched:f,resetField:p,handleReset:_,meta:m,checked:g,setErrors:T}=GD(r,n,{validateOnMount:t.validateOnMount,bails:t.bails,standalone:t.standalone,type:e.attrs.type,initialValue:JD(t,e),checkedValue:e.attrs.value,uncheckedValue:i,label:s,validateOnValueUpdate:t.validateOnModelUpdate,keepValueOnUnmount:o,syncVModel:!0}),I=function(O,X=!0){a(O,X)},S=me(()=>{const{validateOnInput:D,validateOnChange:O,validateOnBlur:X,validateOnModelUpdate:ne}=YD(t);function H(J){h(J,X),At(e.attrs.onBlur)&&e.attrs.onBlur(J)}function le(J){I(J,D),At(e.attrs.onInput)&&e.attrs.onInput(J)}function Ee(J){I(J,O),At(e.attrs.onChange)&&e.attrs.onChange(J)}const Ce={name:t.name,onBlur:H,onInput:le,onChange:Ee};return Ce["onUpdate:modelValue"]=J=>I(J,ne),Ce}),L=me(()=>{const D=Object.assign({},S.value);ea(e.attrs.type)&&g&&(D.checked=g.value);const O=A_(t,e);return bD(O,e.attrs)&&(D.value=u.value),D}),x=me(()=>Object.assign(Object.assign({},S.value),{modelValue:u.value}));function Y(){return{field:L.value,componentField:x.value,value:u.value,meta:m,errors:l.value,errorMessage:c.value,validate:d,resetField:p,handleChange:I,handleInput:D=>I(D,!1),handleReset:_,handleBlur:S.value.onBlur,setTouched:f,setErrors:T}}return e.expose({value:u,meta:m,errors:l,errorMessage:c,setErrors:T,setTouched:f,reset:p,validate:d,handleChange:a}),()=>{const D=kl(A_(t,e)),O=Lw(D,e,Y);return D?Js(D,Object.assign(Object.assign({},e.attrs),L.value),O):O}}});function A_(t,e){let n=t.as||"";return!t.as&&!e.slots.default&&(n="input"),n}function YD(t){var e,n,r,s;const{validateOnInput:i,validateOnChange:o,validateOnBlur:l,validateOnModelUpdate:u}=Zr();return{validateOnInput:(e=t.validateOnInput)!==null&&e!==void 0?e:i,validateOnChange:(n=t.validateOnChange)!==null&&n!==void 0?n:o,validateOnBlur:(r=t.validateOnBlur)!==null&&r!==void 0?r:l,validateOnModelUpdate:(s=t.validateOnModelUpdate)!==null&&s!==void 0?s:u}}function JD(t,e){return ea(e.attrs.type)?y_(t,"modelValue")?t.modelValue:void 0:y_(t,"modelValue")?t.modelValue:e.attrs.value}const ZD=XD;let eN=0;const Ea=["bails","fieldsCount","id","multiple","type","validate"];function Hw(t){const e=Object.assign({},De((t==null?void 0:t.initialValues)||{})),n=te(t==null?void 0:t.validationSchema);return n&&un(n)&&At(n.cast)?ze(n.cast(e)||{}):ze(e)}function zw(t){var e;const n=eN++;let r=0;const s=Ve(!1),i=Ve(!1),o=Ve(0),l=[],u=Kn(Hw(t)),c=Ve([]),d=Ve({}),a=Ve({}),h=SD(()=>{a.value=c.value.reduce((w,E)=>(w[Mi(De(E.path))]=E,w),{})});function f(w,E){const C=J(w);if(!C){typeof w=="string"&&(d.value[Mi(w)]=Th(E));return}if(typeof w=="string"){const z=Mi(w);d.value[z]&&delete d.value[z]}C.errors=Th(E),C.valid=!C.errors.length}function p(w){Zt(w).forEach(E=>{f(E,w[E])})}t!=null&&t.initialErrors&&p(t.initialErrors);const _=me(()=>{const w=c.value.reduce((E,C)=>(C.errors.length&&(E[C.path]=C.errors),E),{});return Object.assign(Object.assign({},d.value),w)}),m=me(()=>Zt(_.value).reduce((w,E)=>{const C=_.value[E];return C!=null&&C.length&&(w[E]=C[0]),w},{})),g=me(()=>c.value.reduce((w,E)=>(w[E.path]={name:E.path||"",label:E.label||""},w),{})),T=me(()=>c.value.reduce((w,E)=>{var C;return w[E.path]=(C=E.bails)!==null&&C!==void 0?C:!0,w},{})),I=Object.assign({},(t==null?void 0:t.initialErrors)||{}),S=(e=t==null?void 0:t.keepValuesOnUnmount)!==null&&e!==void 0?e:!1,{initialValues:L,originalInitialValues:x,setInitialValues:Y}=nN(c,u,t),D=tN(c,u,x,m),O=me(()=>c.value.reduce((w,E)=>{const C=Ht(u,E.path);return ar(w,E.path,C),w},{})),X=t==null?void 0:t.validationSchema;function ne(w,E){var C,z;const ce=me(()=>Ht(L.value,De(w))),ie=a.value[De(w)],Oe=(E==null?void 0:E.type)==="checkbox"||(E==null?void 0:E.type)==="radio";if(ie&&Oe){ie.multiple=!0;const on=r++;return Array.isArray(ie.id)?ie.id.push(on):ie.id=[ie.id,on],ie.fieldsCount++,ie.__flags.pendingUnmount[on]=!1,ie}const Le=me(()=>Ht(u,De(w))),xe=De(w),lt=Te.findIndex(on=>on===xe);lt!==-1&&Te.splice(lt,1);const He=me(()=>{var on,vi,Du,Lf,Nu,Vu;return un(X)?(Du=(vi=(on=X).describe)===null||vi===void 0?void 0:vi.call(on,De(w)).required)!==null&&Du!==void 0?Du:!1:un(E==null?void 0:E.schema)&&(Vu=(Nu=(Lf=E==null?void 0:E.schema).describe)===null||Nu===void 0?void 0:Nu.call(Lf).required)!==null&&Vu!==void 0?Vu:!1}),wt=r++,Lt=Kn({id:wt,path:w,touched:!1,pending:!1,valid:!0,validated:!!(!((C=I[xe])===null||C===void 0)&&C.length),required:He,initialValue:ce,errors:lg([]),bails:(z=E==null?void 0:E.bails)!==null&&z!==void 0?z:!1,label:E==null?void 0:E.label,type:(E==null?void 0:E.type)||"default",value:Le,multiple:!1,__flags:{pendingUnmount:{[wt]:!1},pendingReset:!1},fieldsCount:1,validate:E==null?void 0:E.validate,dirty:me(()=>!Vt(te(Le),te(ce)))});return c.value.push(Lt),a.value[xe]=Lt,h(),m.value[xe]&&!I[xe]&&Ut(()=>{B(xe,{mode:"silent"})}),Qe(w)&&rn(w,on=>{h();const vi=ze(Le.value);a.value[on]=Lt,Ut(()=>{ar(u,on,vi)})}),Lt}const H=T_(Q,5),le=T_(Q,5),Ee=Eh(async w=>await(w==="silent"?H():le()),(w,[E])=>{const C=Zt(se.errorBag.value),ce=[...new Set([...Zt(w.results),...c.value.map(ie=>ie.path),...C])].sort().reduce((ie,Oe)=>{var Le;const xe=Oe,lt=J(xe)||ke(xe),He=((Le=w.results[xe])===null||Le===void 0?void 0:Le.errors)||[],wt=De(lt==null?void 0:lt.path)||xe,Lt=rN({errors:He,valid:!He.length},ie.results[wt]);return ie.results[wt]=Lt,Lt.valid||(ie.errors[wt]=Lt.errors[0]),lt&&d.value[wt]&&delete d.value[wt],lt?(lt.valid=Lt.valid,E==="silent"||E==="validated-only"&&!lt.validated||f(lt,Lt.errors),ie):(f(wt,He),ie)},{valid:w.valid,results:{},errors:{}});return w.values&&(ce.values=w.values),ce});function Ce(w){c.value.forEach(w)}function J(w){const E=typeof w=="string"?Mi(w):w;return typeof E=="string"?a.value[E]:E}function ke(w){return c.value.filter(C=>w.startsWith(C.path)).reduce((C,z)=>C?z.path.length>C.path.length?z:C:z,void 0)}let Te=[],ft;function Mt(w){return Te.push(w),ft||(ft=Ut(()=>{[...Te].sort().reverse().forEach(C=>{w_(u,C)}),Te=[],ft=null})),ft}function kt(w){return function(C,z){return function(ie){return ie instanceof Event&&(ie.preventDefault(),ie.stopPropagation()),Ce(Oe=>Oe.touched=!0),s.value=!0,o.value++,F().then(Oe=>{const Le=ze(u);if(Oe.valid&&typeof C=="function"){const xe=ze(O.value);let lt=w?xe:Le;return Oe.values&&(lt=Oe.values),C(lt,{evt:ie,controlledValues:xe,setErrors:p,setFieldError:f,setTouched:b,setFieldTouched:ye,setValues:$,setFieldValue:A,resetForm:P,resetField:k})}!Oe.valid&&typeof z=="function"&&z({values:Le,evt:ie,errors:Oe.errors,results:Oe.results})}).then(Oe=>(s.value=!1,Oe),Oe=>{throw s.value=!1,Oe})}}}const Ze=kt(!1);Ze.withControlled=kt(!0);function yn(w,E){const C=c.value.findIndex(ce=>ce.path===w&&(Array.isArray(ce.id)?ce.id.includes(E):ce.id===E)),z=c.value[C];if(!(C===-1||!z)){if(Ut(()=>{B(w,{mode:"silent",warn:!1})}),z.multiple&&z.fieldsCount&&z.fieldsCount--,Array.isArray(z.id)){const ce=z.id.indexOf(E);ce>=0&&z.id.splice(ce,1),delete z.__flags.pendingUnmount[E]}(!z.multiple||z.fieldsCount<=0)&&(c.value.splice(C,1),U(w),h(),delete a.value[w])}}function Z(w){Zt(a.value).forEach(E=>{E.startsWith(w)&&delete a.value[E]}),c.value=c.value.filter(E=>!E.path.startsWith(w)),Ut(()=>{h()})}const se={formId:n,values:u,controlledValues:O,errorBag:_,errors:m,schema:X,submitCount:o,meta:D,isSubmitting:s,isValidating:i,fieldArrays:l,keepValuesOnUnmount:S,validateSchema:te(X)?Ee:void 0,validate:F,setFieldError:f,validateField:B,setFieldValue:A,setValues:$,setErrors:p,setFieldTouched:ye,setTouched:b,resetForm:P,resetField:k,handleSubmit:Ze,useFieldModel:he,defineInputBinds:be,defineComponentBinds:Me,defineField:re,stageInitialValue:j,unsetInitialValue:U,setFieldInitialValue:V,createPathState:ne,getPathState:J,unsetPathValue:Mt,removePathState:yn,initialValues:L,getAllPathStates:()=>c.value,destroyPath:Z,isFieldTouched:Be,isFieldDirty:y,isFieldValid:v};function A(w,E,C=!0){const z=ze(E),ce=typeof w=="string"?w:w.path;J(ce)||ne(ce),ar(u,ce,z),C&&B(ce)}function M(w,E=!0){Zt(u).forEach(C=>{delete u[C]}),Zt(w).forEach(C=>{A(C,w[C],!1)}),E&&F()}function $(w,E=!0){So(u,w),l.forEach(C=>C&&C.reset()),E&&F()}function K(w,E){const C=J(De(w))||ne(w);return me({get(){return C.value},set(z){var ce;const ie=De(w);A(ie,z,(ce=De(E))!==null&&ce!==void 0?ce:!1)}})}function ye(w,E){const C=J(w);C&&(C.touched=E)}function Be(w){const E=J(w);return E?E.touched:c.value.filter(C=>C.path.startsWith(w)).some(C=>C.touched)}function y(w){const E=J(w);return E?E.dirty:c.value.filter(C=>C.path.startsWith(w)).some(C=>C.dirty)}function v(w){const E=J(w);return E?E.valid:c.value.filter(C=>C.path.startsWith(w)).every(C=>C.valid)}function b(w){if(typeof w=="boolean"){Ce(E=>{E.touched=w});return}Zt(w).forEach(E=>{ye(E,!!w[E])})}function k(w,E){var C;const z=E&&"value"in E?E.value:Ht(L.value,w),ce=J(w);ce&&(ce.__flags.pendingReset=!0),V(w,ze(z),!0),A(w,z,!1),ye(w,(C=E==null?void 0:E.touched)!==null&&C!==void 0?C:!1),f(w,(E==null?void 0:E.errors)||[]),Ut(()=>{ce&&(ce.__flags.pendingReset=!1)})}function P(w,E){let C=ze(w!=null&&w.values?w.values:x.value);C=E!=null&&E.force?C:So(x.value,C),C=un(X)&&At(X.cast)?X.cast(C):C,Y(C),Ce(z=>{var ce;z.__flags.pendingReset=!0,z.validated=!1,z.touched=((ce=w==null?void 0:w.touched)===null||ce===void 0?void 0:ce[z.path])||!1,A(z.path,Ht(C,z.path),!1),f(z.path,void 0)}),E!=null&&E.force?M(C,!1):$(C,!1),p((w==null?void 0:w.errors)||{}),o.value=(w==null?void 0:w.submitCount)||0,Ut(()=>{F({mode:"silent"}),Ce(z=>{z.__flags.pendingReset=!1})})}async function F(w){const E=(w==null?void 0:w.mode)||"force";if(E==="force"&&Ce(ie=>ie.validated=!0),se.validateSchema)return se.validateSchema(E);i.value=!0;const C=await Promise.all(c.value.map(ie=>ie.validate?ie.validate(w).then(Oe=>({key:ie.path,valid:Oe.valid,errors:Oe.errors})):Promise.resolve({key:ie.path,valid:!0,errors:[]})));i.value=!1;const z={},ce={};for(const ie of C)z[ie.key]={valid:ie.valid,errors:ie.errors},ie.errors.length&&(ce[ie.key]=ie.errors[0]);return{valid:C.every(ie=>ie.valid),results:z,errors:ce}}async function B(w,E){var C;const z=J(w);if(z&&(E==null?void 0:E.mode)!=="silent"&&(z.validated=!0),X){const{results:ce}=await Ee((E==null?void 0:E.mode)||"validated-only");return ce[w]||{errors:[],valid:!0}}return z!=null&&z.validate?z.validate(E):(!z&&(C=E==null?void 0:E.warn),Promise.resolve({errors:[],valid:!0}))}function U(w){w_(L.value,w)}function j(w,E,C=!1){V(w,E),ar(u,w,E),C&&!(t!=null&&t.initialValues)&&ar(x.value,w,ze(E))}function V(w,E,C=!1){ar(L.value,w,ze(E)),C&&ar(x.value,w,ze(E))}async function Q(){const w=te(X);if(!w)return{valid:!0,results:{},errors:{}};i.value=!0;const E=gl(w)||un(w)?await UD(w,u):await $D(w,u,{names:g.value,bailsMap:T.value});return i.value=!1,E}const ae=Ze((w,{evt:E})=>{ID(E)&&E.target.submit()});Dl(()=>{if(t!=null&&t.initialErrors&&p(t.initialErrors),t!=null&&t.initialTouched&&b(t.initialTouched),t!=null&&t.validateOnMount){F();return}se.validateSchema&&se.validateSchema("silent")}),Qe(X)&&rn(X,()=>{var w;(w=se.validateSchema)===null||w===void 0||w.call(se,"validated-only")}),Hs(Pu,se);function re(w,E){const C=At(E)||E==null?void 0:E.label,z=J(De(w))||ne(w,{label:C}),ce=()=>At(E)?E(wa(z,Ea)):E||{};function ie(){var He;z.touched=!0,((He=ce().validateOnBlur)!==null&&He!==void 0?He:Zr().validateOnBlur)&&B(z.path)}function Oe(){var He;((He=ce().validateOnInput)!==null&&He!==void 0?He:Zr().validateOnInput)&&Ut(()=>{B(z.path)})}function Le(){var He;((He=ce().validateOnChange)!==null&&He!==void 0?He:Zr().validateOnChange)&&Ut(()=>{B(z.path)})}const xe=me(()=>{const He={onChange:Le,onInput:Oe,onBlur:ie};return At(E)?Object.assign(Object.assign({},He),E(wa(z,Ea)).props||{}):E!=null&&E.props?Object.assign(Object.assign({},He),E.props(wa(z,Ea))):He});return[K(w,()=>{var He,wt,Lt;return(Lt=(He=ce().validateOnModelUpdate)!==null&&He!==void 0?He:(wt=Zr())===null||wt===void 0?void 0:wt.validateOnModelUpdate)!==null&&Lt!==void 0?Lt:!0}),xe]}function he(w){return Array.isArray(w)?w.map(E=>K(E,!0)):K(w)}function be(w,E){const[C,z]=re(w,E);function ce(){z.value.onBlur()}function ie(Le){const xe=yl(Le);A(De(w),xe,!1),z.value.onInput()}function Oe(Le){const xe=yl(Le);A(De(w),xe,!1),z.value.onChange()}return me(()=>Object.assign(Object.assign({},z.value),{onBlur:ce,onInput:ie,onChange:Oe,value:C.value}))}function Me(w,E){const[C,z]=re(w,E),ce=J(De(w));function ie(Oe){C.value=Oe}return me(()=>{const Oe=At(E)?E(wa(ce,Ea)):E||{};return Object.assign({[Oe.model||"modelValue"]:C.value,[`onUpdate:${Oe.model||"modelValue"}`]:ie},z.value)})}return Object.assign(Object.assign({},se),{values:Uh(u),handleReset:()=>P(),submitForm:ae})}function tN(t,e,n,r){const s={touched:"some",pending:"some",valid:"every"},i=me(()=>!Vt(e,te(n)));function o(){const u=t.value;return Zt(s).reduce((c,d)=>{const a=s[d];return c[d]=u[a](h=>h[d]),c},{})}const l=Kn(o());return lT(()=>{const u=o();l.touched=u.touched,l.valid=u.valid,l.pending=u.pending}),me(()=>Object.assign(Object.assign({initialValues:te(n)},l),{valid:l.valid&&!Zt(r.value).length,dirty:i.value}))}function nN(t,e,n){const r=Hw(n),s=Ve(r),i=Ve(ze(r));function o(l,u=!1){s.value=So(ze(s.value)||{},ze(l)),i.value=So(ze(i.value)||{},ze(l)),u&&t.value.forEach(c=>{if(c.touched)return;const a=Ht(s.value,c.path);ar(e,c.path,ze(a))})}return{initialValues:s,originalInitialValues:i,setInitialValues:o}}function rN(t,e){return e?{valid:t.valid&&e.valid,errors:[...t.errors,...e.errors]}:t}const sN=Ln({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(t,e){const n=zt(Pu,void 0),r=me(()=>n==null?void 0:n.errors.value[t.name]);function s(){return{message:r.value}}return()=>{if(!r.value)return;const i=t.as?kl(t.as):t.as,o=Lw(i,e,s),l=Object.assign({role:"alert"},e.attrs);return!i&&(Array.isArray(o)||!o)&&(o!=null&&o.length)?o:(Array.isArray(o)||!o)&&!(o!=null&&o.length)?Js(i||"span",l,r.value):Js(i,l,o)}}}),Ih=sN;/**
  * vee-validate v4.12.5
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */const vl=t=>t!==null&&!!t&&typeof t=="object"&&!Array.isArray(t);function iN(t){return Number(t)>=0}function oN(t){return typeof t=="object"&&t!==null}function aN(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}function S_(t){if(!oN(t)||aN(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Gw(t,e){return Object.keys(e).forEach(n=>{if(S_(e[n])&&S_(t[n])){t[n]||(t[n]={}),Gw(t[n],e[n]);return}t[n]=e[n]}),t}function Ww(t,e={abortEarly:!1}){return{__type:"VVTypedSchema",async parse(r){var s;try{return{value:await t.validate(r,Object.assign({},e)),errors:[]}}catch(i){const o=i;if(o.name!=="ValidationError")throw i;if(!(!((s=o.inner)===null||s===void 0)&&s.length)&&o.errors.length)return{errors:[{path:o.path,errors:o.errors}]};const l=o.inner.reduce((u,c)=>{const d=c.path||"";return u[d]||(u[d]={errors:[],path:d}),u[d].errors.push(...c.errors),u},{});return{errors:Object.values(l)}}},cast(r){try{return t.cast(r)}catch{const i=t.getDefault();return vl(i)&&vl(r)?Gw(i,r):r}},describe(r){if(!r)return R_(t.spec);const s=lN(r,t);return s?R_(s):{required:!1,exists:!1}}}}function R_(t){return{required:!t.optional,exists:!0}}function lN(t,e){if(!P_(e))return null;if(ta(t)){const s=e.fields[Cu(t)];return(s==null?void 0:s.spec)||null}const n=(t||"").split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let s=0;s<n.length;s++){const i=n[s];if(P_(r)&&i in r.fields?r=r.fields[i]:iN(i)&&uN(r)&&(r=r.innerType),s===n.length-1)return r.spec}return null}function P_(t){return vl(t)&&t.type==="object"}function uN(t){return vl(t)&&t.type==="array"}var Ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function As(t){this._maxSize=t,this.clear()}As.prototype.clear=function(){this._size=0,this._values=Object.create(null)};As.prototype.get=function(t){return this._values[t]};As.prototype.set=function(t,e){return this._size>=this._maxSize&&this.clear(),t in this._values||this._size++,this._values[t]=e};var hN=/[^.^\]^[]+|(?=\[\]|\.\.)/g,Kw=/^\d+$/,dN=/^\d/,fN=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,pN=/^\s*(['"]?)(.*?)(\1)\s*$/,kf=512,C_=new As(kf),k_=new As(kf),O_=new As(kf),os={Cache:As,split:Ah,normalizePath:vc,setter:function(t){var e=vc(t);return k_.get(t)||k_.set(t,function(r,s){for(var i=0,o=e.length,l=r;i<o-1;){var u=e[i];if(u==="__proto__"||u==="constructor"||u==="prototype")return r;l=l[e[i++]]}l[e[i]]=s})},getter:function(t,e){var n=vc(t);return O_.get(t)||O_.set(t,function(s){for(var i=0,o=n.length;i<o;)if(s!=null||!e)s=s[n[i++]];else return;return s})},join:function(t){return t.reduce(function(e,n){return e+(Of(n)||Kw.test(n)?"["+n+"]":(e?".":"")+n)},"")},forEach:function(t,e,n){mN(Array.isArray(t)?t:Ah(t),e,n)}};function vc(t){return C_.get(t)||C_.set(t,Ah(t).map(function(e){return e.replace(pN,"$2")}))}function Ah(t){return t.match(hN)||[""]}function mN(t,e,n){var r=t.length,s,i,o,l;for(i=0;i<r;i++)s=t[i],s&&(yN(s)&&(s='"'+s+'"'),l=Of(s),o=!l&&/^\d+$/.test(s),e.call(n,s,l,o,i,t))}function Of(t){return typeof t=="string"&&t&&["'",'"'].indexOf(t.charAt(0))!==-1}function _N(t){return t.match(dN)&&!t.match(Kw)}function gN(t){return fN.test(t)}function yN(t){return!Of(t)&&(_N(t)||gN(t))}const vN=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,ku=t=>t.match(vN)||[],Ou=t=>t[0].toUpperCase()+t.slice(1),xf=(t,e)=>ku(t).join(e).toLowerCase(),Qw=t=>ku(t).reduce((e,n)=>`${e}${e?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),wN=t=>Ou(Qw(t)),EN=t=>xf(t,"_"),TN=t=>xf(t,"-"),bN=t=>Ou(xf(t," ")),IN=t=>ku(t).map(Ou).join(" ");var wc={words:ku,upperFirst:Ou,camelCase:Qw,pascalCase:wN,snakeCase:EN,kebabCase:TN,sentenceCase:bN,titleCase:IN},Df={exports:{}};Df.exports=function(t){return Xw(AN(t),t)};Df.exports.array=Xw;function Xw(t,e){var n=t.length,r=new Array(n),s={},i=n,o=SN(e),l=RN(t);for(e.forEach(function(c){if(!l.has(c[0])||!l.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});i--;)s[i]||u(t[i],i,new Set);return r;function u(c,d,a){if(a.has(c)){var h;try{h=", node was:"+JSON.stringify(c)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!l.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!s[d]){s[d]=!0;var f=o.get(c)||new Set;if(f=Array.from(f),d=f.length){a.add(c);do{var p=f[--d];u(p,l.get(p),a)}while(d);a.delete(c)}r[--n]=c}}}function AN(t){for(var e=new Set,n=0,r=t.length;n<r;n++){var s=t[n];e.add(s[0]),e.add(s[1])}return Array.from(e)}function SN(t){for(var e=new Map,n=0,r=t.length;n<r;n++){var s=t[n];e.has(s[0])||e.set(s[0],new Set),e.has(s[1])||e.set(s[1],new Set),e.get(s[0]).add(s[1])}return e}function RN(t){for(var e=new Map,n=0,r=t.length;n<r;n++)e.set(t[n],n);return e}var PN=Df.exports;const CN=cN(PN),kN=Object.prototype.toString,ON=Error.prototype.toString,xN=RegExp.prototype.toString,DN=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",NN=/^Symbol\((.*)\)(.*)$/;function VN(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function x_(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return VN(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return DN.call(t).replace(NN,"Symbol($1)");const r=kN.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+ON.call(t)+"]":r==="RegExp"?xN.call(t):null}function Sr(t,e){let n=x_(t,e);return n!==null?n:JSON.stringify(t,function(r,s){let i=x_(this[r],e);return i!==null?i:s},2)}function Yw(t){return t==null?[]:[].concat(t)}let Jw,MN=/\$\{\s*(\w+)\s*\}/g;Jw=Symbol.toStringTag;class jt extends Error{static formatError(e,n){const r=n.label||n.path||"this";return r!==n.path&&(n=Object.assign({},n,{path:r})),typeof e=="string"?e.replace(MN,(s,i)=>Sr(n[i])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,s,i){super(),this.value=void 0,this.path=void 0,this.type=void 0,this.errors=void 0,this.params=void 0,this.inner=void 0,this[Jw]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=s,this.errors=[],this.inner=[],Yw(e).forEach(o=>{if(jt.isError(o)){this.errors.push(...o.errors);const l=o.inner.length?o.inner:[o];this.inner.push(...l)}else this.errors.push(o)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],!i&&Error.captureStackTrace&&Error.captureStackTrace(this,jt)}}let wn={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const s=r!=null&&r!==n?` (cast from the value \`${Sr(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${Sr(n,!0)}\``+s:`${t} must match the configured type. The validated value was: \`${Sr(n,!0)}\``+s}},an={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},lr={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Sh={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},LN={isValue:"${path} field must be ${value}"},Rh={noUnknown:"${path} field has unspecified keys: ${unknown}"},FN={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},UN={notType:t=>{const{path:e,value:n,spec:r}=t,s=r.types.length;if(Array.isArray(n)){if(n.length<s)return`${e} tuple value has too few items, expected a length of ${s} but got ${n.length} for value: \`${Sr(n,!0)}\``;if(n.length>s)return`${e} tuple value has too many items, expected a length of ${s} but got ${n.length} for value: \`${Sr(n,!0)}\``}return jt.formatError(wn.notType,t)}};Object.assign(Object.create(null),{mixed:wn,string:an,number:lr,date:Sh,object:Rh,array:FN,boolean:LN,tuple:UN});const Nf=t=>t&&t.__isYupSchema__;class wl{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:i}=n,o=typeof r=="function"?r:(...l)=>l.every(u=>u===r);return new wl(e,(l,u)=>{var c;let d=o(...l)?s:i;return(c=d==null?void 0:d(u))!=null?c:u})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(i=>i.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),s=this.fn(r,e,n);if(s===void 0||s===e)return e;if(!Nf(s))throw new TypeError("conditions must return a schema object");return s.resolve(n)}}const Ta={context:"$",value:"."};class Ss{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Ta.context,this.isValue=this.key[0]===Ta.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Ta.context:this.isValue?Ta.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&os.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let s=this.isContext?r:this.isValue?e:n;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,n){return this.getValue(e,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Ss.prototype.__isYupRef=!0;const zn=t=>t==null;function ks(t){function e({value:n,path:r="",options:s,originalValue:i,schema:o},l,u){const{name:c,test:d,params:a,message:h,skipAbsent:f}=t;let{parent:p,context:_,abortEarly:m=o.spec.abortEarly,disableStackTrace:g=o.spec.disableStackTrace}=s;function T(ne){return Ss.isRef(ne)?ne.getValue(n,p,_):ne}function I(ne={}){var H;const le=Object.assign({value:n,originalValue:i,label:o.spec.label,path:ne.path||r,spec:o.spec},a,ne.params);for(const Ce of Object.keys(le))le[Ce]=T(le[Ce]);const Ee=new jt(jt.formatError(ne.message||h,le),n,le.path,ne.type||c,(H=ne.disableStackTrace)!=null?H:g);return Ee.params=le,Ee}const S=m?l:u;let L={path:r,parent:p,type:c,from:s.from,createError:I,resolve:T,options:s,originalValue:i,schema:o};const x=ne=>{jt.isError(ne)?S(ne):ne?u(null):S(I())},Y=ne=>{jt.isError(ne)?S(ne):l(ne)};if(f&&zn(n))return x(!0);let O;try{var X;if(O=d.call(L,n,L),typeof((X=O)==null?void 0:X.then)=="function"){if(s.sync)throw new Error(`Validation test of type: "${L.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(O).then(x,Y)}}catch(ne){Y(ne);return}x(O)}return e.OPTIONS=t,e}function $N(t,e,n,r=n){let s,i,o;return e?(os.forEach(e,(l,u,c)=>{let d=u?l.slice(1,l.length-1):l;t=t.resolve({context:r,parent:s,value:n});let a=t.type==="tuple",h=c?parseInt(d,10):0;if(t.innerType||a){if(a&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&h>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${e}. because there is no value at that index. `);s=n,n=n&&n[h],t=a?t.spec.types[h]:t.innerType}if(!c){if(!t.fields||!t.fields[d])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${t.type}")`);s=n,n=n&&n[d],t=t.fields[d]}i=d,o=u?"["+l+"]":"."+l}),{schema:t,parent:s,parentPath:i}):{parent:s,parentPath:e,schema:t}}class El extends Set{describe(){const e=[];for(const n of this.values())e.push(Ss.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new El(this.values())}merge(e,n){const r=this.clone();return e.forEach(s=>r.add(s)),n.forEach(s=>r.delete(s)),r}}function $s(t,e=new Map){if(Nf(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=$s(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,s]of t.entries())n.set(r,$s(s,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add($s(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,s]of Object.entries(t))n[r]=$s(s,e)}else throw Error(`Unable to clone ${t}`);return n}class gn{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new El,this._blacklist=new El,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(wn.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e==null?void 0:e.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=$s(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const s=Object.assign({},n.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(i=>{e.tests.forEach(o=>{i.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((s,i)=>i.resolve(s,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,s,i;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(s=e.recursive)!=null?s:this.spec.recursive,disableStackTrace:(i=e.disableStackTrace)!=null?i:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),s=n.assert==="ignore-optionality",i=r._cast(e,n);if(n.assert!==!1&&!r.isType(i)){if(s&&zn(i))return i;let o=Sr(e),l=Sr(i);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(l!==o?`result of cast: ${l}`:""))}return i}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((s,i)=>i.call(this,s,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,s){let{path:i,originalValue:o=e,strict:l=this.spec.strict}=n,u=e;l||(u=this._cast(u,Object.assign({assert:!1},n)));let c=[];for(let d of Object.values(this.internalTests))d&&c.push(d);this.runTests({path:i,value:u,originalValue:o,options:n,tests:c},r,d=>{if(d.length)return s(d,u);this.runTests({path:i,value:u,originalValue:o,options:n,tests:this.tests},r,s)})}runTests(e,n,r){let s=!1,{tests:i,value:o,originalValue:l,path:u,options:c}=e,d=_=>{s||(s=!0,n(_,o))},a=_=>{s||(s=!0,r(_,o))},h=i.length,f=[];if(!h)return a([]);let p={value:o,originalValue:l,path:u,options:c,schema:this};for(let _=0;_<i.length;_++){const m=i[_];m(p,d,function(T){T&&(Array.isArray(T)?f.push(...T):f.push(T)),--h<=0&&a(f)})}}asNestedTest({key:e,index:n,parent:r,parentPath:s,originalParent:i,options:o}){const l=e??n;if(l==null)throw TypeError("Must include `key` or `index` for nested validations");const u=typeof l=="number";let c=r[l];const d=Object.assign({},o,{strict:!0,parent:r,value:c,originalValue:i[l],key:void 0,[u?"index":"key"]:l,path:u||l.includes(".")?`${s||""}[${c?l:`"${l}"`}]`:(s?`${s}.`:"")+e});return(a,h,f)=>this.resolve(d)._validate(c,d,h,f)}validate(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return new Promise((o,l)=>s._validate(e,n,(u,c)=>{jt.isError(u)&&(u.value=c),l(u)},(u,c)=>{u.length?l(new jt(u,c,void 0,void 0,i)):o(c)}))}validateSync(e,n){var r;let s=this.resolve(Object.assign({},n,{value:e})),i,o=(r=n==null?void 0:n.disableStackTrace)!=null?r:s.spec.disableStackTrace;return s._validate(e,Object.assign({},n,{sync:!0}),(l,u)=>{throw jt.isError(l)&&(l.value=u),l},(l,u)=>{if(l.length)throw new jt(l,e,void 0,void 0,o);i=u}),i}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(jt.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(jt.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):$s(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=ks({message:n,name:"nullable",test(s){return s===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=ks({message:n,name:"optionality",test(s){return s===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=wn.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=wn.notNull){return this.nullability(!1,e)}required(e=wn.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=wn.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),s=ks(n),i=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(i||o.OPTIONS.test===s.OPTIONS.test))),r.tests.push(s),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),s=Yw(e).map(i=>new Ss(i));return s.forEach(i=>{i.isSibling&&r.deps.push(i.key)}),r.conditions.push(typeof n=="function"?new wl(s,n):wl.fromOptions(s,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=ks({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=wn.oneOf){let r=this.clone();return e.forEach(s=>{r._whitelist.add(s),r._blacklist.delete(s)}),r.internalTests.whiteList=ks({message:n,name:"oneOf",skipAbsent:!0,test(s){let i=this.schema._whitelist,o=i.resolveAll(this.resolve);return o.includes(s)?!0:this.createError({params:{values:Array.from(i).join(", "),resolved:o}})}}),r}notOneOf(e,n=wn.notOneOf){let r=this.clone();return e.forEach(s=>{r._blacklist.add(s),r._whitelist.delete(s)}),r.internalTests.blacklist=ks({message:n,name:"notOneOf",test(s){let i=this.schema._blacklist,o=i.resolveAll(this.resolve);return o.includes(s)?this.createError({params:{values:Array.from(i).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:s,optional:i,nullable:o}=n.spec;return{meta:s,label:r,optional:i,nullable:o,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(u=>({name:u.OPTIONS.name,params:u.OPTIONS.params})).filter((u,c,d)=>d.findIndex(a=>a.name===u.name)===c)}}}gn.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])gn.prototype[`${t}At`]=function(e,n,r={}){const{parent:s,parentPath:i,schema:o}=$N(this,e,n,r.context);return o[t](s&&s[i],Object.assign({},r,{parent:s,path:e}))};for(const t of["equals","is"])gn.prototype[t]=gn.prototype.oneOf;for(const t of["not","nope"])gn.prototype[t]=gn.prototype.notOneOf;let BN=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,jN=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,qN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,HN=t=>zn(t)||t===t.trim(),zN={}.toString();function Bn(){return new Zw}class Zw extends gn{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const s=e!=null&&e.toString?e.toString():e;return s===zN?e:s})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||wn.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=an.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=an.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=an.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,s,i;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:s,name:i}=n:s=n),this.test({name:i||"matches",message:s||an.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=an.email){return this.matches(BN,{name:"email",message:e,excludeEmptyString:!0})}url(e=an.url){return this.matches(jN,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=an.uuid){return this.matches(qN,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=an.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:HN})}lowercase(e=an.lowercase){return this.transform(n=>zn(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>zn(n)||n===n.toLowerCase()})}uppercase(e=an.uppercase){return this.transform(n=>zn(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>zn(n)||n===n.toUpperCase()})}}Bn.prototype=Zw.prototype;let GN=t=>t!=+t;function eE(){return new tE}class tE extends gn{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!GN(e)}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce)return e;let s=e;if(typeof s=="string"){if(s=s.replace(/\s/g,""),s==="")return NaN;s=+s}return r.isType(s)||s===null?s:parseFloat(s)})})}min(e,n=lr.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(e)}})}max(e,n=lr.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(e)}})}lessThan(e,n=lr.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(r){return r<this.resolve(e)}})}moreThan(e,n=lr.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(r){return r>this.resolve(e)}})}positive(e=lr.positive){return this.moreThan(0,e)}negative(e=lr.negative){return this.lessThan(0,e)}integer(e=lr.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(e=>zn(e)?e:e|0)}round(e){var n;let r=["ceil","floor","round","trunc"];if(e=((n=e)==null?void 0:n.toLowerCase())||"round",e==="trunc")return this.truncate();if(r.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(s=>zn(s)?s:Math[e](s))}}eE.prototype=tE.prototype;const WN=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function $n(t,e=0){return Number(t)||e}function KN(t){const e=WN.exec(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;const n={year:$n(e[1]),month:$n(e[2],1)-1,day:$n(e[3],1),hour:$n(e[4]),minute:$n(e[5]),second:$n(e[6]),millisecond:e[7]?$n(e[7].substring(0,3)):0,z:e[8]||void 0,plusMinus:e[9]||void 0,hourOffset:$n(e[10]),minuteOffset:$n(e[11])};if(n.z===void 0&&n.plusMinus===void 0)return new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond).valueOf();let r=0;return n.z!=="Z"&&n.plusMinus!==void 0&&(r=n.hourOffset*60+n.minuteOffset,n.plusMinus==="+"&&(r=0-r)),Date.UTC(n.year,n.month,n.day,n.hour,n.minute+r,n.second,n.millisecond)}let QN=new Date(""),XN=t=>Object.prototype.toString.call(t)==="[object Date]";class xu extends gn{constructor(){super({type:"date",check(e){return XN(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=KN(e),isNaN(e)?xu.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(Ss.isRef(e))r=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(e,n=Sh.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(s){return s>=this.resolve(r)}})}max(e,n=Sh.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(s){return s<=this.resolve(r)}})}}xu.INVALID_DATE=QN;xu.prototype;function YN(t,e=[]){let n=[],r=new Set,s=new Set(e.map(([o,l])=>`${o}-${l}`));function i(o,l){let u=os.split(o)[0];r.add(u),s.has(`${l}-${u}`)||n.push([l,u])}for(const o of Object.keys(t)){let l=t[o];r.add(o),Ss.isRef(l)&&l.isSibling?i(l.path,o):Nf(l)&&"deps"in l&&l.deps.forEach(u=>i(u,o))}return CN.array(Array.from(r),n).reverse()}function D_(t,e){let n=1/0;return t.some((r,s)=>{var i;if((i=e.path)!=null&&i.includes(r))return n=s,!0}),n}function nE(t){return(e,n)=>D_(t,e)-D_(t,n)}const JN=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function Fa(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=Fa(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=Fa(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(Fa)}):"optional"in t?t.optional():t}const ZN=(t,e)=>{const n=[...os.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),s=os.getter(os.join(n),!0)(t);return!!(s&&r in s)};let N_=t=>Object.prototype.toString.call(t)==="[object Object]";function eV(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const tV=nE([]);function Vf(t){return new rE(t)}class rE extends gn{constructor(e){super({type:"object",check(n){return N_(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=tV,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let s=super._cast(e,n);if(s===void 0)return this.getDefault(n);if(!this._typeCheck(s))return s;let i=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,l=[].concat(this._nodes,Object.keys(s).filter(a=>!this._nodes.includes(a))),u={},c=Object.assign({},n,{parent:u,__validating:n.__validating||!1}),d=!1;for(const a of l){let h=i[a],f=a in s;if(h){let p,_=s[a];c.path=(n.path?`${n.path}.`:"")+a,h=h.resolve({value:_,context:n.context,parent:u});let m=h instanceof gn?h.spec:void 0,g=m==null?void 0:m.strict;if(m!=null&&m.strip){d=d||a in s;continue}p=!n.__validating||!g?h.cast(s[a],c):s[a],p!==void 0&&(u[a]=p)}else f&&!o&&(u[a]=s[a]);(f!==a in u||u[a]!==s[a])&&(d=!0)}return d?u:s}_validate(e,n={},r,s){let{from:i=[],originalValue:o=e,recursive:l=this.spec.recursive}=n;n.from=[{schema:this,value:o},...i],n.__validating=!0,n.originalValue=o,super._validate(e,n,r,(u,c)=>{if(!l||!N_(c)){s(u,c);return}o=o||c;let d=[];for(let a of this._nodes){let h=this.fields[a];!h||Ss.isRef(h)||d.push(h.asNestedTest({options:n,key:a,parent:c,parentPath:n.path,originalParent:o}))}this.runTests({tests:d,value:c,originalValue:o,options:n},r,a=>{s(a.sort(this._sortErrors).concat(u),c)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[s,i]of Object.entries(this.fields)){const o=r[s];r[s]=o===void 0?i:o}return n.withMutation(s=>s.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var s;const i=this.fields[r];let o=e;(s=o)!=null&&s.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),n[r]=i&&"getDefault"in i?i.getDefault(o):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=YN(e,n),r._sortErrors=nE(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),s=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),s)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return Fa(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,s])=>e.includes(r)&&e.includes(s)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let s=os.getter(e,!0);return this.transform(i=>{if(!i)return i;let o=i;return ZN(i,e)&&(o=Object.assign({},i),r||delete o[e],o[n]=s(i)),o})}json(){return this.transform(JN)}noUnknown(e=!0,n=Rh.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(s){if(s==null)return!0;const i=eV(this.schema,s);return!e||i.length===0||this.createError({params:{unknown:i.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=Rh.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const s of Object.keys(n))r[e(s)]=n[s];return r})}camelCase(){return this.transformKeys(wc.camelCase)}snakeCase(){return this.transformKeys(wc.snakeCase)}constantCase(){return this.transformKeys(e=>wc.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[i,o]of Object.entries(n.fields)){var s;let l=e;(s=l)!=null&&s.value&&(l=Object.assign({},l,{parent:l.value,value:l.value[i]})),r.fields[i]=o.describe(l)}return r}}Vf.prototype=rE.prototype;const nV={class:"mb-3"},rV=ee("label",{class:"inline-block mb-2"},"Email",-1),sV={class:"mb-3"},iV=ee("label",{class:"inline-block mb-2"},"Password",-1),oV=["disabled"],aV=Ln({__name:"FormLogin",setup(t){const e=Vf({email:Bn().email().required(),password:Bn().min(6).required()}),{handleSubmit:n}=zw({validationSchema:Ww(e)}),r=Ve(!1),s=Ve(!1),i=Ve("bg-blue-500"),o=Ve("Please wait! We are logging you in."),l=Zo(),u=n(async c=>{s.value=!0,r.value=!0,i.value="bg-blue-500",o.value="Please wait! We are logging you in.";try{await l.authenticate(c)}catch{r.value=!1,i.value="bg-red-500",o.value="Invalid login details.";return}i.value="bg-green-500",o.value="Success! You are now logging in.",window.location.reload()});return(c,d)=>{const a=no("vee-field");return Xt(),Rn(Bt,null,[s.value?(Xt(),Rn("div",{key:0,class:cn(["text-white text-center font-bold p-4 rounded mb-4",i.value])},Ls(o.value),3)):Xh("",!0),ee("form",{onSubmit:d[0]||(d[0]=(...h)=>te(u)&&te(u)(...h))},[ee("div",nV,[rV,we(a,{name:"email",type:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),we(te(Ih),{class:"text-red-600",name:"email"})]),ee("div",sV,[iV,we(a,{name:"password",type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"}),we(te(Ih),{class:"text-red-600",name:"password"})]),ee("button",{type:"submit",class:cn(["block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700",{"cursor-not-allowed disabled:opacity-75":r.value}]),disabled:r.value}," Submit ",10,oV)],32)],64)}}}),lV={class:"mb-3"},uV=ee("label",{class:"inline-block mb-2"},"Name",-1),cV={class:"mb-3"},hV=ee("label",{class:"inline-block mb-2"},"Email",-1),dV={class:"mb-3"},fV=ee("label",{class:"inline-block mb-2"},"Age",-1),pV={class:"mb-3"},mV=ee("label",{class:"inline-block mb-2"},"Password",-1),_V={class:"mb-3"},gV=ee("label",{class:"inline-block mb-2"},"Confirm Password",-1),yV={class:"mb-3"},vV=ee("label",{class:"inline-block mb-2"},"Country",-1),wV=ee("option",{value:"Kazakhstan"},"Kazakhstan",-1),EV=ee("option",{value:"Russia"},"Russia",-1),TV=ee("option",{value:"China"},"China",-1),bV={class:"mb-3 pl-6"},IV=ee("label",{class:"inline-block"},"Accept terms of service",-1),AV=["disabled"],SV=Ln({__name:"FormRegister",setup(t){const e=Vf({name:Bn().required().min(3).trim(),email:Bn().email().required(),age:eE().typeError("age must be a number").required().min(18).max(100),password:Bn().min(6).required(),confirmPassword:Bn().required().test("passwords-match","passwords must match",function(c){return this.parent.password===c}),country:Bn().required(),tos:Bn().required("Must accept the Terms of Service.")}),{handleSubmit:n}=zw({validationSchema:Ww(e),initialValues:{country:"Kazakhstan"}}),r=Ve(!1),s=Ve(!1),i=Ve("bg-blue-500"),o=Ve("Please wait! Your account is being created."),l=Zo(),u=n(async c=>{s.value=!0,r.value=!0,i.value="bg-blue-500",o.value="Please wait! Your account is being created.";try{await l.createUser(c)}catch{r.value=!1,i.value="bg-red-500",o.value="An unexpected error occurred. Please try again later.";return}i.value="bg-green-500",o.value="Success your account has been created!",window.location.reload()});return(c,d)=>{const a=no("vee-field"),h=no("ErrorMessage");return Xt(),Rn(Bt,null,[s.value?(Xt(),Rn("div",{key:0,class:cn(["text-white text-center font-bold p-4 rounded mb-4",i.value])},Ls(o.value),3)):Xh("",!0),ee("form",{onSubmit:d[0]||(d[0]=(...f)=>te(u)&&te(u)(...f))},[ee("div",lV,[uV,we(a,{name:"name",type:"text",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Name"}),we(h,{class:"text-red-600",name:"name"})]),ee("div",cV,[hV,we(a,{name:"email",type:"email",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Enter Email"}),we(h,{class:"text-red-600",name:"email"})]),ee("div",dV,[fV,we(a,{name:"age",type:"number",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"}),we(h,{class:"text-red-600",name:"age"})]),ee("div",pV,[mV,we(a,{name:"password",type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Password"}),we(h,{class:"text-red-600",name:"password"})]),ee("div",_V,[gV,we(a,{name:"confirmPassword",type:"password",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded",placeholder:"Confirm Password"}),we(h,{class:"text-red-600",name:"confirmPassword"})]),ee("div",yV,[vV,we(a,{as:"select",name:"country",class:"block w-full py-1.5 px-3 text-gray-800 border border-gray-300 transition duration-500 focus:outline-none focus:border-black rounded"},{default:ns(()=>[wV,EV,TV]),_:1}),we(h,{class:"text-red-600",name:"country"})]),ee("div",bV,[we(a,{name:"tos",type:"checkbox",value:"1",class:"w-4 h-4 float-left -ml-6 mt-1 rounded"}),IV,we(h,{class:"text-red-600",name:"tos",as:"div"})]),ee("button",{type:"submit",class:cn(["block w-full bg-purple-600 text-white py-1.5 px-3 rounded transition hover:bg-purple-700",{"cursor-not-allowed disabled:opacity-75":r.value}]),disabled:r.value}," Submit ",10,AV)],32)],64)}}}),RV={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},PV={class:"fixed inset-0 transition-opacity"},CV=ee("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"",-1),kV={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},OV={class:"py-4 text-left px-6"},xV={class:"flex justify-between items-center pb-4"},DV=ee("p",{class:"text-2xl font-bold"},"Your Account",-1),NV=ee("i",{class:"fas fa-times"},null,-1),VV=[NV],MV={class:"flex flex-wrap mb-4"},LV={class:"flex-auto text-center"},FV={class:"flex-auto text-center"},UV=Ln({__name:"AppAuth",setup(t){const e=zg(),n={login:aV,register:SV},r=Ve("login");return(s,i)=>(Xt(),Rn("div",{class:cn(["fixed z-10 inset-0 overflow-y-auto",te(e).hiddenClass]),id:"modal"},[ee("div",RV,[ee("div",PV,[ee("div",{class:"absolute inset-0 bg-gray-800 opacity-75",onClick:i[0]||(i[0]=Kr((...o)=>te(e).toggle&&te(e).toggle(...o),["prevent"]))})]),CV,ee("div",kV,[ee("div",OV,[ee("div",xV,[DV,ee("div",{class:"modal-close cursor-pointer z-50",onClick:i[1]||(i[1]=Kr((...o)=>te(e).toggle&&te(e).toggle(...o),["prevent"]))},VV)]),ee("ul",MV,[ee("li",LV,[ee("a",{class:cn(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":r.value==="login","hover:text-blue-600":r.value==="register"}]),href:"#",onClick:i[2]||(i[2]=Kr(o=>r.value="login",["prevent"]))}," Login ",2)]),ee("li",FV,[ee("a",{class:cn(["block rounded py-3 px-4 transition",{"hover:text-white text-white bg-blue-600":r.value==="register","hover:text-blue-600":r.value==="login"}]),href:"#",onClick:i[3]||(i[3]=Kr(o=>r.value="register",["prevent"]))}," Register ",2)])]),(Xt(),Qh(kl(n[r.value])))])])])],2))}});var Ph={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var a=this||n;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var h=this||n;if(a=parseFloat(a),h.ctx||d(),typeof a<"u"&&a>=0&&a<=1){if(h._volume=a,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(a,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var p=h._howls[f]._getSoundIds(),_=0;_<p.length;_++){var m=h._howls[f]._soundById(p[_]);m&&m._node&&(m._node.volume=m._volume*a)}return h}return h._volume},mute:function(a){var h=this||n;h.ctx||d(),h._muted=a,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(a?0:h._volume,n.ctx.currentTime);for(var f=0;f<h._howls.length;f++)if(!h._howls[f]._webAudio)for(var p=h._howls[f]._getSoundIds(),_=0;_<p.length;_++){var m=h._howls[f]._soundById(p[_]);m&&m._node&&(m._node.muted=a?!0:m._muted)}return h},stop:function(){for(var a=this||n,h=0;h<a._howls.length;h++)a._howls[h].stop();return a},unload:function(){for(var a=this||n,h=a._howls.length-1;h>=0;h--)a._howls[h].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,d()),a},codecs:function(a){return(this||n)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||n;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var h=new Audio;h.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||n,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return a}if(!h||typeof h.canPlayType!="function")return a;var f=h.canPlayType("audio/mpeg;").replace(/^no$/,""),p=a._navigator?a._navigator.userAgent:"",_=p.match(/OPR\/(\d+)/g),m=_&&parseInt(_[0].split("/")[1],10)<33,g=p.indexOf("Safari")!==-1&&p.indexOf("Chrome")===-1,T=p.match(/Version\/(.*?) /),I=g&&T&&parseInt(T[1],10)<15;return a._codecs={mp3:!!(!m&&(f||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!I&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!I&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||n;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var h=function(f){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var p=new Audio;p._unlocked=!0,a._releaseHtml5Audio(p)}catch{a.noAudio=!0;break}for(var _=0;_<a._howls.length;_++)if(!a._howls[_]._webAudio)for(var m=a._howls[_]._getSoundIds(),g=0;g<m.length;g++){var T=a._howls[_]._soundById(m[g]);T&&T._node&&!T._node._unlocked&&(T._node._unlocked=!0,T._node.load())}a._autoResume();var I=a.ctx.createBufferSource();I.buffer=a._scratchBuffer,I.connect(a.ctx.destination),typeof I.start>"u"?I.noteOn(0):I.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),I.onended=function(){I.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var S=0;S<a._howls.length;S++)a._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),a}},_obtainHtml5Audio:function(){var a=this||n;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var h=this||n;return a._unlocked&&h._html5AudioPool.push(a),h},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!n.usingWebAudio)){for(var h=0;h<a._howls.length;h++)if(a._howls[h]._webAudio){for(var f=0;f<a._howls[h]._sounds.length;f++)if(!a._howls[h]._sounds[f]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(a.autoSuspend){a._suspendTimer=null,a.state="suspending";var p=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(p,p)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!n.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var h=0;h<a._howls.length;h++)a._howls[h]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var n=new e,r=function(a){var h=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(a)};r.prototype={init:function(a){var h=this;return n.ctx||d(),h._autoplay=a.autoplay||!1,h._format=typeof a.format!="string"?a.format:[a.format],h._html5=a.html5||!1,h._muted=a.mute||!1,h._loop=a.loop||!1,h._pool=a.pool||5,h._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,h._rate=a.rate||1,h._sprite=a.sprite||{},h._src=typeof a.src!="string"?a.src:[a.src],h._volume=a.volume!==void 0?a.volume:1,h._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=a.onend?[{fn:a.onend}]:[],h._onfade=a.onfade?[{fn:a.onfade}]:[],h._onload=a.onload?[{fn:a.onload}]:[],h._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],h._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],h._onpause=a.onpause?[{fn:a.onpause}]:[],h._onplay=a.onplay?[{fn:a.onplay}]:[],h._onstop=a.onstop?[{fn:a.onstop}]:[],h._onmute=a.onmute?[{fn:a.onmute}]:[],h._onvolume=a.onvolume?[{fn:a.onvolume}]:[],h._onrate=a.onrate?[{fn:a.onrate}]:[],h._onseek=a.onseek?[{fn:a.onseek}]:[],h._onunlock=a.onunlock?[{fn:a.onunlock}]:[],h._onresume=[],h._webAudio=n.usingWebAudio&&!h._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var a=this,h=null;if(n.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var f=0;f<a._src.length;f++){var p,_;if(a._format&&a._format[f])p=a._format[f];else{if(_=a._src[f],typeof _!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}p=/^data:audio\/([^;,]+);/i.exec(_),p||(p=/\.([^.]+)$/.exec(_.split("?",1)[0])),p&&(p=p[1].toLowerCase())}if(p||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),p&&n.codecs(p)){h=a._src[f];break}}if(!h){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=h,a._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new s(a),a._webAudio&&o(a),a},play:function(a,h){var f=this,p=null;if(typeof a=="number")p=a,a=null;else{if(typeof a=="string"&&f._state==="loaded"&&!f._sprite[a])return null;if(typeof a>"u"&&(a="__default",!f._playLock)){for(var _=0,m=0;m<f._sounds.length;m++)f._sounds[m]._paused&&!f._sounds[m]._ended&&(_++,p=f._sounds[m]._id);_===1?a=null:p=null}}var g=p?f._soundById(p):f._inactiveSound();if(!g)return null;if(p&&!a&&(a=g._sprite||"__default"),f._state!=="loaded"){g._sprite=a,g._ended=!1;var T=g._id;return f._queue.push({event:"play",action:function(){f.play(T)}}),T}if(p&&!g._paused)return h||f._loadQueue("play"),g._id;f._webAudio&&n._autoResume();var I=Math.max(0,g._seek>0?g._seek:f._sprite[a][0]/1e3),S=Math.max(0,(f._sprite[a][0]+f._sprite[a][1])/1e3-I),L=S*1e3/Math.abs(g._rate),x=f._sprite[a][0]/1e3,Y=(f._sprite[a][0]+f._sprite[a][1])/1e3;g._sprite=a,g._ended=!1;var D=function(){g._paused=!1,g._seek=I,g._start=x,g._stop=Y,g._loop=!!(g._loop||f._sprite[a][2])};if(I>=Y){f._ended(g);return}var O=g._node;if(f._webAudio){var X=function(){f._playLock=!1,D(),f._refreshBuffer(g);var Ee=g._muted||f._muted?0:g._volume;O.gain.setValueAtTime(Ee,n.ctx.currentTime),g._playStart=n.ctx.currentTime,typeof O.bufferSource.start>"u"?g._loop?O.bufferSource.noteGrainOn(0,I,86400):O.bufferSource.noteGrainOn(0,I,S):g._loop?O.bufferSource.start(0,I,86400):O.bufferSource.start(0,I,S),L!==1/0&&(f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),L)),h||setTimeout(function(){f._emit("play",g._id),f._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?X():(f._playLock=!0,f.once("resume",X),f._clearTimer(g._id))}else{var ne=function(){O.currentTime=I,O.muted=g._muted||f._muted||n._muted||O.muted,O.volume=g._volume*n.volume(),O.playbackRate=g._rate;try{var Ee=O.play();if(Ee&&typeof Promise<"u"&&(Ee instanceof Promise||typeof Ee.then=="function")?(f._playLock=!0,D(),Ee.then(function(){f._playLock=!1,O._unlocked=!0,h?f._loadQueue():f._emit("play",g._id)}).catch(function(){f._playLock=!1,f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),g._ended=!0,g._paused=!0})):h||(f._playLock=!1,D(),f._emit("play",g._id)),O.playbackRate=g._rate,O.paused){f._emit("playerror",g._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||g._loop?f._endTimers[g._id]=setTimeout(f._ended.bind(f,g),L):(f._endTimers[g._id]=function(){f._ended(g),O.removeEventListener("ended",f._endTimers[g._id],!1)},O.addEventListener("ended",f._endTimers[g._id],!1))}catch(Ce){f._emit("playerror",g._id,Ce)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=f._src,O.load());var H=window&&window.ejecta||!O.readyState&&n._navigator.isCocoonJS;if(O.readyState>=3||H)ne();else{f._playLock=!0,f._state="loading";var le=function(){f._state="loaded",ne(),O.removeEventListener(n._canPlayEvent,le,!1)};O.addEventListener(n._canPlayEvent,le,!1),f._clearTimer(g._id)}}return g._id},pause:function(a){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(a)}}),h;for(var f=h._getSoundIds(a),p=0;p<f.length;p++){h._clearTimer(f[p]);var _=h._soundById(f[p]);if(_&&!_._paused&&(_._seek=h.seek(f[p]),_._rateSeek=0,_._paused=!0,h._stopFade(f[p]),_._node))if(h._webAudio){if(!_._node.bufferSource)continue;typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),h._cleanBuffer(_._node)}else(!isNaN(_._node.duration)||_._node.duration===1/0)&&_._node.pause();arguments[1]||h._emit("pause",_?_._id:null)}return h},stop:function(a,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(a)}}),f;for(var p=f._getSoundIds(a),_=0;_<p.length;_++){f._clearTimer(p[_]);var m=f._soundById(p[_]);m&&(m._seek=m._start||0,m._rateSeek=0,m._paused=!0,m._ended=!0,f._stopFade(p[_]),m._node&&(f._webAudio?m._node.bufferSource&&(typeof m._node.bufferSource.stop>"u"?m._node.bufferSource.noteOff(0):m._node.bufferSource.stop(0),f._cleanBuffer(m._node)):(!isNaN(m._node.duration)||m._node.duration===1/0)&&(m._node.currentTime=m._start||0,m._node.pause(),m._node.duration===1/0&&f._clearSound(m._node))),h||f._emit("stop",m._id))}return f},mute:function(a,h){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(a,h)}}),f;if(typeof h>"u")if(typeof a=="boolean")f._muted=a;else return f._muted;for(var p=f._getSoundIds(h),_=0;_<p.length;_++){var m=f._soundById(p[_]);m&&(m._muted=a,m._interval&&f._stopFade(m._id),f._webAudio&&m._node?m._node.gain.setValueAtTime(a?0:m._volume,n.ctx.currentTime):m._node&&(m._node.muted=n._muted?!0:a),f._emit("mute",m._id))}return f},volume:function(){var a=this,h=arguments,f,p;if(h.length===0)return a._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var _=a._getSoundIds(),m=_.indexOf(h[0]);m>=0?p=parseInt(h[0],10):f=parseFloat(h[0])}else h.length>=2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));var g;if(typeof f<"u"&&f>=0&&f<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,h)}}),a;typeof p>"u"&&(a._volume=f),p=a._getSoundIds(p);for(var T=0;T<p.length;T++)g=a._soundById(p[T]),g&&(g._volume=f,h[2]||a._stopFade(p[T]),a._webAudio&&g._node&&!g._muted?g._node.gain.setValueAtTime(f,n.ctx.currentTime):g._node&&!g._muted&&(g._node.volume=f*n.volume()),a._emit("volume",g._id))}else return g=p?a._soundById(p):a._sounds[0],g?g._volume:0;return a},fade:function(a,h,f,p){var _=this;if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"fade",action:function(){_.fade(a,h,f,p)}}),_;a=Math.min(Math.max(0,parseFloat(a)),1),h=Math.min(Math.max(0,parseFloat(h)),1),f=parseFloat(f),_.volume(a,p);for(var m=_._getSoundIds(p),g=0;g<m.length;g++){var T=_._soundById(m[g]);if(T){if(p||_._stopFade(m[g]),_._webAudio&&!T._muted){var I=n.ctx.currentTime,S=I+f/1e3;T._volume=a,T._node.gain.setValueAtTime(a,I),T._node.gain.linearRampToValueAtTime(h,S)}_._startFadeInterval(T,a,h,f,m[g],typeof p>"u")}}return _},_startFadeInterval:function(a,h,f,p,_,m){var g=this,T=h,I=f-h,S=Math.abs(I/.01),L=Math.max(4,S>0?p/S:p),x=Date.now();a._fadeTo=f,a._interval=setInterval(function(){var Y=(Date.now()-x)/p;x=Date.now(),T+=I*Y,T=Math.round(T*100)/100,I<0?T=Math.max(f,T):T=Math.min(f,T),g._webAudio?a._volume=T:g.volume(T,a._id,!0),m&&(g._volume=T),(f<h&&T<=f||f>h&&T>=f)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,g.volume(f,a._id),g._emit("fade",a._id))},L)},_stopFade:function(a){var h=this,f=h._soundById(a);return f&&f._interval&&(h._webAudio&&f._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(f._interval),f._interval=null,h.volume(f._fadeTo,a),f._fadeTo=null,h._emit("fade",a)),h},loop:function(){var a=this,h=arguments,f,p,_;if(h.length===0)return a._loop;if(h.length===1)if(typeof h[0]=="boolean")f=h[0],a._loop=f;else return _=a._soundById(parseInt(h[0],10)),_?_._loop:!1;else h.length===2&&(f=h[0],p=parseInt(h[1],10));for(var m=a._getSoundIds(p),g=0;g<m.length;g++)_=a._soundById(m[g]),_&&(_._loop=f,a._webAudio&&_._node&&_._node.bufferSource&&(_._node.bufferSource.loop=f,f&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop,a.playing(m[g])&&(a.pause(m[g],!0),a.play(m[g],!0)))));return a},rate:function(){var a=this,h=arguments,f,p;if(h.length===0)p=a._sounds[0]._id;else if(h.length===1){var _=a._getSoundIds(),m=_.indexOf(h[0]);m>=0?p=parseInt(h[0],10):f=parseFloat(h[0])}else h.length===2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));var g;if(typeof f=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,h)}}),a;typeof p>"u"&&(a._rate=f),p=a._getSoundIds(p);for(var T=0;T<p.length;T++)if(g=a._soundById(p[T]),g){a.playing(p[T])&&(g._rateSeek=a.seek(p[T]),g._playStart=a._webAudio?n.ctx.currentTime:g._playStart),g._rate=f,a._webAudio&&g._node&&g._node.bufferSource?g._node.bufferSource.playbackRate.setValueAtTime(f,n.ctx.currentTime):g._node&&(g._node.playbackRate=f);var I=a.seek(p[T]),S=(a._sprite[g._sprite][0]+a._sprite[g._sprite][1])/1e3-I,L=S*1e3/Math.abs(g._rate);(a._endTimers[p[T]]||!g._paused)&&(a._clearTimer(p[T]),a._endTimers[p[T]]=setTimeout(a._ended.bind(a,g),L)),a._emit("rate",g._id)}}else return g=a._soundById(p),g?g._rate:a._rate;return a},seek:function(){var a=this,h=arguments,f,p;if(h.length===0)a._sounds.length&&(p=a._sounds[0]._id);else if(h.length===1){var _=a._getSoundIds(),m=_.indexOf(h[0]);m>=0?p=parseInt(h[0],10):a._sounds.length&&(p=a._sounds[0]._id,f=parseFloat(h[0]))}else h.length===2&&(f=parseFloat(h[0]),p=parseInt(h[1],10));if(typeof p>"u")return 0;if(typeof f=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,h)}}),a;var g=a._soundById(p);if(g)if(typeof f=="number"&&f>=0){var T=a.playing(p);T&&a.pause(p,!0),g._seek=f,g._ended=!1,a._clearTimer(p),!a._webAudio&&g._node&&!isNaN(g._node.duration)&&(g._node.currentTime=f);var I=function(){T&&a.play(p,!0),a._emit("seek",p)};if(T&&!a._webAudio){var S=function(){a._playLock?setTimeout(S,0):I()};setTimeout(S,0)}else I()}else if(a._webAudio){var L=a.playing(p)?n.ctx.currentTime-g._playStart:0,x=g._rateSeek?g._rateSeek-g._seek:0;return g._seek+(x+L*Math.abs(g._rate))}else return g._node.currentTime;return a},playing:function(a){var h=this;if(typeof a=="number"){var f=h._soundById(a);return f?!f._paused:!1}for(var p=0;p<h._sounds.length;p++)if(!h._sounds[p]._paused)return!0;return!1},duration:function(a){var h=this,f=h._duration,p=h._soundById(a);return p&&(f=h._sprite[p._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var a=this,h=a._sounds,f=0;f<h.length;f++)h[f]._paused||a.stop(h[f]._id),a._webAudio||(a._clearSound(h[f]._node),h[f]._node.removeEventListener("error",h[f]._errorFn,!1),h[f]._node.removeEventListener(n._canPlayEvent,h[f]._loadFn,!1),h[f]._node.removeEventListener("ended",h[f]._endFn,!1),n._releaseHtml5Audio(h[f]._node)),delete h[f]._node,a._clearTimer(h[f]._id);var p=n._howls.indexOf(a);p>=0&&n._howls.splice(p,1);var _=!0;for(f=0;f<n._howls.length;f++)if(n._howls[f]._src===a._src||a._src.indexOf(n._howls[f]._src)>=0){_=!1;break}return i&&_&&delete i[a._src],n.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,h,f,p){var _=this,m=_["_on"+a];return typeof h=="function"&&m.push(p?{id:f,fn:h,once:p}:{id:f,fn:h}),_},off:function(a,h,f){var p=this,_=p["_on"+a],m=0;if(typeof h=="number"&&(f=h,h=null),h||f)for(m=0;m<_.length;m++){var g=f===_[m].id;if(h===_[m].fn&&g||!h&&g){_.splice(m,1);break}}else if(a)p["_on"+a]=[];else{var T=Object.keys(p);for(m=0;m<T.length;m++)T[m].indexOf("_on")===0&&Array.isArray(p[T[m]])&&(p[T[m]]=[])}return p},once:function(a,h,f){var p=this;return p.on(a,h,f,1),p},_emit:function(a,h,f){for(var p=this,_=p["_on"+a],m=_.length-1;m>=0;m--)(!_[m].id||_[m].id===h||a==="load")&&(setTimeout((function(g){g.call(this,h,f)}).bind(p,_[m].fn),0),_[m].once&&p.off(a,_[m].fn,_[m].id));return p._loadQueue(a),p},_loadQueue:function(a){var h=this;if(h._queue.length>0){var f=h._queue[0];f.event===a&&(h._queue.shift(),h._loadQueue()),a||f.action()}return h},_ended:function(a){var h=this,f=a._sprite;if(!h._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(h._ended.bind(h,a),100),h;var p=!!(a._loop||h._sprite[f][2]);if(h._emit("end",a._id),!h._webAudio&&p&&h.stop(a._id,!0).play(a._id),h._webAudio&&p){h._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=n.ctx.currentTime;var _=(a._stop-a._start)*1e3/Math.abs(a._rate);h._endTimers[a._id]=setTimeout(h._ended.bind(h,a),_)}return h._webAudio&&!p&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,h._clearTimer(a._id),h._cleanBuffer(a._node),n._autoSuspend()),!h._webAudio&&!p&&h.stop(a._id,!0),h},_clearTimer:function(a){var h=this;if(h._endTimers[a]){if(typeof h._endTimers[a]!="function")clearTimeout(h._endTimers[a]);else{var f=h._soundById(a);f&&f._node&&f._node.removeEventListener("ended",h._endTimers[a],!1)}delete h._endTimers[a]}return h},_soundById:function(a){for(var h=this,f=0;f<h._sounds.length;f++)if(a===h._sounds[f]._id)return h._sounds[f];return null},_inactiveSound:function(){var a=this;a._drain();for(var h=0;h<a._sounds.length;h++)if(a._sounds[h]._ended)return a._sounds[h].reset();return new s(a)},_drain:function(){var a=this,h=a._pool,f=0,p=0;if(!(a._sounds.length<h)){for(p=0;p<a._sounds.length;p++)a._sounds[p]._ended&&f++;for(p=a._sounds.length-1;p>=0;p--){if(f<=h)return;a._sounds[p]._ended&&(a._webAudio&&a._sounds[p]._node&&a._sounds[p]._node.disconnect(0),a._sounds.splice(p,1),f--)}}},_getSoundIds:function(a){var h=this;if(typeof a>"u"){for(var f=[],p=0;p<h._sounds.length;p++)f.push(h._sounds[p]._id);return f}else return[a]},_refreshBuffer:function(a){var h=this;return a._node.bufferSource=n.ctx.createBufferSource(),a._node.bufferSource.buffer=i[h._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,n.ctx.currentTime),h},_cleanBuffer:function(a){var h=this,f=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!a.bufferSource)return h;if(n._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),f))try{a.bufferSource.buffer=n._scratchBuffer}catch{}return a.bufferSource=null,h},_clearSound:function(a){var h=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);h||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(a){this._parent=a,this.init()};s.prototype={init:function(){var a=this,h=a._parent;return a._muted=h._muted,a._loop=h._loop,a._volume=h._volume,a._rate=h._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,h._sounds.push(a),a.create(),a},create:function(){var a=this,h=a._parent,f=n._muted||a._muted||a._parent._muted?0:a._volume;return h._webAudio?(a._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),a._node.gain.setValueAtTime(f,n.ctx.currentTime),a._node.paused=!0,a._node.connect(n.masterGain)):n.noAudio||(a._node=n._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(n._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=h._src,a._node.preload=h._preload===!0?"auto":h._preload,a._node.volume=f*n.volume(),a._node.load()),a},reset:function(){var a=this,h=a._parent;return a._muted=h._muted,a._loop=h._loop,a._volume=h._volume,a._rate=h._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,h=a._parent;h._duration=Math.ceil(a._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),a._node.removeEventListener(n._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,h=a._parent;h._duration===1/0&&(h._duration=Math.ceil(a._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var i={},o=function(a){var h=a._src;if(i[h]){a._duration=i[h].duration,c(a);return}if(/^data:[^;]+;base64,/.test(h)){for(var f=atob(h.split(",")[1]),p=new Uint8Array(f.length),_=0;_<f.length;++_)p[_]=f.charCodeAt(_);u(p.buffer,a)}else{var m=new XMLHttpRequest;m.open(a._xhr.method,h,!0),m.withCredentials=a._xhr.withCredentials,m.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(g){m.setRequestHeader(g,a._xhr.headers[g])}),m.onload=function(){var g=(m.status+"")[0];if(g!=="0"&&g!=="2"&&g!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+m.status+".");return}u(m.response,a)},m.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete i[h],a.load())},l(m)}},l=function(a){try{a.send()}catch{a.onerror()}},u=function(a,h){var f=function(){h._emit("loaderror",null,"Decoding audio data failed.")},p=function(_){_&&h._sounds.length>0?(i[h._src]=_,c(h,_)):f()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(a).then(p).catch(f):n.ctx.decodeAudioData(a,p,f)},c=function(a,h){h&&!a._duration&&(a._duration=h.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},d=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),h=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=h?parseInt(h[1],10):null;if(a&&f&&f<9){var p=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!p&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof Ms<"u"?(Ms.HowlerGlobal=e,Ms.Howler=n,Ms.Howl=r,Ms.Sound=s):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=s)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var s=r._howls.length-1;s>=0;s--)r._howls[s].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,s){var i=this;if(!i.ctx||!i.ctx.listener)return i;if(r=typeof r!="number"?i._pos[1]:r,s=typeof s!="number"?i._pos[2]:s,typeof n=="number")i._pos=[n,r,s],typeof i.ctx.listener.positionX<"u"?(i.ctx.listener.positionX.setTargetAtTime(i._pos[0],Howler.ctx.currentTime,.1),i.ctx.listener.positionY.setTargetAtTime(i._pos[1],Howler.ctx.currentTime,.1),i.ctx.listener.positionZ.setTargetAtTime(i._pos[2],Howler.ctx.currentTime,.1)):i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]);else return i._pos;return i},HowlerGlobal.prototype.orientation=function(n,r,s,i,o,l){var u=this;if(!u.ctx||!u.ctx.listener)return u;var c=u._orientation;if(r=typeof r!="number"?c[1]:r,s=typeof s!="number"?c[2]:s,i=typeof i!="number"?c[3]:i,o=typeof o!="number"?c[4]:o,l=typeof l!="number"?c[5]:l,typeof n=="number")u._orientation=[n,r,s,i,o,l],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,r,s,i,o,l);else return c;return u},Howl.prototype.init=function(n){return function(r){var s=this;return s._orientation=r.orientation||[1,0,0],s._stereo=r.stereo||null,s._pos=r.pos||null,s._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},s._onstereo=r.onstereo?[{fn:r.onstereo}]:[],s._onpos=r.onpos?[{fn:r.onpos}]:[],s._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"stereo",action:function(){s.stereo(n,r)}}),s;var i=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")s._stereo=n,s._pos=[n,0,0];else return s._stereo;for(var o=s._getSoundIds(r),l=0;l<o.length;l++){var u=s._soundById(o[l]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,i),i==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),s._emit("stereo",u._id);else return u._stereo}return s},Howl.prototype.pos=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,s,i)}}),o;if(r=typeof r!="number"?0:r,s=typeof s!="number"?-.5:s,typeof i>"u")if(typeof n=="number")o._pos=[n,r,s];else return o._pos;for(var l=o._getSoundIds(i),u=0;u<l.length;u++){var c=o._soundById(l[u]);if(c)if(typeof n=="number")c._pos=[n,r,s],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setPosition(n,r,s)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,r,s,i){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,s,i)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,s=typeof s!="number"?o._orientation[2]:s,typeof i>"u")if(typeof n=="number")o._orientation=[n,r,s];else return o._orientation;for(var l=o._getSoundIds(i),u=0;u<l.length;u++){var c=o._soundById(l[u]);if(c)if(typeof n=="number")c._orientation=[n,r,s],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(s,Howler.ctx.currentTime)):c._panner.setOrientation(n,r,s)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,s,i,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")s=r[0],typeof i>"u"&&(s.pannerAttr||(s.pannerAttr={coneInnerAngle:s.coneInnerAngle,coneOuterAngle:s.coneOuterAngle,coneOuterGain:s.coneOuterGain,distanceModel:s.distanceModel,maxDistance:s.maxDistance,refDistance:s.refDistance,rolloffFactor:s.rolloffFactor,panningModel:s.panningModel}),n._pannerAttr={coneInnerAngle:typeof s.pannerAttr.coneInnerAngle<"u"?s.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof s.pannerAttr.coneOuterAngle<"u"?s.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof s.pannerAttr.coneOuterGain<"u"?s.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof s.pannerAttr.distanceModel<"u"?s.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof s.pannerAttr.maxDistance<"u"?s.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof s.pannerAttr.refDistance<"u"?s.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof s.pannerAttr.rolloffFactor<"u"?s.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof s.pannerAttr.panningModel<"u"?s.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(s=r[0],i=parseInt(r[1],10));for(var l=n._getSoundIds(i),u=0;u<l.length;u++)if(o=n._soundById(l[u]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:c.coneOuterGain,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:c.distanceModel,maxDistance:typeof s.maxDistance<"u"?s.maxDistance:c.maxDistance,refDistance:typeof s.refDistance<"u"?s.refDistance:c.refDistance,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:c.rolloffFactor,panningModel:typeof s.panningModel<"u"?s.panningModel:c.panningModel};var d=o._panner;d||(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"),d=o._panner),d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel}return n},Sound.prototype.init=function(n){return function(){var r=this,s=r._parent;r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,n.call(this),r._stereo?s.stereo(r._stereo):r._pos&&s.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,s=r._parent;return r._orientation=s._orientation,r._stereo=s._stereo,r._pos=s._pos,r._pannerAttr=s._pannerAttr,r._stereo?s.stereo(r._stereo):r._pos?s.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,s._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(Ph);function V_(t){const e=Math.floor(t/60)||0,n=Math.round(t-e*60||0);return`${e}:${n<10?"0":""}${n}`}const $V=ed("player",()=>{const t=Ve(null),e=Ve(null),n=Ve("00:00"),r=Ve("00:00"),s=Ve("0%");async function i(d){e.value instanceof Ph.Howl&&e.value.unload(),t.value=d,e.value=new Ph.Howl({src:[d.url],html5:!0}),e.value&&(e.value.play(),e.value.on("play",()=>{requestAnimationFrame(l)}))}async function o(){e.value&&(e.value.playing()?e.value.pause():e.value.play())}function l(){e.value&&(n.value=V_(e.value.seek()),r.value=V_(e.value.duration()),s.value=`${e.value.seek()/e.value.duration()*100}%`,e.value.playing()&&requestAnimationFrame(l))}function u(d){var m;if(!((m=e.value)!=null&&m.playing)||!d.currentTarget||!e.value)return;const{x:a,width:h}=d.currentTarget.getBoundingClientRect(),p=(d.clientX-a)/h,_=e.value.duration()*p;e.value.once("seek",()=>{requestAnimationFrame(l)}),e.value.seek(_)}const c=me(()=>{var d,a;return(d=e.value)!=null&&d.playing?(a=e.value)==null?void 0:a.playing():!1});return{current_song:t,newSong:i,toggleAudio:o,isPlaying:c,sound:e,seek:n,duration:r,progress:s,updateSeek:u}}),BV={key:0,class:"fixed bottom-0 left-0 bg-white px-4 py-2 w-full"},jV={class:"text-center"},qV={class:"song-title font-bold"},HV={class:"song-artist"},zV={class:"flex flex-nowrap gap-4 items-center"},GV={class:"player-currenttime"},WV=ee("i",{class:"fas fa-circle"},null,-1),KV=[WV],QV={class:"player-duration"},XV=Ln({__name:"SongPlayer",setup(t){const e=$V();return(n,r)=>te(e).current_song?(Xt(),Rn("div",BV,[ee("div",jV,[ee("span",qV,Ls(te(e).current_song.modified_name),1),Ui(" by "),ee("span",HV,Ls(te(e).current_song.display_name),1)]),ee("div",zV,[ee("button",{type:"button",onClick:r[0]||(r[0]=(...s)=>te(e).toggleAudio&&te(e).toggleAudio(...s))},[ee("i",{class:cn(["fa text-gray-500 text-xl",{"fa-play":!te(e).isPlaying,"fa-pause":te(e).isPlaying}])},null,2)]),ee("div",GV,Ls(te(e).seek),1),ee("div",{class:"w-full h-2 rounded bg-gray-200 relative cursor-pointer",onClick:r[1]||(r[1]=Kr((...s)=>te(e).updateSeek&&te(e).updateSeek(...s),["prevent"]))},[ee("span",{class:"absolute -top-2.5 -ml-2.5 text-gray-800 text-lg",style:Yi({left:te(e).progress})},KV,4),ee("span",{class:"block h-2 rounded bg-gradient-to-r from-green-500 to-green-400",style:Yi({width:te(e).progress})},null,4)]),ee("div",QV,Ls(te(e).duration),1)])])):Xh("",!0)}}),YV=Ln({__name:"App",setup(t){const e=Zo();return Ki.currentUser&&(e.userLoggedIn=!0),(n,r)=>{const s=no("router-view");return Xt(),Rn(Bt,null,[we(hD),we(s,null,{default:ns(({Component:i})=>[we(Jh,{name:"fade",mode:"out-in"},{default:ns(()=>[(Xt(),Qh(kl(i)))]),_:2},1024)]),_:1}),we(XV),we(UV)],64)}}}),JV="modulepreload",ZV=function(t){return"/"+t},M_={},ba=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const i=document.getElementsByTagName("link");s=Promise.all(n.map(o=>{if(o=ZV(o),o in M_)return;M_[o]=!0;const l=o.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!r)for(let a=i.length-1;a>=0;a--){const h=i[a];if(h.href===o&&(!l||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":JV,l||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),l)return new Promise((a,h)=>{d.addEventListener("load",a),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var sE={exports:{}};/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */(function(t,e){(function(n,r){t.exports=r()})(Ms,function(){var n={};n.version="0.2.0";var r=n.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};n.configure=function(p){var _,m;for(_ in p)m=p[_],m!==void 0&&p.hasOwnProperty(_)&&(r[_]=m);return this},n.status=null,n.set=function(p){var _=n.isStarted();p=s(p,r.minimum,1),n.status=p===1?null:p;var m=n.render(!_),g=m.querySelector(r.barSelector),T=r.speed,I=r.easing;return m.offsetWidth,l(function(S){r.positionUsing===""&&(r.positionUsing=n.getPositioningCSS()),u(g,o(p,T,I)),p===1?(u(m,{transition:"none",opacity:1}),m.offsetWidth,setTimeout(function(){u(m,{transition:"all "+T+"ms linear",opacity:0}),setTimeout(function(){n.remove(),S()},T)},T)):setTimeout(S,T)}),this},n.isStarted=function(){return typeof n.status=="number"},n.start=function(){n.status||n.set(0);var p=function(){setTimeout(function(){n.status&&(n.trickle(),p())},r.trickleSpeed)};return r.trickle&&p(),this},n.done=function(p){return!p&&!n.status?this:n.inc(.3+.5*Math.random()).set(1)},n.inc=function(p){var _=n.status;return _?(typeof p!="number"&&(p=(1-_)*s(Math.random()*_,.1,.95)),_=s(_+p,0,.994),n.set(_)):n.start()},n.trickle=function(){return n.inc(Math.random()*r.trickleRate)},function(){var p=0,_=0;n.promise=function(m){return!m||m.state()==="resolved"?this:(_===0&&n.start(),p++,_++,m.always(function(){_--,_===0?(p=0,n.done()):n.set((p-_)/p)}),this)}}(),n.render=function(p){if(n.isRendered())return document.getElementById("nprogress");d(document.documentElement,"nprogress-busy");var _=document.createElement("div");_.id="nprogress",_.innerHTML=r.template;var m=_.querySelector(r.barSelector),g=p?"-100":i(n.status||0),T=document.querySelector(r.parent),I;return u(m,{transition:"all 0 linear",transform:"translate3d("+g+"%,0,0)"}),r.showSpinner||(I=_.querySelector(r.spinnerSelector),I&&f(I)),T!=document.body&&d(T,"nprogress-custom-parent"),T.appendChild(_),_},n.remove=function(){a(document.documentElement,"nprogress-busy"),a(document.querySelector(r.parent),"nprogress-custom-parent");var p=document.getElementById("nprogress");p&&f(p)},n.isRendered=function(){return!!document.getElementById("nprogress")},n.getPositioningCSS=function(){var p=document.body.style,_="WebkitTransform"in p?"Webkit":"MozTransform"in p?"Moz":"msTransform"in p?"ms":"OTransform"in p?"O":"";return _+"Perspective"in p?"translate3d":_+"Transform"in p?"translate":"margin"};function s(p,_,m){return p<_?_:p>m?m:p}function i(p){return(-1+p)*100}function o(p,_,m){var g;return r.positionUsing==="translate3d"?g={transform:"translate3d("+i(p)+"%,0,0)"}:r.positionUsing==="translate"?g={transform:"translate("+i(p)+"%,0)"}:g={"margin-left":i(p)+"%"},g.transition="all "+_+"ms "+m,g}var l=function(){var p=[];function _(){var m=p.shift();m&&m(_)}return function(m){p.push(m),p.length==1&&_()}}(),u=function(){var p=["Webkit","O","Moz","ms"],_={};function m(S){return S.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(L,x){return x.toUpperCase()})}function g(S){var L=document.body.style;if(S in L)return S;for(var x=p.length,Y=S.charAt(0).toUpperCase()+S.slice(1),D;x--;)if(D=p[x]+Y,D in L)return D;return S}function T(S){return S=m(S),_[S]||(_[S]=g(S))}function I(S,L,x){L=T(L),S.style[L]=x}return function(S,L){var x=arguments,Y,D;if(x.length==2)for(Y in L)D=L[Y],D!==void 0&&L.hasOwnProperty(Y)&&I(S,Y,D);else I(S,x[1],x[2])}}();function c(p,_){var m=typeof p=="string"?p:h(p);return m.indexOf(" "+_+" ")>=0}function d(p,_){var m=h(p),g=m+_;c(m,_)||(p.className=g.substring(1))}function a(p,_){var m=h(p),g;c(p,_)&&(g=m.replace(" "+_+" "," "),p.className=g.substring(1,g.length-1))}function h(p){return(" "+(p.className||"")+" ").replace(/\s+/gi," ")}function f(p){p&&p.parentNode&&p.parentNode.removeChild(p)}return n})})(sE);var iE=sE.exports;const eM=[{name:"home",path:"/",component:()=>ba(()=>import("./HomeView-N7YG6POY.js"),__vite__mapDeps([]))},{name:"about",path:"/about",component:()=>ba(()=>import("./AboutView-Z6DTH4dE.js"),__vite__mapDeps([]))},{name:"song",path:"/song/:id",component:()=>ba(()=>import("./SongView-r0p9ZStH.js"),__vite__mapDeps([]))},{name:"manage",path:"/manage",component:()=>ba(()=>import("./ManageView-5A7IBWfL.js"),__vite__mapDeps([])),meta:{requiredAuth:!0},beforeEnter:()=>{if(!Zo().userLoggedIn)return{name:"home"}}},{path:"/:catchAll(.*)*",redirect:{name:"home"}}],Mf=nD({history:y1("/"),routes:eM,linkExactActiveClass:"text-yellow-500"});Mf.beforeEach(()=>{iE.start()});Mf.afterEach(()=>iE.done());const tM={install(t){t.component("VeeField",ZD),t.component("ErrorMessage",Ih)}};let Os;Ki.onAuthStateChanged(()=>{Os||(Os=Cb(YV),Os.use(Db()),Os.use(Mf),Os.use(tM),Os.mount("#app"))});export{TM as $,dM as A,_M as B,iD as C,Vf as D,Bn as E,Bt as F,zw as G,Ww as H,Ki as I,vM as J,IM as K,Ih as L,Zo as M,rn as N,nM as O,oM as P,sD as Q,hM as R,gM as S,Yi as T,Gh as U,kk as V,AM as W,EM as X,wM as Y,iM as Z,yM as _,Qh as a,ee as b,me as c,Ln as d,Kr as e,te as f,we as g,Ui as h,Ve as i,Dl as j,Rn as k,rM as l,Xh as m,cn as n,Xt as o,sM as p,mM as q,no as r,p0 as s,Ls as t,$V as u,bM as v,ns as w,cM as x,fM as y,pM as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
